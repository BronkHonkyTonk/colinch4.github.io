---
layout: post
title: "[clojure] Clojure 에이전트와 병렬처리"
description: " "
date: 2023-12-26
tags: [clojure]
comments: true
share: true
---

Clojure는 함수형 프로그래밍 언어로서 **병렬처리**를 강점으로 하는데, 이를 위해 **에이전트(Agent)** 라는 개념을 제공합니다. 에이전트는 변경 가능한 상태를 관리하는데 사용되며, 여러 개의 에이전트가 **비동기적**으로 동시에 작업을 처리하고 결과를 반환할 수 있습니다.

에이전트는 **동시성을 다루는 고수준의 추상화**를 제공하므로, 별도의 스레드 관리나 동기화 처리를 걱정할 필요가 없습니다. 이는 프로그래머가 **병렬처리에 집중**할 수 있게 해줍니다.

## 에이전트의 생성과 사용

에이전트는 다음과 같이 생성할 수 있습니다.

```clojure
(def my-agent (agent 0))
```

위 예제에서 `agent` 함수는 초기값으로 0을 갖는 새로운 에이전트를 생성합니다.

에이전트는 `send` 함수를 사용하여 상태 변경을 처리합니다.

```clojure
(send my-agent + 10)
```

이렇게하면 현재 값에 10이 더해집니다. 에이전트는 내부적으로 **작업 큐**를 가지고 있어서 여러 작업이 동시에 요청되더라도 순차적으로 처리됩니다.

## 에이전트의 에러 핸들링

에이전트는 **예외 처리**에 대한 내장 지원을 제공합니다. 예외가 발생하면 기본으로 에이전트는 **정지**되지만, 이동작을 재정의하여 에러를 처리할 수 있습니다.

```clojure
(try
  (send my-agent / 0)
  (catch ArithmeticException e
    (println "Error occurred:" (.getMessage e))))
```

위 예제는 0으로 나누는 예외가 발생하면 에러를 출력하는 예외 처리 코드입니다.

에이전트를 통한 병렬처리는 Clojure의 강력한 기능 중 하나이며, 적절히 사용하면 간단하면서도 효과적인 **병렬 프로그래밍**을 구현할 수 있습니다.

참고 문헌: [Clojure 에이전트 공식 문서](https://clojure.org/guides/using_agents)

---