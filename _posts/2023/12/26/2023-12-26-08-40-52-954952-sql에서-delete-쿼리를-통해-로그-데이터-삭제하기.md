---
layout: post
title: "[sql] SQL에서 DELETE 쿼리를 통해 로그 데이터 삭제하기"
description: " "
date: 2023-12-26
tags: [sql]
comments: true
share: true
---

대규모 데이터베이스를 운영하는 경우, 로그 데이터가 시간이 지남에 따라 쌓여 성능에 영향을 줄 수 있습니다. 이러한 경우, DELETE 쿼리를 사용하여 과거의 로그 데이터를 정기적으로 삭제하는 것이 중요합니다. 

### 1. 데이터를 삭제하기 전에 백업

중요한 데이터를 삭제하기 전에, 먼저 그 내용을 백업하여야 합니다. 이를 통해 실수로 데이터를 영구적으로 삭제하는 일을 사전에 방지할 수 있습니다.

### 2. 삭제 대상을 선정

어떤 데이터를 삭제할지 명확히 정하고 이를 기준으로 DELETE 쿼리를 작성하여야 합니다. 보통 로그 데이터를 삭제할 때는 특정 날짜 이전의 데이터를 대상으로 선택합니다.

예를들어, `log_time`이라는 필드가 있는 로그 테이블에서 1년 이전의 데이터를 삭제하려면 다음과 같은 쿼리를 사용할 수 있습니다:

```sql
DELETE FROM log_table WHERE log_time < DATE_SUB(NOW(), INTERVAL 1 YEAR);
```

위 쿼리는 `log_time` 필드가 현재 날짜로부터 1년 이전인 로그를 삭제합니다.

### 3. 삭제 쿼리 실행

삭제 대상을 선정한 후에는 해당 DELETE 쿼리를 실행하여 데이터를 삭제할 수 있습니다. 

### 4. 삭제 후 데이터베이스 정리

DELETE 쿼리를 실행한 후, 데이터베이스의 통계 정보를 업데이트하거나 인덱스를 재작성함으로써 데이터베이스의 성능을 최적화할 수 있습니다.

로거 데이터는 보안 및 규정 준수에 따라 일정 기간 동안 필요할 수 있으므로, 삭제 정책을 명확히 정하고 수행하여야 합니다.

---

관련 참고 자료: 
- MySQL 공식 문서: [DELETE Syntax](https://dev.mysql.com/doc/refman/8.0/en/delete.html)