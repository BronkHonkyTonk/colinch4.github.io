---
layout: post
title: "[sql] 로그 기반 복구"
description: " "
date: 2023-12-26
tags: [sql]
comments: true
share: true
---

본 문서에서는 SQL Server에서 로그 기반 복구의 개념과 이점, 사용 방법에 대해 다루겠습니다.

## 목차
1. [로깅의 개념](#로깅의-개념)
2. [로그 기반 복구의 이점](#로그-기반-복구의-이점)
3. [로그 기반 복구 사용 방법](#로그-기반-복구-사용-방법)
4. [결론](#결론)

---

## 로깅의 개념
로깅은 데이터베이스 변경 시 변경 내역을 기록하는 과정을 의미합니다. 모든 데이터베이스는 로그 파일을 유지하여 변경 내역을 추적하고 데이터의 일관성을 유지합니다. SQL Server에서는 트랜잭션 로그를 사용하여 데이터베이스 상태를 추적합니다.

## 로그 기반 복구의 이점
로그 기반 복구를 사용하면 데이터베이스의 이전 시점으로 복구할 수 있습니다. 이를 통해 실수로 삭제된 데이터나 시스템 장애로 인해 손실된 데이터를 복구할 수 있습니다. 또한, 로그 기반 복구를 통해 시스템 장애로부터 빠르게 회복할 수 있어 업무 중단 시간을 최소화할 수 있습니다.

## 로그 기반 복구 사용 방법
로그 기반 복구를 위해서는 다음 단계를 따릅니다.

1. **전체 복구 모델 설정**: 데이터베이스의 복구 모델을 "전체 복구"로 설정합니다.
   ```sql
   ALTER DATABASE [데이터베이스명] SET RECOVERY FULL;
   ```

2. **백업**: 정기적으로 데이터베이스의 트랜잭션 로그를 백업합니다.
   ```sql
   BACKUP LOG [데이터베이스명] TO [백업파일경로];
   ```

3. **복구 시나리오 적용**: 원하는 시점의 백업 파일과 해당 시점 이후의 트랜잭션 로그를 복구합니다.
   ```sql
   RESTORE DATABASE [데이터베이스명] FROM DISK = '[전체 백업 파일경로]' WITH NORECOVERY;
   RESTORE LOG [데이터베이스명] FROM DISK = '[로그 백업 파일경로]' WITH RECOVERY;
   ```

## 결론
로그 기반 복구는 데이터베이스의 안정성을 유지하고 중요한 데이터의 손실을 방지하는 데 중요한 기술입니다. 올바르게 구성된 로그 기반 복구 환경은 시스템의 신뢰성과 업무 연속성을 보장하는 데 큰 도움이 될 것입니다.

---
  
본 문서에서는 SQL Server에서 로그 기반 복구의 개념과 이점, 사용 방법에 대해 살펴보았습니다. 로그 기반 복구는 시스템의 장애로부터 빠르게 회복하고 데이터의 일관성을 유지하는 데에 중요한 역할을 합니다.