---
layout: post
title: "[clojure] Clojure 에이전트와 불변성 객체"
description: " "
date: 2023-12-26
tags: [clojure]
comments: true
share: true
---

Clojure는 **함수형 프로그래밍 언어**로서, 불변성(immutable)을 강조합니다. 이는 한번 생성된 데이터는 변경할 수 없다는 것을 의미합니다. 그러나 때로는 데이터를 변경해야 하는 상황이 발생할 수 있습니다. Clojure에서는 에이전트(agents)를 사용하여 이러한 상황을 다루게 됩니다.

## 에이전트(Agents)

에이전트는 Clojure에서 **변경 가능한 상태**를 처리하는데 사용됩니다. 에이전트는 한 번에 하나의 작업만을 처리하며, 여러 스레드에서 안전하게 **병렬로 작업을 수행**할 수 있습니다. 에이전트는 **불변성을 유지하면서도 비동기적으로 상태를 변경**할 수 있도록 해줍니다.

에이전트는 `agent` 함수를 사용하여 생성되며, `send` 함수를 통해 **상태 변경을 요청**합니다.

### 에이전트 생성

아래의 코드는 `agent` 함수를 사용하여 정수값을 가지는 새로운 에이전트를 생성하는 예제입니다.

```clojure
(def my-agent (agent 0))
```

### 상태 변경 요청

에이전트의 상태를 변경하기 위해서는 `send` 함수를 사용합니다. 아래 예제는 에이전트의 값을 1 증가시키는 작업을 요청하는 코드입니다.

```clojure
(send my-agent inc)
```

## 불변성 객체

Clojure에서는 **불변성 객체**를 사용하여 데이터 변경 없이 새로운 데이터를 생성합니다. 한 번 생성된 불변성 데이터는 변경되지 않기 때문에 예측 가능한 코드를 작성하는 데 도움이 됩니다.

불변성 객체는 `def` 함수를 사용하여 정의되며, `assoc` 함수를 통해 새로운 값이 추가된 새로운 불변성 객체를 생성할 수 있습니다.

아래 예제는 불변성 객체를 생성하고 `assoc` 함수를 사용하여 새로운 값을 추가하는 코드입니다.

```clojure
(def my-map {:name "John" :age 30})
(def new-map (assoc my-map :age 31))
```

## 결론

Clojure에서는 에이전트와 불변성 객체를 통해 **변경 가능한 상태를 관리**하고 **데이터 변경 없이 새로운 데이터를 생성**할 수 있습니다. 이러한 기능들은 Clojure를 효과적으로 활용하여 **안전하고 예측 가능한 코드**를 작성하는데 도움이 됩니다.

위 내용은 Clojure의 **에이전트**와 **불변성 객체**에 대한 간략한 소개입니다. Clojure를 더 깊게 공부하고자 한다면 Clojure 공식 문서 및 관련 자료를 참고하시기 바랍니다.