---
layout: post
title: "[shell] Shell 스크립트 실행 중 에러 모니터링"
description: " "
date: 2023-12-22
tags: [shell]
comments: true
share: true
---

Shell 스크립트를 실행할 때 발생하는 에러를 모니터링하는 것은 매우 중요합니다. 이를 통해 시스템의 정상 작동 여부를 확인하고 문제가 발생한 경우에는 빠르게 대응할 수 있습니다. 이번 포스트에서는 Shell 스크립트 실행 중 에러를 모니터링하는 방법에 대해 소개하겠습니다.

## 1. 에러 로깅

Shell 스크립트를 실행할 때 발생하는 에러는 로그 파일에 기록되어야 합니다. 이를 통해 나중에 로그 파일을 분석하여 에러의 원인을 파악할 수 있습니다. 에러 로그를 기록하기 위해 Shell 스크립트에는 다음과 같은 명령어를 추가할 수 있습니다.

```shell
#!/bin/bash

exec 2>> /var/log/my_script_error.log
```

위 코드는 모든 에러를 `/var/log/my_script_error.log` 파일에 기록하는 예시입니다.

## 2. 에러 코드 확인

Shell 스크립트에서 발생한 최근 에러 코드를 확인하여 해당 상태에 따른 조치를 취할 수 있습니다. 에러 코드는 `$?`를 통해 확인할 수 있습니다. 예를 들어, 아래 코드는 가장 최근에 실행된 명령어의 종료 상태를 확인합니다.

```shell
if [ $? -ne 0 ]; then
  echo "에러가 발생했습니다."
  # 에러 처리 코드 추가
fi
```

## 3. 이메일 알림

에러 발생 시 관련된 담당자에게 이메일 알림을 보내는 것도 중요합니다. 이를 위해 Shell 스크립트에는 이메일을 보내는 명령어를 추가할 수 있습니다.

```shell
#!/bin/bash

if [ $? -ne 0 ]; then
  echo "에러가 발생했습니다." | mail -s "스크립트 오류 알림" admin@example.com
  # 에러 처리 코드 추가
fi
```

## 결론

Shell 스크립트 실행 중 에러를 모니터링하는 것은 시스템 안정성을 유지하기 위해 반드시 필요한 작업입니다. 적절한 에러 로깅, 에러 코드 확인, 그리고 이메일 알림을 설정하여 에러 발생 시 빠르게 대응할 수 있도록 해야 합니다.