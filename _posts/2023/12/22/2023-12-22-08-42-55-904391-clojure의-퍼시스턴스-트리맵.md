---
layout: post
title: "[clojure] Clojure의 퍼시스턴스 트리맵"
description: " "
date: 2023-12-22
tags: [clojure]
comments: true
share: true
---

Clojure는 함수형 프로그래밍 언어로서 **불변성**과 **영속성**을 강조합니다. 이러한 특성을 바탕으로 Clojure는 여러 **영속적인 자료구조**를 제공하는데, 그중에서도 **퍼시스턴스 트리맵**은 매우 중요한 자료구조입니다. 이 글에서는 Clojure의 퍼시스턴스 트리맵에 대해 살펴보겠습니다.

## 퍼시스턴스 트리맵이란?

**퍼시스턴스 트리맵**은 Clojure에서 제공하는 영속적인 맵 자료구조입니다. 이 자료구조는 일반적인 트리맵과 유사하지만, **함수형 프로그래밍**의 특성을 반영하여 변경이 발생할 때 이미 존재하는 값을 변경하는 것이 아니라 **새로운 값**을 생성합니다. 이는 이전 상태를 그대로 유지하면서 새로운 상태를 만들어냄으로써 **불변성과 영속성**을 보장합니다.

## 퍼시스턴스 트리맵의 장점

- **불변성**: 기존 맵을 변경하지 않고 새로운 맵을 생성하여 변경 작업을 수행함으로써 불변성을 유지합니다.
- **영속성**: 이전 상태를 보존하면서 새로운 상태를 만들어내므로, 변경 이력을 유지할 수 있습니다.
- **효율성**: 변경 작업이 발생하더라도 기존의 구조를 그대로 유지하면서 높은 성능을 제공합니다.

## 퍼시스턴스 트리맵의 활용

퍼시스턴스 트리맵은 **대용량 데이터**를 다루는 경우나 **다중 쓰레드 환경**에서 안전하게 데이터를 처리할 때 매우 유용합니다. 또한 Clojure의 다양한 라이브러리와 연동하여 효율적인 데이터 처리를 지원합니다.

```clojure
;; 퍼시스턴스 트리맵 생성
(def tree-map (persistent! (sorted-map :a 1 :b 2 :c 3)))

;; 값 추가
(def new-tree-map (assoc tree-map :d 4))

;; 값 삭제
(def new-tree-map (dissoc tree-map :c))

;; 값 참조
(println (get tree-map :a))
```

## 마치며

퍼시스턴스 트리맵은 Clojure의 핵심 자료구조 중 하나로서, 불변성과 영속성을 효과적으로 유지하면서 효율적인 데이터 처리를 가능케 합니다. 이를 통해 안전하고 효율적인 프로그래밍을 지원하며, Clojure의 강력한 기능들과 함께 활용될 수 있습니다.

더 많은 정보는 [공식 Clojure 문서](https://clojure.org/reference/persistent)를 참고하세요.