---
layout: post
title: "[clojure] Clojure의 퍼시스턴스 데이터 구조의 가비지 컬렉션"
description: " "
date: 2023-12-22
tags: [clojure]
comments: true
share: true
---

Clojure는 **함수형 프로그래밍 언어**이며, **퍼시스턴스 데이터 구조**를 사용하여 데이터를 효율적으로 다룹니다. 하지만 이러한 데이터 구조를 사용할 때는 **가비지 컬렉션**에 대한 고려가 필요합니다. 

## Clojure의 퍼시스턴스 데이터 구조

Clojure의 퍼시스턴스 데이터 구조는 변경 가능한 상태를 피하고, 새로운 데이터를 생성할 때 이전 데이터를 재활용하여 성능을 향상시킵니다. 예를 들어, 벡터의 경우 `conj` 함수를 사용하여 요소를 추가하면 새로운 벡터가 생성되지만, 이전 벡터의 구조를 재활용합니다.

```clojure
(def v1 [1 2 3])
(def v2 (conj v1 4))
```

## 가비지 컬렉션

가비지 컬렉션은 사용되지 않는 메모리를 해제하여 시스템 자원을 최적화하는 프로세스입니다. Clojure의 퍼시스턴스 데이터 구조는 효율적으로 메모리를 활용하지만, **참조를 제대로 관리하지 않으면 메모리 누수가 발생**할 수 있습니다.

```clojure
(def v1 [1 2 3])
(def v2 v1)
```

위 예제에서 `v2`가 `v1`을 참조하고 있으면, `v1`이 가비지 컬렉션의 대상이 되지 않습니다. 그러므로 사용하지 않는 데이터를 참조하는 변수를 최소화하는 것이 중요합니다.

## 결론

Clojure의 퍼시스턴스 데이터 구조는 함수형 프로그래밍의 장점을 살려 성능을 향상시키지만, 가비지 컬렉션에 대한 고려가 필요합니다. **효율적인 메모리 사용을 위해 참조를 제대로 관리하는 것이 중요**합니다.

참조:

1. https://clojure.org/
2. "Programming Clojure" by Stuart Halloway and Aaron Bedra