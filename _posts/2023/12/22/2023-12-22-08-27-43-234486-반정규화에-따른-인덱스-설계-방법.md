---
layout: post
title: "[sql] 반정규화에 따른 인덱스 설계 방법"
description: " "
date: 2023-12-22
tags: [sql]
comments: true
share: true
---

반정규화란 테이블을 설계할 때 정규화된 상태에서 성능 향상을 위해 중복을 허용하거나 데이터를 추가하는 방법을 말합니다. 이러한 반정규화를 수행할 때 인덱스를 어떻게 설계해야 하는지에 대해 알아봅시다.

## 1. 정규화된 테이블의 인덱스 분석

우선, 정규화된 상태에서의 테이블 구조와 각 테이블에 생성된 인덱스를 분석해야 합니다. 정규화된 테이블은 중복을 최소화하고 데이터 무결성을 보장하기 위해 설계되기 때문에 일반적으로 조인이 많이 발생합니다.

## 2. 반정규화된 테이블의 인덱스 추가

반정규화를 수행한 테이블에 대해 조인을 줄이기 위해 **조인 컬럼에 대한 인덱스를 추가**해야 합니다. 이를 통해 반정규화로 중복된 데이터를 포함하더라도 조인 성능을 향상시킬 수 있습니다.

## 3. 데이터 분포에 따른 인덱스 설계

데이터의 분포에 따라 인덱스를 설계해야 합니다. **데이터가 균일하게 분포되어 있을 경우**에는 인덱스의 카디널리티가 높지만, **데이터가 특정 범위에 몰려 있을 경우**에는 인덱스의 카디널리티가 낮습니다. 이에 따라 인덱스를 적절히 설계하여 성능을 극대화할 수 있습니다.

반정규화된 테이블에 대한 인덱스 설계는 데이터 모델링 단계부터 고려해야 합니다. **정확한 분석과 설계를 통해 효과적으로 데이터에 접근할 수 있는 인덱스를 구축**하여 데이터베이스의 성능을 최적화할 수 있습니다.

위의 내용을 바탕으로 반정규화된 테이블에 대한 인덱스를 설계할 때 고려해야 하는 사항에 대해 살펴보았습니다.

참고: [SQL Performance Explained by Markus Winand](https://use-the-index-luke.com/sql/table-of-contents)