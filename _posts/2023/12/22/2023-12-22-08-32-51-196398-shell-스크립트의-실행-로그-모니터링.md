---
layout: post
title: "[shell] Shell 스크립트의 실행 로그 모니터링"
description: " "
date: 2023-12-22
tags: [shell]
comments: true
share: true
---

Shell 스크립트를 실행할 때 로그를 적용하고 모니터링하는 것은 매우 중요합니다. 이 기능을 활용하면 스크립트 실행 중 발생하는 문제를 신속하게 식별하고 해결할 수 있습니다. 오늘은 Shell 스크립트의 실행 로그를 모니터링하는 방법에 대해 알아보겠습니다.

## 1. `set -x` 사용

`set -x` 명령어를 스크립트 내에서 사용하여 명령어를 실행하기 전에 해당 명령어를 화면에 표시할 수 있습니다. 이를 통해 스크립트가 실행되는 동안 발생하는 로그를 실시간으로 확인할 수 있습니다.

```shell
#!/bin/sh
set -x
# 스크립트 내용
```

## 2. `tee` 명령어를 사용하여 로그 파일에 출력

`tee` 명령어를 사용하여 스크립트 실행 중 발생하는 모든 로그를 파일에 기록할 수 있습니다. 이를 통해 로그를 추후 분석할 수 있으며, 문제가 발생한 경우에는 해당 로그 파일을 검토하여 원인을 파악할 수 있습니다.

```shell
#!/bin/sh
exec > >(tee -a script.log) 2>&1
# 스크립트 내용
```

## 3. 로깅 레벨 설정

스크립트 내에서 로깅 레벨을 설정하여 중요한 이벤트 레벨만 로그로 기록하거나, 특정 이벤트 이상의 상세한 로그를 기록할 수 있습니다. 이를 통해 로그 파일을 보다 효율적으로 관리할 수 있습니다.

```shell
#!/bin/sh
LOG_LEVEL="INFO"
# 스크립트 내용
if [ 로깅 조건 ]; then
    echo "INFO: 이벤트 발생" >> script.log
fi
```

위의 방법들을 활용하여 Shell 스크립트의 실행 로그를 적용하고 모니터링함으로써, 스크립트 실행 시 발생하는 문제를 신속하게 파악하고 대응할 수 있습니다.

참고 문헌:
- Bash Reference Manual: https://www.gnu.org/software/bash/manual/