---
layout: post
title: "[sql] 반정규화를 적용한 예시: 사용자와 권한 테이블"
description: " "
date: 2023-12-22
tags: [sql]
comments: true
share: true
---

일반적으로 데이터베이스 설계에서는 정규화를 통해 중복을 제거하고 데이터 일관성을 유지합니다. 그러나 때로는 성능을 향상시키기 위해 데이터를 조정해야 할 필요가 있습니다. 이럴 때 **반정규화**가 사용됩니다. 반정규화는 중복이 발생하더라도 성능을 개선하거나 조회 작업을 최적화하는 데 도움이 됩니다.

## 사용자 및 권한 데이터베이스 설계

일반적인 경우, 사용자와 권한은 각각의 테이블에 분리하여 저장됩니다. 다음은 간단한 사용자와 권한 테이블의 예시입니다.

### 사용자 테이블
| ID | 이름   | 이메일          |
|----|--------|-----------------|
| 1  | 홍길동 | hong@example.com|
| 2  | 김철수 | kim@example.com |

### 권한 테이블
| ID | 사용자 ID | 권한         |
|----|----------|--------------|
| 1  | 1        | 읽기         |
| 2  | 1        | 쓰기         |
| 3  | 2        | 읽기         |

위의 설계는 정규화된 형태이지만, 권한을 확인하기 위해서는 사용자와 권한 테이블을 조인해야 합니다. 이러한 조인 연산은 성능을 저하시킬 수 있습니다.

## 반정규화 적용

반정규화를 적용하여 성능을 향상시키기 위해, 권한 정보를 사용자 테이블에 포함시켜 보겠습니다.

### 반정규화된 사용자 테이블
| ID | 이름   | 이메일          | 권한         |
|----|--------|-----------------|--------------|
| 1  | 홍길동 | hong@example.com| 읽기, 쓰기   |
| 2  | 김철수 | kim@example.com | 읽기         |

위와 같이 권한 정보를 사용자 테이블에 포함시킴으로써, 권한을 확인하기 위한 조인 연산을 제거하고 성능을 향상시킬 수 있습니다.

이렇게 반정규화는 성능 향상을 위해 중복성을 허용하는 것이므로 주의해서 적용하여야 합니다.