---
layout: post
title: "[shell] Shell 스크립트의 모니터링과 알림 설정"
description: " "
date: 2023-12-22
tags: [shell]
comments: true
share: true
---

본 문서에서는 *Shell* 스크립트를 사용하여 시스템 및 애플리케이션 상태를 지속적으로 모니터링하고, 발생하는 이벤트에 대해 신속하게 알림을 받는 방법에 대해 살펴보겠습니다.

1. [모니터링 스크립트 작성](#모니터링-스크립트-작성)
2. [이벤트 로깅 및 알림 설정](#이벤트-로깅-및-알림-설정)
3. [이벤트 처리 방안](#이벤트-처리-방안)

---

## 모니터링 스크립트 작성
Shell 스크립트를 사용하여 시스템 자원 사용량, 특정 애플리케이션 상태 및 기타 중요한 지표를 주기적으로 확인하는 스크립트를 작성합니다.

예를 들어, 다음과 같은 방법으로 시스템의 CPU 및 메모리 사용량, 디스크 용량 등을 모니터링할 수 있습니다.

```bash
#!/bin/bash
# 모니터링 스크립트 작성 예시

# CPU 사용량 모니터링
cpu_usage=$(top -bn1 | grep "Cpu(s)" | awk '{print $2}' | cut -d. -f1)

# 메모리 사용량 모니터링
mem_usage=$(free | awk 'NR==2 {print $3/$2 * 100.0}')

# 디스크 용량 모니터링
disk_usage=$(df -h / | awk 'NR==2 {print $5}' | cut -d% -f1)

# 결과 출력
echo "CPU 사용량: $cpu_usage%"
echo "메모리 사용량: $mem_usage%"
echo "디스크 사용량: $disk_usage%"
```

## 이벤트 로깅 및 알림 설정
모니터링 스크립트에서 추출한 정보를 로그 파일에 기록하고, 필요한 경우 이를 이메일이나 SMS 등을 통해 관리자에게 알림으로 전달합니다.

아래는 이메일을 통해 이벤트를 알리는 예시입니다.

```bash
# 이메일 알림 설정 예시

# 이벤트 로깅
event_log="서버 이벤트 발생 - CPU 사용량($cpu_usage%), 메모리 사용량($mem_usage%), 디스크 사용량($disk_usage%)"

# 관리자 알림
echo "$event_log" | mail -s "서버 이벤트 알림" admin@example.com
```

## 이벤트 처리 방안
로깅 및 알림 수단을 통해 관리자에게 이벤트를 신속하게 전달하였다면, 이후의 이벤트 처리 방안을 개발자 및 운영팀과 협의하여 수립해야 합니다. 이를 통해 문제 상황에 대한 신속하고 효율적인 대응이 가능해집니다.

이러한 방식으로 *Shell* 스크립트를 사용하여 시스템 및 애플리케이션 모니터링 및 알림 설정을 통해, 시스템 운영 효율성을 높이고 잠재적인 문제를 사전에 감지할 수 있습니다.

감사합니다.

---

관련 문서:
- Shell 스크립팅 - https://ko.wikipedia.org/wiki/셸_스크립트