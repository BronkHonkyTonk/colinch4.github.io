---
layout: post
title: "[clojure] Clojure의 퍼시스턴스 데이터 구조의 작동 방식"
description: " "
date: 2023-12-22
tags: [clojure]
comments: true
share: true
---

Clojure는 **함수형 프로그래밍 언어**로써, 변경 불가능한(persistent) 데이터 구조를 사용합니다. 이러한 데이터 구조는 한 번 생성된 이후에는 수정할 수 없으며, 그 대신에 변경된 사본을 반환합니다. 이로 인해 다중 스레드 환경에서도 안전하게 사용할 수 있는 장점이 있습니다.

## Clojure의 퍼시스턴스 데이터 구조

Clojure에는 **리스트, 벡터, 맵, 집합** 등 다양한 퍼시스턴스 데이터 구조가 있습니다. 이러한 데이터 구조는 변경 불가능하며, 변경된 버전을 만들어낼 때 **구조를 재활용**하여 메모리를 절약합니다.

예를 들어, 벡터에 특정 요소를 추가하면, 기존 벡터의 일부를 재활용하여 새로운 벡터를 생성합니다. 이로써 기존 데이터 구조를 유지하면서 변경된 사본을 효율적으로 만들어냅니다.

## 트라이(Trie) 구조와 변경 불가능한 데이터

Clojure는 변경 불가능한 데이터 구조를 구현하기 위해 **트라이(Trie)** 구조를 사용합니다. 이는 새로운 요소를 추가하거나 제거할 때마다 구조를 새로 만들지 않고, 변경된 부분만을 새로운 구조에 반영함으로써 효율적으로 작동합니다.

```clojure
(def my-map {:a 1 :b 2})
(def new-map (assoc my-map :c 3))
```

위의 예시에서 `assoc` 함수는 `my-map`을 변경하지 않고, `:c 3`을 추가한 새로운 맵을 생성합니다. 이를 통해 기존의 맵을 유지하면서도 새로운 버전을 만들어냅니다.

## 결론

Clojure의 퍼시스턴스 데이터 구조는 변경 불가능하며, 트라이 구조를 통해 변경된 부분만을 새로운 버전에 반영하여 효율적으로 작동합니다. 이는 다중 스레드 환경에서 안전하게 사용할 수 있도록 도와줍니다.

더 많은 정보는 [Clojure 공식 문서](https://clojure.org/)를 참고하세요.