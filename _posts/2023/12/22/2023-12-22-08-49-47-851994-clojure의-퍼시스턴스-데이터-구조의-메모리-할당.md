---
layout: post
title: "[clojure] Clojure의 퍼시스턴스 데이터 구조의 메모리 할당"
description: " "
date: 2023-12-22
tags: [clojure]
comments: true
share: true
---

Clojure는 불변성을 강조하여 데이터를 변경할 때마다 새로운 버전의 데이터를 생성합니다. 이를 위해 Clojure는 **퍼시스턴스 데이터 구조**를 사용합니다. 퍼시스턴스 데이터 구조는 변경이 필요할 때 이전 버전을 복제하고 이를 변경한 새로운 버전을 만들어 메모리를 효율적으로 활용합니다.

## 퍼시스턴스 데이터 구조의 메모리 할당 방식

### 1. 변경 시 새로운 버전 생성

Clojure의 퍼시스턴스 데이터 구조는 데이터를 변경할 때마다 이전 버전을 변경하지 않고 새로운 버전을 생성합니다. 이로 인해 변경 전의 데이터 구조와 변경 후의 데이터 구조는 공유하는 부분이 있고, 이를 효율적으로 관리하여 메모리를 절약합니다.

### 2. 복잡도

퍼시스턴스 데이터 구조의 변경 작업은 일반적으로 수정이 수행된 부분의 크기에 비례하는 대신 수정이 가해진 위치에 포인터의 길이에 로그 인 복잡도로 수행됩니다. 이것은 큰 데이터 구조에서도 상대적으로 일정한 성능을 제공합니다.

### 3. 가비지 콜렉션

또한, 퍼시스턴스 데이터 구조는 더 이상 참조되지 않는 데이터를 가비지 콜렉션하기 쉽게 만들어줍니다. 이것은 메모리 관리를 좀 더 효율적으로 만들어 줍니다.

이러한 방식으로 Clojure의 퍼시스턴스 데이터 구조는 변경을 효율적으로 다루면서도 메모리를 효율적으로 활용합니다.

더 자세한 내용은 [Clojure 공식 문서](https://clojure.org/reference/data_structures)를 참고하세요.