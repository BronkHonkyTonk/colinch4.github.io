---
layout: post
title: "[sql] 반정규화를 적용한 예시: 주문과 주문상세 테이블"
description: " "
date: 2023-12-22
tags: [sql]
comments: true
share: true
---

관계형 데이터베이스의 정규화는 중복을 최소화하여 데이터를 일관되게 유지하기 위한 중요한 프로세스입니다. 그러나 때로는 성능 향상이나 간편한 쿼리 작성을 위해 데이터를 반정규화 해야 할 때가 있습니다. 이를 위해 주문과 주문상세 테이블을 예로 들어보겠습니다.

## 1. 정규화된 구조

먼저, 주문과 주문상세 테이블이 각각 다음과 같이 구성되어 있다고 가정해 봅시다.

### 주문 테이블 (Orders)
| order_id | customer_id | order_date | total_amount |
|-------|--------|----------|-------------|
| 1     | 101    | 2022-01-01| 150.00      |

### 주문상세 테이블 (OrderDetails)
| order_detail_id | order_id | product_id | quantity | unit_price |
|----------------|-------|----------|----------|-----------|
| 1              | 1     | 201       | 2        | 50.00     |
| 2              | 1     | 202       | 1        | 50.00     |

## 2. 반정규화된 구조

이제 반정규화를 적용하여 주문과 주문상세 정보를 결합한 테이블을 만들어 보겠습니다.

### 반정규화된 주문 상세 테이블 (DenormalizedOrderDetails)
| order_id | customer_id | order_date | total_amount | order_detail_id | product_id | quantity | unit_price |
|-------|--------|----------|-------------|----------------|----------|----------|-----------|
| 1     | 101    | 2022-01-01| 150.00      | 1              | 201       | 2        | 50.00     |
| 1     | 101    | 2022-01-01| 150.00      | 2              | 202       | 1        | 50.00     |

이제 위의 테이블을 사용하여 쿼리를 실행할 때, 조인 연산 없이 필요한 정보를 한꺼번에 얻을 수 있으므로 성능 향상에 도움이 될 것입니다.

## 3. 정리

주문과 주문상세 테이블을 반정규화함으로써 데이터 모델을 단순화하고 성능을 향상시킬 수 있지만, 이는 데이터 중복과 일관성 유지에 대한 상충 관계가 발생할 수 있다는 점을 유의해야 합니다. 적절한 상황에서 반정규화를 적용하는 것이 중요합니다.

이상으로, 반정규화를 적용한 주문과 주문상세 테이블에 대한 예시를 살펴보았습니다.

참고문헌:
- Date, C. J. (2003). An Introduction to Database Systems. Addison-Wesley.