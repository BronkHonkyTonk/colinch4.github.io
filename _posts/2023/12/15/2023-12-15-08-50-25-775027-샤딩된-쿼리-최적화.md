---
layout: post
title: "[sql] 샤딩된 쿼리 최적화"
description: " "
date: 2023-12-15
tags: [sql]
comments: true
share: true
---

데이터베이스 샤딩은 대량의 데이터를 처리할 때 성능을 향상시키는 방법 중 하나이다. 쿼리를 여러 데이터베이스로 분할하여 병렬로 처리함으로써 전체 처리량을 늘릴 수 있다.

그러나 **쿼리 최적화는 여전히 중요**하다. **여러 샤드에 걸친 쿼리는 병렬 처리되지만, 쿼리 자체의 성능이 떨어지면 샤딩된 과정 전반에 영향을 미칠 수 있다.**

쿼리 최적화를 위한 몇 가지 고려 사항:
- **인덱싱**: 각 샤드 키별로 적절한 인덱스를 유지하는 것이 중요하다. 검색 조건에 맞는 인덱스가 존재해야만 최적의 성능을 얻을 수 있다.
- **조인 최소화**: 조인은 여러 데이터베이스의 데이터를 결합하는 과정이므로 오버헤드가 발생할 수 있다. **조인을 최대한 줄이고 필요시에만 수행**하도록 고려해야 한다.
- **고려되지 않은 데이터들**: 샤딩된 쿼리는 모든 샤드에 걸쳐 실행되기 때문에, **고려되지 않은 데이터베이스가 있는지 확인**해야 한다.

샤딩된 쿼리의 성능을 최적화하기 위해서는 여러 측면을 고려해야 하며, **실제 데이터와 적절하게 대조하여 결정하는 것이 중요**하다.

### Reference
- "Scaling MySQL at Facebook" - 이언 오타로(https://www.facebook.com/notes/mysql-at-facebook/scaling-mysql-at-facebook/10150299983933920/)