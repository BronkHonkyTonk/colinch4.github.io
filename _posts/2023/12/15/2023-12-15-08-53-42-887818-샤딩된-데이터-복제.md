---
layout: post
title: "[sql] 샤딩된 데이터 복제"
description: " "
date: 2023-12-15
tags: [sql]
comments: true
share: true
---

이 포스트에서는 데이터베이스의 샤딩된 환경에서 데이터를 복제하는 방법에 대해 알아보겠습니다.

## 샤딩된 데이터 복제란?

샤딩된 데이터베이스에서 데이터를 복제하는 것은 고가용성, 장애 복구 및 데이터 분석을 위한 목적으로 중요합니다. **데이터 샤딩**은 데이터베이스 분할 방법 중 하나로, 대량의 데이터를 여러 물리적 노드로 분산시키는 작업을 말합니다. 데이터 샤딩을 통해 성능을 향상시키고 데이터의 안정성을 확보할 수 있습니다.

## 샤딩된 데이터 복제 방법

보통 데이터 샤딩된 환경에서는 **각각의 샤드(shard)를 복제**하여 데이터의 안정성을 보장합니다. 대표적인 복제 방법으로는 **주파수 동기화 및 복제**와 **비동기 복제**가 있습니다.

### 주파수 동기화 및 복제

주파수 동기화 및 복제는 모든 트랜잭션의 데이터 변경 사항을 여러 샤드에 동시에 적용하는 방식입니다. 이 방법은 **일관성(consistency)**을 유지하면서 데이터를 복제할 수 있지만, 네트워크 지연으로 인한 성능 영향이 있을 수 있습니다.

```sql
CREATE TABLE 테이블명 (
  ...
) ENGINE = InnoDB;

ALTER TABLE 테이블명 ADD PRIMARY KEY(shard_key);
```

### 비동기 복제

비동기 복제는 데이터 변경 사항을 다른 샤드로 복제하는 동안 지연을 허용하는 방식입니다. 이 방법은 주로 **성능(performance)**을 우선시하는 경우에 적합합니다. 하지만 일관성 측면에서는 주파수 동기화 및 복제에 비해 약간의 차이가 있을 수 있습니다.

```sql
CREATE DATABASE dbname;
SHOW DATABASES;
```

## 결론

샤딩된 환경에서는 데이터를 복제하여 안정성과 성능을 확보하는 것이 중요합니다. 주파수 동기화 및 복제와 비동기 복제는 각각의 장단점이 있으므로, 데이터베이스 구성과 운영 환경을 고려하여 적합한 방식을 선택해야 합니다.

이상으로 샤딩된 데이터 복제에 대한 내용을 알아보았습니다. 감사합니다.

## 참고 자료
- [MySQL 공식 문서](https://dev.mysql.com/doc/)