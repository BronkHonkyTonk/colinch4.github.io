---
layout: post
title: "[c++] 메모리 비압축 최적화"
description: " "
date: 2023-12-15
tags: [c++]
comments: true
share: true
---

C++ 프로그래밍에서 메모리 효율성은 중요한 요소입니다. 메모리 비압축 최적화는 프로그램의 성능을 향상시키고 메모리 사용을 줄이는 데 도움이 됩니다.

## 1. 데이터 구조 최적화

### 1.1. 데이터 형식 선택

적절한 데이터 형식 선택은 메모리 최적화의 첫걸음입니다. 불필요하게 큰 데이터 형식을 사용하는 대신에 **적절한 크기의 데이터 형식을 선택**하여 메모리를 절약할 수 있습니다.

예시:
```c++
// 잘못된 예시
int a; // int의 경우 4바이트를 사용

// 올바른 예시
short b; // short의 경우 2바이트를 사용
```

### 1.2. 패딩 최소화

구조체를 사용할 때 **패딩 최소화**를 고려해야 합니다. 데이터 멤버의 순서를 조정하여 패딩을 최소화하고 메모리를 절약할 수 있습니다.

예시:
```c++
struct MyStruct {
  char c;  // 1바이트
  int i;   // 4바이트
  short s; // 2바이트
  // 패딩이 최소화됨
};
```

## 2. 동적 메모리 할당 최적화

### 2.1. 메모리 풀 사용

동적 메모리 할당은 프로그램의 메모리 소비를 늘리는 요인입니다. **메모리 풀을 사용**하여 자주 할당하고 해제하는 작업의 오버헤드를 줄일 수 있습니다.

예시:
```c++
std::vector<int> memoryPool;
memoryPool.reserve(100); // 메모리 미리 할당
```

### 2.2. 사용하지 않는 메모리 해제

동적으로 할당된 메모리를 더 이상 사용하지 않을 때는 **명시적으로 메모리를 해제**하여 메모리 누수를 방지해야 합니다.

예시:
```c++
int* ptr = new int;
// ptr 사용
delete ptr; // 메모리 해제
```

## 3. 컴파일러 최적화

### 3.1. 인라인 함수 사용

인라인 함수를 사용하여 함수 호출의 오버헤드를 줄일 수 있습니다. **간단하고 빈번하게 호출되는 함수에 인라인 지시자를 사용**하여 성능을 향상시킬 수 있습니다.

예시:
```c++
inline int add(int a, int b) {
  return a + b;
}
```

### 3.2. 최적화 옵션 활성화

컴파일러에서 **최적화 옵션을 활성화**하여 코드를 최적화할 수 있습니다. 예를 들어, GCC 컴파일러의 경우 `-O2` 또는 `-O3` 옵션을 사용하여 최적화를 활성화할 수 있습니다.

이러한 방법을 통해 C++ 프로그램의 메모리를 비압축 최적화할 수 있습니다. 메모리 사용을 줄이고 성능을 최적화하여 효율적인 프로그램을 개발할 수 있습니다.