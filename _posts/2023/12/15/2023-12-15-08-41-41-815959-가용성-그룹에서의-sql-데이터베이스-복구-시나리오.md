---
layout: post
title: "[sql] 가용성 그룹에서의 SQL 데이터베이스 복구 시나리오"
description: " "
date: 2023-12-15
tags: [sql]
comments: true
share: true
---

가용성 그룹은 SQL Server에서 고가용성을 제공하는 솔루션 중 하나로, 하나 이상의 데이터베이스 복제본을 사용하여 장애 발생 시 시스템을 지속적으로 이용할 수 있도록 합니다. 그러나 데이터베이스 복구는 여전히 필요한데, 이는 데이터베이스 오브젝트의 손상, 잘못된 트랜잭션 또는 사용자 실수 등으로 인해 발생할 수 있습니다. 이러한 경우를 대비하여 가용성 그룹에서의 데이터베이스 복구 시나리오를 살펴보겠습니다.

## 1. 데이터베이스 손상 시나리오
데이터베이스가 손상된 경우, 손상이 발생한 시점 이후의 정상적인 상태로 복원해야 합니다. 이를 위해 다음 단계를 따릅니다.

## 2. 데이터베이스 복구 단계
### 2.1. 장애 발생 시 확인 사항
1. 손상된 데이터베이스 확인
2. 데이터베이스 복원 시점 결정

### 2.2. 데이터베이스 상태 확인
가용성 그룹의 복제본 상태를 확인하여 현재 운영 가능한 복제본을 식별합니다.

### 2.3. 가용성 그룹에서의 데이터베이스 복원
1. 손상된 데이터베이스를 복원하고자 하는 복제본으로 failover 진행
2. 복제본을 primary로 변경한 후 데이터베이스 복원 진행
3. 지원되는 가용성 그룹의 복구 모드를 사용하여 복원을 시작하고 데이터베이스 상태를 ONLINE으로 변경

## 3. 데이터베이스 복구 후 작업
복구된 데이터베이스를 대상으로 추가적인 작업을 수행할 수 있습니다.

가용성 그룹에서의 데이터베이스 복원은 장애 발생 시 시스템의 지속적인 가용성을 확보하는 중요한 절차입니다. 데이터베이스 관리자는 이러한 시나리오를 충분히 숙지하고 필요한 경우 신속하게 대응할 수 있어야 합니다.

이를 통해 SQL 데이터베이스의 가용성 그룹에서의 데이터베이스 복구 시나리오에 대해 알아보았습니다.