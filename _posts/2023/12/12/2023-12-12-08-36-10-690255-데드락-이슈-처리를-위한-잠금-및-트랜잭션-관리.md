---
layout: post
title: "[sql] 데드락 이슈 처리를 위한 잠금 및 트랜잭션 관리"
description: " "
date: 2023-12-12
tags: [sql]
comments: true
share: true
---

## 데드락(Deadlock) 이란?
데드락은 데이터베이스에서 두 개 이상의 트랜잭션이 서로 상대방의 작업이 끝나기를 기다리면서 진행이 멈춘 상태를 말합니다. 이러한 상황은 두 트랜잭션이 서로 필요로 하는 자원을 점유한 채 서로를 기다리게 되는 상태에 도달했을 때 발생합니다.

## 데드락 처리를 위한 잠금 관리
데드락을 방지하기 위해 잠금 관리는 매우 중요합니다. 데이터베이스 시스템은 트랜잭션이 데이터를 접근할 때 해당 데이터에 대한 잠금(lock)을 설정하고, 사용이 완료되면 잠금을 해제합니다. 

### 잠금 유형
- 공유잠금(Shared Lock): 해당 자원을 읽기 위한 잠금. 다른 트랜잭션도 같은 자원을 읽기는 가능하지만 쓰기 작업은 금지됨.
- 배타적잠금(Exclusive Lock): 해당 자원을 읽거나 쓰기 위한 잠금. 다른 트랜잭션은 해당 자원에 접근할 수 없음.

## 데드락 처리를 위한 트랜잭션 관리
트랜잭션 관리를 통해 데드락을 방지할 수 있습니다.
### 1. 짧은 트랜잭션
트랜잭션을 가능한 짧게 유지하여 자원 잠금 시간을 최소화합니다.
### 2. 트랜잭션 범위 축소
트랜잭션의 범위를 최소화하여 자원 점유 시간을 최소화 합니다.
### 3. 정상 종료 처리
트랜잭션 처리 중 오류가 발생했을 때 롤백하는 등의 처리를 통해 정상적으로 트랜잭션을 종료합니다.

데드락은 데이터베이스의 성능과 안정성에 매우 중요한 문제이므로, 잠금 관리 및 트랜잭션 관리를 적절히 수행하여 데드락을 줄이고 처리하는 것이 필요합니다.