---
layout: post
title: "[sql] SQL 삽입문에서 트랜잭션 사용하기"
description: " "
date: 2023-12-12
tags: [sql]
comments: true
share: true
---

SQL에서 트랜잭션을 사용하는 것은 데이터베이스 작업을 안전하게 처리하고 일관성을 유지하는 데 도움이 됩니다. 트랜잭션은 작업을 성공적으로 완료하거나 실패할 때 데이터베이스를 이전 상태로 롤백할 수 있는 기능을 제공합니다. 

## 트랜잭션이 필요한 경우

- 여러 개의 SQL 쿼리가 모두 성공해야 할 때
- 복수의 동작을 원자적으로 처리할 때
- 데이터의 일관성을 유지해야 할 때

## 트랜잭션을 사용하는 방법

트랜잭션을 사용하려면 데이터베이스에서 제공하는 트랜잭션 기능을 활용해야 합니다. 아래는 MySQL 데이터베이스에서 트랜잭션을 사용하는 예제입니다.

```sql
START TRANSACTION;

-- 여러 개의 SQL 쿼리 실행

COMMIT;
-- 또는
ROLLBACK;
```

`START TRANSACTION`으로 트랜잭션을 시작하고, 여러 개의 SQL 쿼리를 실행한 후에 `COMMIT`으로 모든 작업을 확정지으면, `ROLLBACK`으로 이전 상태로 되돌릴 수 있습니다.

## 예시

예를 들어, 사용자가 주문을 생성하고 해당 주문에 대한 결제를 처리해야 하는 경우, 주문 생성과 결제 처리를 원자적으로 처리할 필요가 있습니다. 이때, 트랜잭션을 사용하여 두 작업이 모두 성공적으로 실행되거나 모두 실패할 수 있도록 할 수 있습니다.

앞서 언급한 예제 코드는 MySQL을 사용하는 경우이지만, 다른 데이터베이스 시스템에서도 비슷한 방식으로 트랜잭션을 사용할 수 있습니다. 이때 데이터베이스 시스템의 문서나 가이드를 참조하는 것이 도움이 될 것입니다.

이렇게 트랜잭션을 사용하여 데이터베이스 작업을 안전하게 처리할 수 있습니다.

## 참고 자료

- [MySQL 공식 문서](https://dev.mysql.com/doc/refman/8.0/en/commit.html)