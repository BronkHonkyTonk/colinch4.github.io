---
layout: post
title: "[sql] UPDATE 문으로 중복된 데이터 일괄 수정하기"
description: " "
date: 2023-12-12
tags: [sql]
comments: true
share: true
---

이번에는 SQL UPDATE 문을 사용하여 데이터베이스 테이블에서 중복된 데이터를 일괄 수정하는 방법에 대해 알아보겠습니다.

## 1. 중복된 데이터 식별

우선, 중복된 데이터를 확인하고 수정할 필요가 있습니다. 다음 SQL 쿼리를 사용하여 중복된 데이터를 확인할 수 있습니다.

```sql
SELECT 열1, 열2, COUNT(*)
FROM 테이블명
GROUP BY 열1, 열2
HAVING COUNT(*) > 1;
```

위 예시에서 `열1`과 `열2`는 중복을 확인할 열의 이름으로 바꾸어야 합니다.

## 2. 중복된 데이터 수정

다음으로, 중복된 데이터 중 하나를 유지하고 나머지는 삭제하거나 수정해야 합니다. 이를 위해 다양한 방법이 있겠지만, 다음은 중복된 데이터 중에서 최신 데이터를 유지하고 나머지를 삭제하는 예시입니다.

```sql
WITH 중복데이터 AS (
    SELECT 열1, 열2, ROW_NUMBER() OVER(PARTITION BY 열1, 열2 ORDER BY 업데이트일자 DESC) AS 순번
    FROM 테이블명
)
DELETE FROM 중복데이터
WHERE 순번 > 1;
```

위의 예시에서 `열1`, `열2`, `업데이트일자` 등은 해당 테이블의 열 이름으로 바꾸어야 합니다.

이제 SQL UPDATE 문으로 중복된 데이터를 일괄 수정하는 방법에 대해 알아보았습니다. 데이터베이스를 다룰 때 이러한 작업을 수행할 때 유용하게 사용할 수 있습니다.

예시 및 코드는 목적에 따라 데이터베이스 시스템에 따라 다를 수 있으므로, 실제 사용 시 해당 데이터베이스 시스템의 문서나 지원 정보를 참고하는 것이 좋습니다.