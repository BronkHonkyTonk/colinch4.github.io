---
layout: post
title: "[go] 고루틴과 채널을 함께 사용한 동시성 프로그래밍"
description: " "
date: 2023-12-12
tags: [go]
comments: true
share: true
---

고루틴과 채널은 *Go 프로그래밍 언어*에서 동시성 프로그래밍을 구현하는 핵심 개념입니다. 고루틴은 경량 스레드로, 여러 개의 고루틴을 동시에 실행하여 병렬성을 확보할 수 있습니다. 또한, 채널은 고루틴 사이의 통신을 담당하며 안전하고 효율적인 데이터 교환을 지원합니다. 이번 포스트에서는 고루틴과 채널을 함께 사용하여 동시성을 구현하는 방법에 대해 알아보겠습니다.

## 고루틴 생성과 실행
고루틴은 `go` 키워드를 사용하여 생성하고 실행할 수 있습니다. 다음은 간단한 고루틴 생성과 실행 방법의 예시입니다.
```go
package main

import (
	"fmt"
)

func main() {
	go func() {
		fmt.Println("Hello, 고루틴!")
	}()
	fmt.Println("메인 함수")
}
```

위 예시에서 `go` 키워드를 사용하여 익명 함수를 고루틴으로 실행시킬 수 있습니다. 이를 통해 메인 함수와 고루틴이 동시에 실행됩니다.

## 채널을 이용한 데이터 통신
채널은 `make` 함수를 사용하여 생성하고, `<-` 연산자를 이용하여 데이터를 보내고 받을 수 있습니다. 다음은 채널을 사용한 데이터 통신 예시입니다.
```go
package main

import "fmt"

func main() {
	ch := make(chan string)

	go func() {
		ch <- "안녕, 채널!"
	}()

	msg := <-ch
	fmt.Println(msg)
}
```

위 예시에서는 채널을 이용하여 고루틴과 메인 함수 간에 "안녕, 채널!"이라는 문자열을 주고 받고 있습니다.

## 고루틴과 채널을 함께 사용하기
고루틴과 채널을 함께 사용하면 여러 개의 고루틴이 동시에 실행되면서 안전하게 데이터를 교환할 수 있습니다. 다음은 고루틴과 채널을 함께 사용한 예시입니다.
```go
package main

import "fmt"

func main() {
	ch := make(chan string)

	for i := 1; i <= 3; i++ {
		go func(index int) {
			ch <- fmt.Sprintf("고루틴 %d번째", index)
		}(i)
	}

	for i := 1; i <= 3; i++ {
		msg := <-ch
		fmt.Println(msg)
	}
}
```

위 예시에서는 반복문을 통해 세 개의 고루틴을 생성하고, 각 고루틴은 채널을 통해 고유한 메시지를 보내고 있습니다.

고루틴과 채널을 함께 사용하여 동시성 프로그래밍을 구현할 때에는 **고루틴 간의 데이터 경쟁 상태**와 **데드락**에 주의해야 합니다. 이러한 문제를 해결하기 위해서는 적절한 **동기화 기법**과 **에러 핸들링**이 필요합니다.

동시성 프로그래밍은 Go 언어의 강력한 특징 중 하나이며, 고루틴과 채널을 활용한 구현은 코드의 간결성과 성능 향상에 기여할 수 있습니다.

더 많은 동시성 프로그래밍 관련 정보는 [Go 공식 문서](https://golang.org/doc/effective_go.html#concurrency)에서 확인할 수 있습니다.