---
layout: post
title: "[sql] 인덱스 생성 시 고려해야 할 부작용"
description: " "
date: 2023-12-05
tags: [sql]
comments: true
share: true
---

인덱스는 데이터베이스 성능 향상을 위해 매우 중요한 요소입니다. 하지만 인덱스를 생성할 때에도 고려해야 할 부작용이 있습니다. 이러한 부작용을 알고 적절하게 대응하는 것이 필요합니다. 이번 글에서는 SQL에서 인덱스 생성 시 고려해야 할 부작용 몇 가지를 살펴보겠습니다.

## 1. 삽입 속도 저하

인덱스는 데이터 검색 속도를 향상시키지만, 동시에 데이터 삽입 속도를 저하시킬 수 있습니다. 왜냐하면 인덱스는 데이터 삽입 시에도 인덱스를 업데이트해야 하기 때문입니다. 따라서 많은 양의 데이터를 삽입해야 하는 경우 인덱스 생성이 시간이 오래 걸릴 수 있으며, 삽입 속도가 느려질 수 있습니다. 이러한 경우에는 인덱스 생성을 나중으로 미뤄야 할 수도 있습니다.

## 2. 디스크 공간 소비

인덱스는 추가적인 디스크 공간을 필요로 합니다. 인덱스는 데이터베이스의 데이터 파일 외부에 별도로 저장되며, 데이터 파일의 크기보다 인덱스 파일의 크기가 더 커질 수도 있습니다. 따라서 인덱스를 생성할 때는 디스크 공간을 충분히 고려해야 합니다. 작은 규모의 데이터베이스에서는 큰 문제가 되지 않을 수 있지만, 대규모의 데이터베이스에서는 디스크 공간이 부족해질 수 있습니다.

## 3. 업데이트 속도 저하

인덱스를 생성한 테이블의 데이터를 업데이트하는 작업은 인덱스 업데이트를 동반하게 됩니다. 따라서 데이터 업데이트 작업이 빈번하게 발생하는 경우에는 인덱스의 크기와 개수에 따라 업데이트 속도가 저하될 수 있습니다. 이러한 경우에는 업데이트 작업을 최소화하거나 인덱스를 적절하게 관리해야 합니다.

## 4. 인덱스 무용지물

모든 테이블의 모든 필드에 인덱스를 생성하는 것은 불필요한 인덱스를 생성하는 결과를 초래할 수 있습니다. 테이블에서 실제로 자주 사용되는 필드만을 인덱스로 선택하는 것이 중요합니다. 인덱스를 너무 많이 생성하면 디스크 공간을 불필요하게 차지하고, 업데이트 작업에 소요되는 시간도 증가할 수 있습니다. 

## 5. 인덱스 사용에 따른 쿼리 최적화

인덱스를 생성하면 데이터 검색 속도는 향상되지만, 쿼리 실행 계획에도 영향을 미칩니다. 때로는 쿼리 실행 계획이 변경되어 성능이 저하될 수도 있습니다. 따라서 인덱스를 생성한 후에는 기존의 쿼리 실행 계획을 검토하고 최적화하는 작업이 필요합니다.

인덱스 생성은 데이터베이스 성능 향상을 위한 필수적인 작업이지만, 부작용을 고려하여 적절한 관리가 필요합니다. 앞서 언급한 부작용들을 잘 고려하여 인덱스를 생성하고 관리하면 데이터베이스 성능을 최적화할 수 있습니다.

## 참고 자료
- [PostgreSQL 공식 문서 - 인덱스](https://www.postgresql.org/docs/9.5/indexes-intro.html)
- [MySQL 공식 문서 - 인덱스 최적화](https://dev.mysql.com/doc/refman/8.0/en/index-optimization.html)