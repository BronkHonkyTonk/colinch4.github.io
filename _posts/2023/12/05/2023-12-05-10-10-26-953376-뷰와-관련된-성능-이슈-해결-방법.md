---
layout: post
title: "[sql] 뷰와 관련된 성능 이슈 해결 방법"
description: " "
date: 2023-12-05
tags: [sql]
comments: true
share: true
---

## 뷰(View)란?
뷰(View)는 데이터베이스에서 데이터를 저장하지 않고, 쿼리 결과를 가상의 테이블 형태로 제공하는 객체입니다. 뷰를 사용하면 복잡한 쿼리를 간단하게 작성할 수 있고, 데이터의 일부분만 필요한 경우에도 해당 부분만 조회할 수 있습니다. 하지만 뷰를 사용하면 성능 이슈가 발생할 수 있습니다.

## 뷰의 성능 이슈
뷰는 쿼리 실행 시점에 실제 테이블의 데이터를 참조하기 때문에, 뷰에 대한 쿼리가 실행될 때마다 연관된 테이블에 대한 쿼리도 실행됩니다. 즉, 뷰에 반복적으로 접근할 경우 여러 번의 테이블 조회 연산이 수행되어 성능 저하가 발생할 수 있습니다.

## 뷰의 성능 개선 방법
뷰의 성능을 개선하기 위해 다음과 같은 방법을 고려할 수 있습니다.

### 1. 인덱스 추가
뷰에 접근하는 쿼리의 성능을 향상시키기 위해, 뷰의 기반이 되는 테이블에 인덱스를 추가하는 것이 좋습니다. 인덱스를 추가하면 쿼리 실행 시에 인덱스를 이용하여 데이터를 검색하므로 성능이 향상될 수 있습니다.

### 2. 뷰 쿼리 최적화
뷰는 기본적으로 쿼리를 실행할 때마다 해당하는 테이블에 대한 쿼리를 실행합니다. 이는 뷰에 대한 쿼리를 반복적으로 실행할 때 성능 이슈를 발생시킬 수 있습니다. 따라서 뷰의 쿼리를 최적화하여 필요한 데이터만을 조회하도록 작성하는 것이 중요합니다.

### 3. 뷰 캐싱
뷰에 대한 쿼리 결과를 캐싱하여 반복적인 쿼리 실행을 피할 수 있습니다. 데이터의 변경이 없는 경우에는 캐시된 결과를 사용하여 성능을 향상시킬 수 있습니다.

### 4. 뷰 사용 제한
뷰를 남용하면 성능 저하가 발생할 수 있으므로, 필요한 경우에만 뷰를 사용하는 것이 좋습니다. 쿼리가 복잡하지 않은 경우에는 뷰를 사용하지 않고 직접 쿼리를 작성하는 것이 성능에 도움이 될 수 있습니다.

## 마무리
뷰는 유용한 객체이지만 성능 이슈를 발생시킬 수 있습니다. 뷰의 성능 저하를 방지하기 위해 인덱스 추가, 쿼리 최적화, 캐싱, 뷰 사용 제한 등의 방법을 적절히 활용해야 합니다. 적절한 성능 튜닝을 통해 데이터베이스 시스템의 성능을 향상시킬 수 있습니다.

[참고 자료]
- [How to Improve Performance of Views in SQL Server](https://www.sqlshack.com/how-to-improve-performance-of-views-in-sql-server/)
- [Improving SQL Server Performance with Indexed Views](https://www.red-gate.com/simple-talk/sql/learn-sql-server/improving-performance-with-sql-server-2016-native-compiled-in-memory-tables/)