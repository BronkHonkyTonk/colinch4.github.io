---
layout: post
title: "[javascript] 전역 변수와 지역 변수의 가비지 컬렉션 처리 방법"
description: " "
date: 2023-12-05
tags: [javascript]
comments: true
share: true
---

자바스크립트에서 변수는 전역 변수와 지역 변수로 나눌 수 있습니다. 전역 변수는 스크립트 전체에서 사용되며, 지역 변수는 특정 함수 내에서만 사용됩니다. 

변수를 사용할 때 주의해야 할 점은 메모리 관리입니다. 자바스크립트는 가비지 컬렉션 기능을 통해 더 이상 사용되지 않는 변수들을 자동으로 해제합니다. 하지만 전역 변수와 지역 변수는 가비지 컬렉션 처리 방법이 조금씩 다릅니다.

## 전역 변수의 가비지 컬렉션

전역 변수는 스크립트 전체에서 사용되기 때문에, 가비지 컬렉션 처리가 비교적 간단합니다. 전역 변수가 더 이상 참조되지 않는다면 가비지 컬렉션에 의해 자동으로 제거되어 메모리를 확보합니다.

다만, 전역 변수를 사용할 때 주의해야 할 점은 변수가 계속해서 사용되고 있다면 해당 변수가 가비지 컬렉션되지 않는다는 점입니다. 예를 들어, 전역 변수를 참조하는 다른 변수가 있거나, 전역 변수를 사용하는 함수가 아직 실행 중이라면 가비지 컬렉션되지 않습니다. 따라서 전역 변수의 사용을 최소화하고 필요한 경우에만 사용하는 것이 좋습니다.

## 지역 변수의 가비지 컬렉션

지역 변수의 가비지 컬렉션은 조금 더 복잡합니다. 지역 변수는 함수 내에서만 사용되기 때문에 함수가 호출되었을 때 생성되고, 함수가 종료되면 소멸합니다. 이 때문에 가비지 컬렉션 처리도 함수의 호출과 함께 이루어집니다.

하지만 주의할 점은 지역 변수가 함수 호출이 완료된 후에도 참조되는 경우가 있을 수 있다는 점입니다. 예를 들어, 클로저(Closure)를 사용하여 함수 외부에서 지역 변수를 참조하는 경우에는 해당 변수가 가비지 컬렉션되지 않습니다. 클로저가 참조하는 변수는 해당 함수가 메모리에서 해제되지 않는 한 계속 유지됩니다.

따라서, 지역 변수의 가비지 컬렉션을 위해서는 클로저 등에 의해 변수가 계속 참조되지 않는지 확인하고, 적절한 처리를 해주어야 합니다.

## 결론

전역 변수와 지역 변수 각각의 가비지 컬렉션 처리 방법을 이해하고 코드를 작성하는 것은 메모리 관리에 중요한 요소입니다. 전역 변수의 사용을 최소화하고 필요한 경우에만 사용하며, 지역 변수는 적절한 클로저 처리를 통해 메모리 누수를 방지하는 것이 좋습니다.

참고 자료:
- [MDN Web Docs - 가비지 컬렉션](https://developer.mozilla.org/ko/docs/Web/JavaScript/Memory_Management)
- [Understanding Scope and Memory in JavaScript](https://www.freecodecamp.org/news/understanding-scope-and-memory-in-javascript/)