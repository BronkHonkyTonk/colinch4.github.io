---
layout: post
title: "[sql] 테이블 잠금 상태에서의 삭제 방법"
description: " "
date: 2023-12-05
tags: [sql]
comments: true
share: true
---

## 소개
SQL 데이터베이스에서 테이블을 조작할 때, 때로는 다른 세션에서 해당 테이블에 잠금을 걸고 있는 경우가 있습니다. 이럴 경우에는 해당 테이블을 삭제하기 위해서는 몇 가지 조치가 필요합니다. 이 글에서는 테이블 잠금 상태에서의 삭제 방법을 알아보겠습니다.

## 테이블 상태 확인
먼저 테이블이 잠금 상태에 있는지 확인해야 합니다. 이를 위해서는 다음과 같이 `SHOW PROCESSLIST` 명령어를 사용할 수 있습니다.

```sql
SHOW PROCESSLIST;
```

위 명령어를 실행하면 현재 실행 중인 모든 세션의 목록이 출력됩니다. 여기서 잠금 상태인 세션을 찾아야 합니다.

## 잠금 해제 요청
테이블 잠금을 걸고 있는 세션을 찾았다면, 해당 세션에게 잠금을 해제하도록 요청해야 합니다. 잠금 해제 요청은 `KILL` 명령어를 사용해서 할 수 있습니다.

```sql
KILL [세션 ID];
```

위 명령어에서 `[세션 ID]`는 잠금을 해제하려는 세션의 ID입니다. 이를 사용하여 해당 세션을 종료시킬 수 있습니다. 

## 테이블 삭제
테이블이 더 이상 잠금 상태에 있지 않고, 필요한 세션도 모두 종료되었다면, 이제 테이블을 삭제할 수 있습니다. 테이블 삭제는 `DROP TABLE` 명령어를 사용하면 됩니다.

```sql
DROP TABLE [테이블 이름];
```

위 명령어에서 `[테이블 이름]`은 삭제하려는 테이블의 이름입니다. 이를 사용하여 해당 테이블을 삭제할 수 있습니다.

## 결론
테이블이 잠겨있는 상태에서의 삭제는 조심할 필요가 있습니다. 다른 세션들이 해당 테이블에 대한 작업을 수행 중인지 확인하고, 필요한 세션들을 종료시킨 후에 테이블을 삭제하는 것이 좋습니다. 잘못된 테이블 삭제는 데이터 손실을 유발할 수 있으므로 주의해야 합니다.

## 참고 자료
- [MySQL 공식 문서 - KILL 문서](https://dev.mysql.com/doc/refman/8.0/en/kill.html)
- [MySQL 공식 문서 - DROP TABLE 문서](https://dev.mysql.com/doc/refman/8.0/en/drop-table.html)