---
layout: post
title: "[javascript] 콜백 함수 사용과 성능 문제"
description: " "
date: 2023-12-05
tags: [javascript]
comments: true
share: true
---

콜백 함수는 자바스크립트에서 많은 곳에서 사용되는 중요한 개념입니다. 콜백 함수는 다른 함수에 인자로 전달되어 특정 작업이 끝나면 실행되는 함수입니다. 이를 통해 비동기적인 동작을 수행하거나 이벤트를 처리할 수 있습니다.

하지만 콜백 함수 사용은 성능 문제를 일으킬 수도 있습니다. 특히, 콜백 함수가 중첩되거나 반복적으로 호출되는 경우 읽기 어려운 코드를 작성하고 디버깅하기가 어렵습니다. 이로 인해 코드의 유지보수가 어려워질 수 있습니다.

## 콜백 지옥 (Callback Hell)

콜백 함수를 남용하면 코드가 복잡해지고 읽기 어려워질 수 있습니다. 콜백이 중첩될 때마다 코드 블록이 들여쓰기되어 가독성과 유지보수성을 저해할 수 있습니다. 이러한 상황을 "콜백 지옥"이라고 부르기도 합니다.

```javascript
asyncFunc1(function() {
  asyncFunc2(function() {
    asyncFunc3(function() {
      // ...
    });
  });
});
```

위 예시에서는 콜백이 중첩되어 콜백 함수가 증가하고 코드의 복잡성이 증가합니다. 

## 콜백 함수 대신 프로미스 사용하기

콜백 지옥을 피하기 위해 자바스크립트에서는 프로미스(Promise)라는 개념을 도입했습니다. 프로미스는 비동기 작업의 결과를 나중에 받을 수 있는 객체입니다. 프로미스를 사용하면 콜백 함수로 처리해야 하는 작업을 체인 형태로 표현할 수 있습니다.

```javascript
asyncFunc1()
  .then(asyncFunc2)
  .then(asyncFunc3)
  .catch(handleError);
```

프로미스를 사용하면 코드가 더 간결하고 읽기 쉬워집니다. 더불어 에러 핸들링도 쉽게 할 수 있습니다.

## 성능 문제와 콜백 함수

콜백 함수를 사용할 때 성능 문제가 발생할 수 있습니다. 콜백 함수는 비동기 동작을 수행하기 위해 이벤트 루프를 이용하는데, 이는 작업이 계속해서 이벤트 루프에 등록되어야 하기 때문에 일부 연산 비용이 발생합니다.

또한, 콜백 함수가 반복적으로 호출되면 이벤트 루프에 등록되는 작업이 많아져서 성능 저하의 원인이 될 수 있습니다.

## 결론

콜백 함수는 자바스크립트에서 빈번하게 사용되지만, 콜백 함수 사용으로 인해 발생할 수 있는 성능 문제와 읽기 어려운 코드 작성에 주의해야 합니다. 콜백 지옥을 피하기 위해 프로미스와 같은 대안을 고려해 보는 것도 좋은 방법입니다. 효율적인 비동기 코드 작성을 위해 콜백 함수를 사용할 때 성능과 유지보수성을 고려해야 합니다.

## 참고 자료

- [MDN web docs: Callback functions](https://developer.mozilla.org/en-US/docs/Glossary/Callback_function)
- [MDN web docs: Promise](https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/Promise)