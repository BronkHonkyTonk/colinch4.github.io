---
layout: post
title: "[sql] UNION 연산자를 활용한 데이터베이스 테이블 압축 방법"
description: " "
date: 2023-12-14
tags: [sql]
comments: true
share: true
---

데이터베이스에서 테이블의 용량을 최적화하기 위해 UNION 연산자를 활용하는 방법에 대해 알아보겠습니다.

## UNION 연산자 소개

**UNION** 연산자는 두 개의 쿼리 결과를 결합하는 데 사용됩니다. 결과 세트에 중복된 행이 포함되지 않으며, 중복된 행을 포함시키려면 **UNION ALL** 연산자를 사용할 수 있습니다.

## 테이블 압축을 위한 UNION 연산자 활용

데이터베이스에서 테이블이 크고 중복된 데이터가 많을 경우, 이를 압축하여 용량을 최적화할 수 있습니다. 이를 위해 다음과 같은 단계를 수행할 수 있습니다.

### 단계 1: 중복 데이터 식별

먼저 중복된 데이터를 식별합니다. 이를 위해 UNION 연산자를 사용하여 중복을 제거하고 유일한 결과를 얻을 수 있습니다.

```sql
SELECT * FROM 테이블1
UNION
SELECT * FROM 테이블2;
```

위 쿼리는 테이블1과 테이블2의 중복을 제거하고 유일한 결과를 반환합니다.

### 단계 2: 새로운 테이블로 결과 삽입

다음으로, 압축된 결과를 새로운 테이블에 삽입합니다.

```sql
INSERT INTO 새로운테이블
SELECT * FROM 테이블1
UNION
SELECT * FROM 테이블2;
```

### 단계 3: 기존 테이블 삭제 및 새로운 테이블 이름 변경

압축된 결과가 새로운 테이블에 삽입되었으므로, 원래의 테이블을 삭제하고 압축된 테이블의 이름을 변경합니다.

```sql
DROP TABLE 테이블1, 테이블2;
ALTER TABLE 새로운테이블 RENAME TO 테이블1;
```

## 마무리

UNION 연산자를 사용하여 데이터베이스 테이블을 압축하는 방법에 대해 알아보았습니다. 이를 통해 중복 데이터를 제거하고 용량을 최적화할 수 있습니다.