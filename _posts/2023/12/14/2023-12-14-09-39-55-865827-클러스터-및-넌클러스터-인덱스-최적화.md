---
layout: post
title: "[sql] 클러스터 및 넌클러스터 인덱스 최적화"
description: " "
date: 2023-12-14
tags: [sql]
comments: true
share: true
---

관계형 데이터베이스 시스템에서 인덱스는 데이터 검색 및 조회 성능을 향상시키는 중요한 요소입니다. **클러스터** 및 **넌클러스터** 인덱스는 데이터 검색 및 조작에 영향을 미치는 다른 방식으로 작동합니다. 이번 포스트에서는 이러한 인덱스들을 최적화하는 방법에 대해 알아보겠습니다.

## 클러스터드 인덱스

**클러스터드 인덱스**는 데이터베이스 테이블의 레코드들을 정렬된 상태로 저장하는 인덱스입니다. 즉, 클러스터드 인덱스의 키 순서로 데이터가 물리적으로 정렬됩니다. 이는 데이터베이스 테이블의 레코드를 검색할 때 효율적인 방식으로 동작하도록 도와줍니다. 클러스터드 인덱스를 사용하면 특정 키를 기반으로 레코드에 직접 액세스할 수 있어 검색 및 정렬 성능이 향상됩니다.

클러스터드 인덱스의 주요 용도로는 범위 기반의 쿼리나 정렬된 결과를 반환하는 쿼리가 있습니다. 하지만 클러스터드 인덱스를 생성하면 데이터베이스의 물리적인 구조가 변경되므로 많은 주의가 필요합니다.

## 넌클러스터드 인덱스

**넌클러스터드 인덱스**는 데이터베이스 테이블의 레코드들이 물리적으로 정렬되지 않는 인덱스입니다. 즉, 인덱스의 키 순서로 레코드가 물리적으로 정렬되지 않습니다. 대신에 인덱스 페이지는 실제 데이터 레코드의 위치를 참조하게 됩니다. 넌클러스터드 인덱스는 여러 개의 열을 기반으로 생성될 수 있고, 인덱스 키 순서로 레코드를 찾는 데는 추가적인 비용이 소요됩니다.

넌클러스터드 인덱스는 테이블에 대한 여러 검색 경로를 제공하며 하나의 테이블에 대해 여러 개의 넌클러스터드 인덱스를 생성할 수 있습니다.

## 클러스터드 및 넌클러스터드 인덱스 최적화

클러스터드 및 넌클러스터드 인덱스의 성능을 최적화하기 위해서는 몇 가지 고려해야 할 사항이 있습니다.

1. **쿼리 및 액세스 패턴 분석**: 어떤 종류의 쿼리가 자주 실행되는지, 어떻게 데이터에 액세스하는지 분석합니다.
2. **인덱스 키 선택**: 적절한 인덱스 키를 선택하여 쿼리의 성능을 최적화합니다.
3. **파티셔닝**: 대용량 테이블의 경우 파티셔닝을 고려하여 성능을 향상시킬 수 있습니다.
4. **통계 정보 유지**: 데이터베이스 통계를 주기적으로 업데이트하여 최적의 실행 계획을 구성합니다.

클러스터드 및 넌클러스터드 인덱스를 효율적으로 활용하여 데이터베이스 성능을 극대화하기 위해서는 데이터베이스 시스템과 문제 도메인에 대한 깊은 이해가 필요합니다.

이상으로 클러스터드 및 넌클러스터드 인덱스 최적화에 대해 알아보았습니다. 데이터베이스 시스템과 인덱스의 성능을 향상시키기 위해 적절한 인덱스를 선택하고 관리하는 것이 중요합니다.

참고: [SQL Server Index Design Guide](https://docs.microsoft.com/en-us/sql/relational-databases/indexes/index-design-guide?view=sql-server-ver15)