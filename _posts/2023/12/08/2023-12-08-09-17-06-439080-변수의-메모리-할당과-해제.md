---
layout: post
title: "[c++] 변수의 메모리 할당과 해제"
description: " "
date: 2023-12-08
tags: [c++]
comments: true
share: true
---

C++에서 변수를 정의할 때 메모리가 할당되고, 변수의 사용이 끝나면 메모리를 해제해야 합니다. 이 문서에서는 C++에서 변수의 메모리 할당과 해제에 대해 설명하겠습니다.

## 변수의 메모리 할당

C++에서 변수를 정의하면 해당 변수의 데이터가 저장될 메모리가 할당됩니다. 메모리를 할당하는 방법에는 두 가지가 있습니다. **스택(Stack)**과 **힙(Heap)**입니다.

### 스택 메모리 할당

스택 메모리는 변수가 선언될 때 할당되며, 변수의 범위(scope)가 끝나면 자동으로 해제됩니다. 스택 메모리 할당은 다음과 같이 이루어집니다.

```c++
void function() {
    int a; // 스택 메모리에 정수형 변수가 할당됨
    // ...
} // 함수 블록이 끝나면 변수 a의 메모리가 자동으로 해제됨
```

### 힙 메모리 할당

힙 메모리는 `new` 키워드를 사용하여 동적으로 할당됩니다. 힙으로 메모리를 할당하면 메모리를 해제할 때까지 유지됩니다.

```c++
void function() {
    int* a = new int; // 힙 메모리에 정수형 변수가 할당됨
    // ...
    delete a; // 힙 메모리를 해제
}
```

## 변수의 메모리 해제

메모리를 할당한 후에는 적절한 시점에 메모리를 해제해야 합니다. 스택 메모리는 변수의 범위가 끝나면 자동으로 해제되지만, 힙 메모리는 개발자가 직접 해제해야 합니다.

```c++
void function() {
    int* a = new int; // 힙 메모리에 정수형 변수가 할당됨
    // ...
    delete a; // 힙 메모리를 해제
}
```

힙 메모리를 해제할 때에는 `delete` 키워드를 사용해야 합니다. 또한, 이후에 해당 메모리를 접근하지 않도록 변수를 `nullptr`로 초기화하는 것이 좋습니다.

```c++
a = nullptr;
```

이와 같이 변수의 메모리 할당과 해제는 C++ 프로그래밍에서 매우 중요한 개념입니다. 올바르게 메모리를 할당하고 해제함으로써 메모리 누수와 같은 문제를 방지할 수 있습니다.

변수의 메모리 할당과 해제에 대해 이해한다면, 메모리 관리에 대해 더 깊이있는 지식을 얻을 수 있을 것입니다.