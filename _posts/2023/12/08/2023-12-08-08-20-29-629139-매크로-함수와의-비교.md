---
layout: post
title: "[c++] 매크로 함수와의 비교"
description: " "
date: 2023-12-08
tags: [c++]
comments: true
share: true
---

매크로 함수는 C++ 프로그래밍에서 널리 사용되며 간단한 기능을 수행할 때 유용합니다. 하지만 매크로 함수를 사용하는 것이 항상 바람직한 것은 아닙니다. 이 글에서는 매크로 함수와 일반 함수를 비교하여 장단점을 살펴보겠습니다.

## 매크로 함수

매크로 함수는 `#define` 지시자로 정의되며, 코드 내에서 해당 매크로가 사용된 모든 위치에 정의된 내용이 복사됩니다. 매크로 함수는 컴파일러에 의해 처리되기 때문에 타입 검사나 범위 확인이 이루어지지 않습니다.

```c++
#define SQUARE(x) x * x
```

위 코드에서 `SQUARE` 매크로는 입력값의 제곱을 반환합니다.

## 일반 함수

일반 함수는 함수 선언과 구현으로 이루어지며, 타입을 명시하고 범위를 지정하여 사용됩니다. 함수 호출은 실행 시점에 인수들의 값이 평가되고, 함수의 반환값이 예상대로 계산될 것을 보장받을 수 있습니다.

```c++
int square(int x) {
    return x * x;
}
```

## 비교

매크로 함수와 일반 함수를 비교하면, 일반 함수는 **타입 안정성**, **디버깅 용이성**, **가독성** 등에서 우위를 보입니다. 또한 일반 함수는 컴파일러에 의해 타입 검사가 이루어지므로 예상치 못한 버그를 방지할 수 있습니다. 하지만 매크로 함수는 **간단한 기능을 수행할 때 코드량을 줄이는 데** 유용합니다.

매크로 함수와 일반 함수를 선택할 때는 해당 기능의 복잡성, 확장성, 유지보수성 등을 고려해야 합니다. 또한, C++11부터는 매크로 함수보다 더 안전하고 강력한 대체재로써 `constexpr` 함수를 활용할 수 있습니다.

이상으로 매크로 함수와 일반 함수에 대한 비교를 살펴보았습니다. 각 상황에 맞게 적절하게 선택하여 코드를 작성하는 것이 중요합니다.

## 참고 자료
- C++ Primer Plus, 제6판. 스티브 프라타. (2012)
- [Why are macros evil in C++?](https://stackoverflow.com/questions/1402704/why-are-macros-evil-in-c)