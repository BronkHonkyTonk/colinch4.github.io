---
layout: post
title: "[c++] 구조체와 클래스의 가상 템플릿 함수"
description: " "
date: 2023-12-08
tags: [c++]
comments: true
share: true
---

C++에서 구조체와 클래스는 유사한 기능을 가지고 있지만, 몇 가지 중요한 차이점이 있습니다. 하나의 중요한 차이점은 템플릿 함수에 대한 가상 함수(virtual function)의 지원 여부입니다. 

이 문서에서는 C++에서 구조체와 클래스의 가상 템플릿 함수에 대해 알아보겠습니다.

## 구조체(struct)와 클래스(class)의 가상 함수
구조체와 클래스는 멤버 함수를 가질 수 있는데, 이 멤버 함수들 중 일부는 **가상 함수**로 선언될 수 있습니다. 가상 함수는 파생 클래스에서 재정의(override)될 수 있어 런타임 다형성을 구현하는 데 사용됩니다.

가상 함수로 선언된 함수들은 해당 클래스의 **가상 함수 테이블(virtual function table)** 에 등록되어 있어, 파생 클래스에서 적절한 함수로 재정의될 수 있습니다.

구조체와 클래스 중 어느 것이라도 가상 함수를 가질 수 있지만, 일반적으로 가상 함수를 사용하는 것은 클래스이며, 이는 클래스의 객체들이 더 높은 수준의 다형성을 지원하기 때문입니다.

## 가상 템플릿 함수
C++에서는 템플릿과 가상 함수를 조합하여 가상 템플릿 함수를 정의할 수 있습니다. 이는 다양한 타입들에 대해 다형성을 지원하는데 유용합니다. 

가상 템플릿 함수를 사용하려면 해당 함수를 가상으로 선언해야 합니다. 그러면 파생 클래스에서 해당 함수를 적절히 재정의할 수 있습니다.

```c++
template <typename T>
struct Base {
    virtual void func(T value) {
        // 기본 동작
    }
};

struct Derived : public Base<int> {
    void func(int value) override {
        // 특화된 동작
    }
};
```

위 예제에서 `Base` 구조체는 `func` 함수를 템플릿으로 정의하고 가상 함수로 선언했습니다. 그리고 `Derived` 구조체에서 `func` 함수를 `int` 타입에 대해 특화된 동작으로 재정의했습니다.

## 결론
구조체와 클래스는 가상 템플릿 함수를 가질 수 있으며, 이를 통해 다형성을 지원하는 프로그램을 작성할 수 있습니다. 가상 템플릿 함수를 사용함으로써 일반화된 동작을 유지하면서 특화된 동작을 지원할 수 있습니다.

C++에서는 이러한 기능들을 통해 객체지향 프로그래밍과 제네릭 프로그래밍을 함께 활용할 수 있기 때문에, 유연하고 강력한 프로그램을 작성할 수 있게 됩니다.