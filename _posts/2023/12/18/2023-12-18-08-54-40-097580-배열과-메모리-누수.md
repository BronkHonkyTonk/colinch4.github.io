---
layout: post
title: "[c] 배열과 메모리 누수"
description: " "
date: 2023-12-18
tags: [c]
comments: true
share: true
---

배열은 많은 프로그래밍 언어에서 중요한 자료 구조입니다. 그러나 배열을 잘못 다루면 메모리 누수가 발생할 수 있습니다. 메모리 누수는 프로그램이 사용하지 않는 메모리를 계속 보유하고 있는 상황을 의미합니다. 배열을 다룰 때 발생하는 메모리 누수를 방지하는 방법을 알아봅시다.

## 메모리 누수의 원인

배열을 잘못 다루면 메모리 누수가 발생할 수 있습니다. 예를 들어, 배열을 동적으로 할당한 후에 사용하지 않는데도 메모리를 해제하지 않는 경우 메모리 누수가 발생할 수 있습니다. 또한, 배열 인덱스를 벗어난 위치에 값을 쓰거나 읽는 경우에도 메모리 누수가 발생할 수 있습니다.

## 메모리 누수 방지 방법

메모리 누수를 방지하기 위해서는 배열을 다룰 때 몇 가지 주의할 점이 있습니다. 

### 1. 올바른 크기 할당

배열을 선언할 때 충분한 크기만큼 할당하는 것이 중요합니다. 배열의 크기를 넘어서 데이터를 입력하려는 경우에는 메모리 누수가 발생할 수 있습니다. 

```c
int arr[5]; // 5개의 정수를 담을 수 있는 배열을 선언
```

### 2. 메모리 해제

동적 할당한 배열을 사용한 후에는 메모리를 해제해야 합니다. 이를 위해 `free` 함수를 사용하여 동적으로 할당했던 메모리를 해제해야 합니다.

```c
int* arr = (int*)malloc(5 * sizeof(int)); // 5개의 정수를 담을 수 있는 배열을 동적으로 할당
// 배열을 사용한 후
free(arr); // 메모리 해제
```

### 3. 배열 경계 검사

배열을 다룰 때는 항상 배열의 경계를 검사하여 유효한 인덱스를 사용하는 것이 중요합니다. 배열 경계를 벗어나는 인덱스를 사용하는 것은 메모리 누수를 발생시킬 수 있습니다.

## 결론

배열을 다룰 때 메모리 누수를 방지하기 위해서는 올바른 크기를 할당하고, 동적으로 할당한 메모리는 해제하고, 배열의 경계를 벗어나지 않도록 주의해야 합니다. 이러한 점을 염두에 두면 메모리 누수를 방지할 수 있고 안정적인 프로그램을 작성할 수 있습니다.

## 참고 자료

- [GeeksforGeeks - Memory leak in C/C++ and how to avoid it](https://www.geeksforgeeks.org/memory-leak-in-c-cpp-and-how-to-avoid-it/)
- [IBM Developer - Understanding memory leaks in C/C++](https://developer.ibm.com/technologies/systems/articles/au-leak/)
- [Wikipedia - Memory leak](https://en.wikipedia.org/wiki/Memory_leak)