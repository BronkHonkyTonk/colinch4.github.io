---
layout: post
title: "[스프링] 캐시와 콘텐츠 전파"
description: " "
date: 2023-12-18
tags: [스프링]
comments: true
share: true
---

스프링 프레임워크는 캐시를 이용하여 애플리케이션의 성능을 향상시킬 수 있는데, 캐시 엔진을 이용하여 캐시된 데이터의 콘텐츠를 최신 상태로 유지하는 것이 중요합니다.

## 캐시란 무엇인가요?

캐시는 반복적으로 요청되는 데이터나 연산 결과를 저장하는 임시 저장소입니다. 이를 통해 다시 계산하거나 저장소에서 데이터를 읽어올 필요 없이 더 빠르게 데이터에 액세스할 수 있습니다.

## 스프링에서의 캐시 활용

스프링은 `@Cacheable`, `@CacheEvict`, `@CachePut` 등의 애노테이션을 제공하여 메소드의 반환값을 캐시에 저장하거나 캐시에서 제거하는 기능을 제공합니다. 이를 이용하여 간단한 설정으로 쉽게 캐시를 활용할 수 있습니다.

### `@Cacheable` 애노테이션

메소드의 반환값을 캐시에 저장합니다. 이후 동일한 파라미터로 해당 메소드가 호출될 때, 다시 메소드를 실행하지 않고 캐시된 값을 반환합니다.

```java
@Cacheable("books")
public Book findBookByIsbn(String isbn) {
    // ...
}
```

### `@CacheEvict` 애노테이션

특정 캐시나 모든 캐시에서 특정 조건에 맞는 값을 제거합니다.

```java
@CacheEvict(value = "books", allEntries=true)
public void refreshAllBooks() {
    // ...
}
```

### `@CachePut` 애노테이션

메소드의 반환 값을 강제적으로 캐시에 저장하거나 갱신합니다.

```java
@CachePut(value = "books", key = "#book.isbn")
public Book updateBook(Book book) {
    // ...
}
```

## 캐시 콘텐츠의 유효성 유지

캐시된 데이터가 항상 최신 상태를 유지해야 합니다. 데이터베이스나 다른 외부 시스템에서 데이터가 변경되었을 때, 캐시된 데이터가 이를 인식하여 자동으로 갱신되어야 합니다.

### 캐시 콘텐츠 전파

스프링에서는 `@Cacheable`, `@CachePut`, `@CacheEvict`의 `key` 속성을 이용하여 캐시 키를 동적으로 결정할 수 있습니다. 데이터가 변경될 때 캐시 키를 이용하여 캐시된 데이터를 자동으로 갱신할 수 있습니다.

## 결론

스프링의 캐시 기능을 이용하여 애플리케이션의 성능을 향상시키고 캐시된 데이터의 유효성을 유지할 수 있습니다. 적절한 캐시 전파 전략을 활용하여 캐시된 데이터를 항상 최신 상태로 유지하는 것이 중요합니다.

더 많은 정보는 [공식 문서](https://spring.io/guides/gs/caching/)를 참고하실 수 있습니다.