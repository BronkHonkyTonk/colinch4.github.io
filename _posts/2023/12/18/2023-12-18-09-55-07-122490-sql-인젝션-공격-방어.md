---
layout: post
title: "[sql] SQL 인젝션 공격 방어"
description: " "
date: 2023-12-18
tags: [sql]
comments: true
share: true
---

SQL 인젝션 공격은 공격자가 애플리케이션의 입력 양식에 악의적인 SQL 쿼리를 삽입하여 데이터베이스 시스템을 침투하려고 시도하는 보안 공격입니다. 이를 방어하기 위해 다양한 방법을 사용할 수 있습니다.

## 1. Prepare 문 사용

가장 효과적인 방법은 **Prepare 문**을 사용하는 것입니다. Prepare 문은 SQL 문을 나누어 실행하기 때문에 악성 SQL 쿼리가 주입되어도 실행되지 않습니다. 대부분의 프로그래밍 언어에는 이러한 방법을 사용할 수 있는 라이브러리가 제공됩니다.

```sql
PreparedStatement stmt = con.prepareStatement("SELECT * FROM users WHERE username = ?");
stmt.setString(1, inputUsername);
ResultSet rs = stmt.executeQuery();
```

## 2. 입력 유효성 검사

입력 데이터에 대한 유효성을 검사하여 비허용 문자나 문자열을 필터링하는 것이 중요합니다. 이를 통해 악성 입력에 대한 대응이 가능합니다. 또한, 입력 데이터를 인코딩하는 것도 도움이 될 수 있습니다.

## 3. 접근 권한 제한

데이터베이스에 접속하는 계정의 **권한을 최소화**하여 인젝션 공격의 영향을 최소화할 수 있습니다. 필요한 최소한의 권한만 부여하여 애플리케이션에서는 쓸모 없는 권한을 넘어서는 공격이 어렵게 만듭니다.

## 4. 보안 업데이트

매우 중요하지만 종종 간과되는 것은 **시스템 보안 업데이트**입니다. 데이터베이스 및 애플리케이션 소프트웨어의 최신 보안 패치를 설치하여 알려진 취약점을 보완해야 합니다.

## 5. 로그 기록

악성 SQL 쿼리에 대한 로그를 기록하여 이러한 시도를 추적하고 식별하는 것이 매우 중요합니다. 이를 통해 공격자를 식별하고 적절한 조치를 취할 수 있습니다.

SQL 인젝션은 심각한 보안 위협이므로, 모든 개발자가 이에 대한 인식을 갖고 필요한 조치를 취해야 합니다.