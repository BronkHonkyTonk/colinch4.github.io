---
layout: post
title: "[java] 자바 마이크로서비스에서 서비스 간 데이터 공유를 어떻게 구현하는가?"
description: " "
date: 2023-12-04
tags: [java]
comments: true
share: true
---

마이크로서비스 아키텍처를 사용하는 애플리케이션에서 여러 서비스 간에 데이터를 공유하는 것은 중요한 과제 중 하나입니다. 이를 위해 다양한 방법을 사용할 수 있지만, 이 문서에서는 대표적인 데이터 공유 방법인 동기식(RPC)과 비동기식(Messaging) 방식에 대해 설명하고자 합니다.

## 1. 동기식(RPC)

동기식 방식은 호출자(caller)가 서비스를 호출하고 결과를 기다리는 방식입니다. 이 방식에서 호출자는 다른 서비스로의 호출을 수행하고, 호출된 서비스는 결과를 반환하는 동안 호출자는 블로킹됩니다. 

일반적으로는 RESTful API를 사용하여 HTTP 프로토콜을 통해 동기식 호출을 구현할 수 있습니다. 호출자는 HTTP 요청을 보내고 호출된 서비스는 요청을 처리하고 결과를 HTTP 응답으로 반환합니다. 호출자는 따라서 호출된 서비스의 응답을 기다리는 동안 블로킹됩니다.

동기식 방식의 장점은 간단하고 직관적이며, 호출 결과를 즉시 사용할 수 있다는 점입니다. 하지만 호출시간이 길어질 경우 전체 시스템의 응답 시간이 영향을 받을 수 있으며, 서비스 간 의존성이 높아질 수 있습니다.

## 2. 비동기식(Messaging)

비동기식 방식은 호출자와 호출된 서비스 간에 메시지 큐를 사용하여 데이터를 전달하는 방식입니다. 이 방식에서 호출자는 메시지를 발행(publish)하고, 호출된 서비스는 해당 메시지를 구독(subscribe)하여 처리합니다. 

주로 메시징 시스템(예: RabbitMQ, Apache Kafka 등)을 사용하여 비동기식 데이터 공유를 구현할 수 있습니다. 호출자는 데이터를 메시지로 변환하여 메시지 큐에 보내고, 호출된 서비스는 메시지 큐에서 해당 메시지를 수신하여 처리합니다. 이 때, 호출자와 호출된 서비스는 실제로 동작하는 서비스 간의 의존성을 낮출 수 있습니다.

비동기식 방식의 장점은 시스템 확장성과 유연성이 높다는 점입니다. 호출된 서비스가 지연되거나 잠시 다운되더라도 메시지는 메시지 큐에 안전하게 저장되므로 데이터 유실의 위험이 없습니다. 또한, 호출자와 호출된 서비스는 비동기적으로 독립적으로 동작하므로 시스템이 효율적으로 확장될 수 있습니다.

## 결론

마이크로서비스 아키텍처에서 서비스 간 데이터 공유를 구현하는 방법은 다양합니다. 동기식(RPC) 방식은 간단하고 직관적이지만 응답시간이 길어질 경우 문제가 발생할 수 있습니다. 비동기식(Messaging) 방식은 시스템 확장성과 유연성을 제공하지만 복잡성을 증가시킬 수도 있습니다. 따라서 애플리케이션의 성능, 확장성, 일관성 등을 고려하여 적절한 데이터 공유 방식을 선택해야 합니다.

- 참고자료
  - [What is RPC?](https://www.redhat.com/en/topics/api/what-is-rpc)
  - [Synchronous vs Asynchronous Communication in Microservices](https://medium.com/@saswatsamal/synchronous-vs-asynchronous-communication-in-microservices-9be5a3ad0c8b)