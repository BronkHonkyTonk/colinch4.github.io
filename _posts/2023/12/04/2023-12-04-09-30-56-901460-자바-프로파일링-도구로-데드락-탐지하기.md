---
layout: post
title: "[java] 자바 프로파일링 도구로 데드락 탐지하기"
description: " "
date: 2023-12-04
tags: [java]
comments: true
share: true
---

자바 애플리케이션을 개발하다 보면 데드락(deadlock)이 발생할 수 있는 상황을 직면하게 될 때가 있습니다. 데드락은 두 개 이상의 스레드가 서로의 작업이 끝나기를 기다리며 무한히 대기하는 상태를 의미합니다. 이는 애플리케이션의 성능을 저하시키고 심각한 문제를 일으킬 수 있으므로, 데드락을 탐지하고 해결하는 것은 매우 중요한 일입니다.

행운이건 불행이건, 자바에는 데드락을 탐지할 수 있는 프로파일링 도구가 있습니다. 이 도구를 사용하면 애플리케이션에서 데드락이 발생하는 시점을 확인하고, 이를 해결하기 위한 조치를 취할 수 있습니다.

## VisualVM

여러 자바 프로파일링 도구 중 하나인 VisualVM은 데드락 탐지를 위해 유용하게 사용될 수 있습니다. VisualVM은 JDK에 기본으로 포함되어 있는 도구로, 시스템의 CPU, 메모리, 스레드 등 다양한 정보를 제공하는 기능을 제공합니다.

VisualVM을 실행하고, 데드락을 탐지하고자 하는 자바 애플리케이션의 프로세스를 선택합니다. 그런 다음 "Threads" 탭을 클릭하여 현재 실행 중인 스레드 목록을 확인합니다. 스레드 상태가 "WAITING" 또는 "BLOCKED"라면 데드락이 발생한 것으로 의심할 수 있습니다.

VisualVM은 스레드 덤프(Thread Dump)를 생성할 수 있는 기능도 제공합니다. 이를 사용하여 현재 실행 중인 자바 애플리케이션의 스레드 상태를 확인할 수 있습니다. 스레드 덤프를 분석하여 데드락이 발생한지 여부를 확인하고, 데드락의 원인을 추적할 수 있습니다.

## Eclipse MAT (Memory Analyzer Tool)

Eclipse MAT은 메모리 누수와 관련한 문제를 해결하는 것뿐만 아니라, 데드락 탐지에도 도움이 되는 강력한 도구입니다. 이 도구를 사용하면 자바 애플리케이션의 힙 덤프(Heap Dump) 정보를 분석하여 데드락의 원인을 찾을 수 있습니다.

Eclipse MAT을 실행하고, 자바 애플리케이션의 힙 덤프 파일을 엽니다. 그런 다음 "Threads" 섹션을 확인하여 데드락이 발생한 스레드를 찾을 수 있습니다. 데드락이 발생한 스레드의 상태 및 대기 상태에 있는 다른 스레드를 확인할 수 있습니다. 이를 통해 데드락의 원인을 파악하고 수정할 수 있습니다.

## 참고 자료

- VisualVM 공식 홈페이지: [https://visualvm.github.io/](https://visualvm.github.io/)
- Eclipse MAT 공식 홈페이지: [https://www.eclipse.org/mat/](https://www.eclipse.org/mat/)