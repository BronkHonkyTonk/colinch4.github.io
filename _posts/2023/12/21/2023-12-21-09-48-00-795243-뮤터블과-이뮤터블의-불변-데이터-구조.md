---
layout: post
title: "[c#] 뮤터블과 이뮤터블의 불변 데이터 구조"
description: " "
date: 2023-12-21
tags: [c#]
comments: true
share: true
---

데이터 구조는 프로그램에서 매우 중요한 부분이며, 데이터를 효율적으로 관리하고 조작하기 위해 불변성을 유지하는 것이 중요합니다. 여기서는 C#에서의 *뮤터블(mutable)*과 *이뮤터블(immutable)* 데이터 구조의 차이점과 불변 데이터 구조를 사용하는 이점에 대해 살펴보겠습니다.

## 뮤터블 vs 이뮤터블

### 뮤터블 데이터 구조
뮤터블 데이터 구조는 변경 가능한 데이터를 가지고 있습니다. 즉, 한 번 생성된 데이터를 변경할 수 있습니다. 예를 들어, C#의 List나 Dictionary는 뮤터블한 데이터 구조입니다. 

```csharp
List<int> mutableList = new List<int> { 1, 2, 3 };
mutableList[1] = 5; // 변경 가능
```

### 이뮤터블 데이터 구조
이뮤터블 데이터 구조는 변경 불가능한 데이터를 가지고 있습니다. 한 번 생성된 후에는 데이터를 변경할 수 없습니다. 예를 들어, C#의 string은 이뮤터블한 데이터 구조입니다.

```csharp
string immutableString = "immutable";
// immutableString[1] = 'm'; // 컴파일 오류 - 변경 불가능
```

## 불변 데이터 구조 사용 이점

### 스레드 안전성
불변 데이터 구조를 사용하면 스레드 안전성을 보장할 수 있습니다. 여러 스레드가 동시에 데이터를 수정하려는 경우, 불변 데이터 구조를 사용하면 데이터가 변경되지 않아 충돌이 발생하는 것을 막을 수 있습니다.

### 예측 가능한 동작
데이터가 변경되지 않는다는 보장이 있기 때문에 예상치 못한 부작용이 발생하지 않습니다. 따라서 코드를 이해하고 유지보수하기 쉬워집니다.

### 캐시 용이성
변경이 없는 데이터를 캐싱하는 경우, 불변 데이터 구조를 사용하면 변경 확인이 필요 없으므로 캐시 운영이 간편해집니다.

## 마무리
뮤터블과 이뮤터블 데이터 구조는 각각 사용하는 시나리오에 따라 장단점이 있습니다. 불변 데이터 구조를 사용하면 스레드 안전성과 예측 가능한 동작을 보장할 수 있으며, 캐싱 등의 작업에서도 용이하게 사용할 수 있습니다.

이뮤터블한 데이터 구조를 사용하여 더 안정적이고 예측 가능한 프로그램을 작성할 수 있도록 고려해보시기 바랍니다.

### 참고 문헌
- Microsoft Docs, "Immutable objects": https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/classes-and-structs/immutable-objects