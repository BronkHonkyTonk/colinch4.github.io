---
layout: post
title: "[c언어] 포인터와 메모리 누수"
description: " "
date: 2023-12-21
tags: [c언어]
comments: true
share: true
---

C언어에서 메모리 누수는 흔한 문제입니다. 메모리 누수란 프로그램이 메모리를 할당했지만 제때에 해제하지 않아 더 이상 필요하지 않은 메모리를 계속 보유하고 있는 상황을 의미합니다. 이는 프로그램이 실행되는 동안 메모리 사용량이 계속해서 증가하게 되어 결국 시스템 리소스가 고갈되거나 프로그램의 성능이 저하될 수 있습니다.

## 포인터의 활용

C언어에서 포인터는 메모리 주소를 저장하는 변수로, 동적 메모리 할당과 해제에 활용됩니다. 포인터를 사용하여 메모리를 동적으로 할당할 때, 할당된 메모리를 사용한 후에는 **반드시** 해당 메모리를 명시적으로 해제해 주어야 합니다. 

동적 메모리 할당을 위하여 `malloc` 또는 `calloc`과 같은 함수를 사용할 때, 해당 메모리 영역을 해제하기 위해서는 `free` 함수를 호출해 주어야 합니다. 메모리를 해제하지 않으면 해당 영역은 계속해서 점유한 채로 남아 있게 되며 이는 메모리 누수로 이어질 수 있습니다. 

```c
int* ptr = (int*)malloc(10 * sizeof(int)); // 메모리 할당
// ptr을 사용한 후에는 반드시 메모리를 해제하여야 함
free(ptr); // 메모리 해제
```

## 메모리 누수 방지를 위한 권장사항
- 동적으로 할당된 메모리를 사용한 후 즉시 `free` 함수를 사용하여 메모리를 해제한다.
- 복잡한 프로그램이라도, **메모리 해제를 잊지 않도록** 주의를 기울인다.
- 포인터를 `NULL`로 초기화하여 dangling pointer 문제를 방지한다.
- 메모리 누수를 감지하기 위해 메모리 관리 도구를 활용하거나, 정적 코드 분석 도구를 사용하여 메모리 누수를 사전에 방지한다.

메모리 누수는 예기치 않은 문제가 발생할 수 있는 심각한 버그이므로, 프로그래머들은 메모리 관리에 항상 주의를 기울이도록 해야 합니다.

## 참고 자료
- [GeeksforGeeks - Memory leak in C/C++ and How to avoid it](https://www.geeksforgeeks.org/memory-leak-in-c-cpp-and-how-to-avoid-it/)

C언어에서 메모리 누수 문제는 프로그램 안정성 및 성능에 영향을 미칠 수 있으므로 이에 대한 지식을 쌓아두는 것이 중요합니다.