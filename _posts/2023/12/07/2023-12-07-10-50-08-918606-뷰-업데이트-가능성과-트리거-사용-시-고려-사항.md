---
layout: post
title: "[sql] 뷰 업데이트 가능성과 트리거 사용 시 고려 사항"
description: " "
date: 2023-12-07
tags: [sql]
comments: true
share: true
---

## 목차
- [뷰 업데이트 가능성](#뷰-업데이트-가능성)
- [트리거 사용 시 고려 사항](#트리거-사용-시-고려-사항)

---

## 뷰 업데이트 가능성

SQL에서 뷰(View)는 하나 이상의 테이블로부터 레코드의 집합을 가져와 가상의 테이블을 생성하는 객체입니다. 뷰는 테이블로부터 파생된 데이터를 제공하는데 유용하며, 데이터베이스의 일관성과 보안을 지키는 도구로 사용됩니다.

뷰를 사용하면 여러 테이블에서 데이터를 효율적으로 조회할 수 있어 개발 및 관리 작업을 간소화할 수 있습니다. 하지만 뷰의 가상 테이블은 원본 테이블의 데이터를 직접 수정하는 것이 아닌 쿼리로 조작된 결과를 보여주는 것이기 때문에, 뷰의 업데이트 가능성에 대해 명확히 이해하여야 합니다.

일반적으로 다음과 같은 경우에는 뷰가 업데이트 가능합니다:

- 뷰의 FROM 절에 하나의 테이블만 포함된 경우
- 뷰의 SELECT 문에 DISTINCT나 GROUP BY 절이 없는 경우

반대로, 뷰가 다음과 같은 경우에는 업데이트가 불가능합니다:

- 뷰의 FROM 절에 여러 개의 테이블이 포함된 경우
- 뷰의 SELECT 문에 집계함수(예: SUM, COUNT 등)나 DISTINCT, GROUP BY 절이 있는 경우

---

## 트리거 사용 시 고려 사항

SQL에서 트리거(Trigger)는 데이터베이스의 특정 이벤트가 발생할 때 자동으로 실행되는 작업을 정의하는 객체입니다. 트리거는 INSERT, UPDATE, DELETE 등의 작업이 수행되는 동안 특정 로직을 실행할 수 있도록 해줍니다.

트리거를 사용할 때에는 다음과 같은 고려 사항을 염두에 두어야 합니다:

1. 성능 문제: 트리거는 데이터 변경 작업마다 실행되므로, 많은 트리거가 정의된 경우 성능에 영향을 줄 수 있습니다. 특히 대량의 데이터를 처리할 때는 트리거의 성능에 좀 더 신경을 써야 합니다.

2. 무한 루프: 트리거 내에서 동일한 테이블의 데이터를 수정하는 경우, 트리거가 계속해서 재귀적으로 실행될 수 있습니다. 이로 인해 무한 루프가 발생하거나 성능 이슈가 발생할 수 있으므로, 트리거 작성 시 주의가 필요합니다.

3. 트랜잭션 관리: 트리거 내에서 실행되는 작업은 트랜잭션 내에서 처리됩니다. 따라서 트리거 작업이 롤백되는 경우에도 트리거 작업이 롤백되는지 확인해야 합니다.

4. 데이터 일관성: 트리거는 데이터 변경 작업마다 실행되므로, 트리거 내에서 데이터의 일관성을 유지하는 로직을 잘 작성해야 합니다. 그렇지 않으면 데이터의 일관성에 문제가 발생할 수 있습니다.

---

위 내용은 뷰 업데이트 가능성과 트리거 사용 시 고려 사항에 대한 내용입니다. 뷰와 트리거는 SQL 개발에서 매우 유용한 도구이지만, 올바르게 이해하고 사용하여 데이터의 일관성과 안정성을 유지하는 것이 중요합니다.

[출처1](https://www.sqlshack.com/ko/views-updatability-after-sql-server-2014-edition/)
[출처2](https://www.sqlshack.com/ko/introduction-to-sql-server-triggers/)