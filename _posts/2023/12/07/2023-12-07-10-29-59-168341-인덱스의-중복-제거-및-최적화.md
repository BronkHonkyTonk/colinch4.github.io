---
layout: post
title: "[sql] 인덱스의 중복 제거 및 최적화"
description: " "
date: 2023-12-07
tags: [sql]
comments: true
share: true
---

인덱스는 데이터베이스 테이블에서 데이터의 검색 속도를 향상시키는 데 중요한 역할을 합니다. 하지만 잘못된 인덱스 구성은 오히려 성능 저하를 일으킬 수 있으므로 중복된 인덱스를 제거하고 최적화하는 작업이 필요합니다.

### 1. 중복된 인덱스 확인하기

데이터베이스 시스템은 인덱스의 중복을 감지하고 경고를 표시하는 기능을 제공합니다. 이를 이용하여 중복된 인덱스를 확인할 수 있습니다. 예를 들어 MySQL에서는 다음과 같은 쿼리를 사용할 수 있습니다.

```sql
SHOW INDEX FROM 테이블명;
```

이 쿼리를 실행하면 해당 테이블의 인덱스 정보를 확인할 수 있는데, 이 중에서 `Key_name`이나 `Index_name` 열의 값이 동일한 경우 중복된 인덱스가 있는 것입니다.

### 2. 중복된 인덱스 제거하기

중복된 인덱스를 제거하기 위해서는 해당 인덱스를 삭제하는 작업이 필요합니다. 다만, 인덱스를 삭제하기 전에 해당 인덱스가 실제로 중복된 데이터를 제거하는 데 도움이 되는지 확인하는 것이 좋습니다.

인덱스를 삭제하기 위해서는 `DROP INDEX` 문을 사용합니다. 예를 들어 MySQL에서는 다음과 같이 사용할 수 있습니다.

```sql
ALTER TABLE 테이블명 DROP INDEX 인덱스명;
```

### 3. 인덱스 최적화하기

인덱스는 테이블의 크기가 커질수록 성능에 미치는 영향이 커집니다. 따라서 인덱스를 최적화하여 검색 성능을 향상시킬 수 있습니다.

인덱스를 최적화하기 위해서는 인덱스의 선택도 및 카디널리티를 고려해야 합니다. 선택도는 특정 컬럼의 값의 분포도를 나타내며, 카디널리티는 해당 컬럼의 고유한 값의 개수를 나타냅니다. 선택도가 낮고, 카디널리티가 높은 컬럼에 인덱스를 생성하는 것이 좋은 성능을 가져올 수 있습니다.

### 4. 집계 함수를 사용하는 쿼리의 인덱스

집계 함수를 사용하는 쿼리는 인덱스를 적용하기 어렵습니다. 대부분의 데이터베이스 시스템은 집계 함수를 사용하는 쿼리에서 인덱스를 사용하지 않거나, 일부만 사용하는 경우가 대부분입니다. 따라서 집계 함수를 사용하는 쿼리는 인덱스 최적화를 위한 다른 방법을 고려해야 합니다.

인덱스의 중복 제거 및 최적화는 데이터베이스 성능을 향상시키는 중요한 작업입니다. 주기적으로 인덱스를 확인하고 필요한 경우에는 중복된 인덱스를 제거하고 인덱스를 최적화하는 것이 좋습니다.

**참고 자료:**
- [MySQL 공식 문서](https://dev.mysql.com/doc/refman/8.0/en/drop-index.html)
- [SQL Server 공식 문서](https://docs.microsoft.com/en-us/sql/t-sql/statements/drop-index-transact-sql?view=sql-server-ver15)