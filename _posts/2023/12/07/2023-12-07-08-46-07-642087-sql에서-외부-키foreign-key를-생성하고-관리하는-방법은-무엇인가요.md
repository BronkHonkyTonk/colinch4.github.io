---
layout: post
title: "[sql] SQL에서 외부 키(Foreign Key)를 생성하고 관리하는 방법은 무엇인가요?"
description: " "
date: 2023-12-07
tags: [sql]
comments: true
share: true
---

외부 키(Foreign Key)는 SQL 데이터베이스에서 두 테이블 간의 관계를 정의하는 데 사용됩니다. 이를 통해 한 테이블의 열이 다른 테이블의 기본 키(primary key)에 참조될 수 있습니다. 이러한 외부 키 관련 작업은 다음과 같은 단계로 수행됩니다.

## 1. 외부 키 열 생성

첫 번째로, 외부 키를 사용하기 위한 테이블에 열을 생성해야 합니다. 이 열은 다른 테이블의 기본 키와 연결되는데, 항상 같은 데이터 형식을 갖습니다. 외부 키가 될 열은 테이블 정의 문에서 다음과 같이 생성할 수 있습니다.

```sql
CREATE TABLE 테이블명 (
    외부키열이름 데이터형식,
    CONSTRAINT 외부키제약이름 FOREIGN KEY (외부키열이름) REFERENCES 참조테이블명 (기본키열이름)
);
```

## 2. 참조 테이블 생성

두 번째로, 외부 키가 참조할 테이블을 생성해야 합니다. 이 테이블은 기본 키 열을 가지고 있어야 하며, 외부 키가 참조할 열로 사용됩니다. 참조 테이블은 다음과 같이 생성할 수 있습니다.

```sql
CREATE TABLE 참조테이블명 (
    기본키열이름 데이터형식,
    ...
    PRIMARY KEY (기본키열이름)
);
```

## 3. 외부 키 제약 조건 추가

세 번째로, 외부 키 제약 조건을 추가해야 합니다. 이를 통해 외부 키가 참조 테이블의 존재하는 기본 키와 일치하는지 확인할 수 있습니다. 외부 키 제약 조건은 다음과 같이 추가할 수 있습니다.

```sql
ALTER TABLE 테이블명
ADD CONSTRAINT 외부키제약이름 FOREIGN KEY (외부키열이름) REFERENCES 참조테이블명 (기본키열이름);
```

## 4. 외부 키 관리

외부 키가 생성되고 제약 조건이 추가되면, 데이터를 관리하는 과정에서 외부 키를 사용할 수 있습니다. 외부 키로 값이 추가되거나 수정되는 경우, 기본 키에 대한 참조가 있는지 확인하고 동기화해야 합니다. 만약 외부 키가 참조하는 행을 삭제하려는 경우에는 동작을 제한하는 제약 조건을 설정할 수도 있습니다.

SQL에서 외부 키를 생성하고 관리하는 방법에 대해서 알아보았습니다. 실제 사용하는 데이터베이스 관리 시스템에 따라 조금씩 차이가 있을 수 있으므로, 해당 데이터베이스 관리 시스템의 문서나 가이드를 참고하는 것이 좋습니다.