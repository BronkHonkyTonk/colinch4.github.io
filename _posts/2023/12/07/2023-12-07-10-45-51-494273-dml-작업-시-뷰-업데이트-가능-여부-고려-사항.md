---
layout: post
title: "[sql] DML 작업 시 뷰 업데이트 가능 여부 고려 사항"
description: " "
date: 2023-12-07
tags: [sql]
comments: true
share: true
---

DML(Data Manipulation Language) 작업 중에는 뷰(View)의 업데이트 가능 여부를 고려해야 합니다. 뷰는 가상의 테이블로 실제 데이터를 가지고 있지 않으며, 기존 테이블의 데이터를 참조하여 동적으로 조회 결과를 반환하는 개체입니다. 따라서 뷰를 업데이트할 때 몇 가지 제약 사항을 고려해야 합니다.

## 1. 뷰의 업데이트 가능 여부 확인

먼저, 뷰의 업데이트 가능 여부를 확인해야 합니다. 일반적으로 뷰는 다음과 같은 조건을 만족해야 업데이트가 가능합니다.

- 단일 기본 테이블에 기반한 뷰인 경우
- 기본 테이블의 기본 키를 포함하거나, 기본 키의 일부를 포함하는 경우
- 뷰에서 사용하는 모든 컬럼에 대해 NOT NULL 제약 조건이 지정된 경우
- 복잡한 조건이 없이 단순한 계산을 수행하는 경우

위 조건을 만족하지 않으면 뷰를 업데이트할 때 오류가 발생할 수 있습니다.

## 2. 뷰의 업데이트 시 제약 사항 고려

뷰가 업데이트 가능한 경우에도 몇 가지 제약 사항을 고려해야 합니다.

- 뷰의 업데이트는 기본 테이블에 영향을 줄 수 있으므로, 이를 고려하여 업데이트 작업을 수행해야 합니다.
- 뷰의 업데이트는 기본 테이블의 제약 조건을 준수해야 합니다. 업데이트 작업이 제약 조건을 위반한다면 오류가 발생할 수 있습니다.
- 뷰에서 사용된 함수나 연산식의 결과는 예상대로 반환되는지 확인해야 합니다. 예를 들어, 뷰에서 사용된 함수가 업데이트 작업에 영향을 주는지 확인해야 합니다.

## 3. 뷰의 업데이트 시 성능 고려

뷰의 업데이트 작업은 성능에도 영향을 줄 수 있습니다. 따라서 다음과 같은 사항을 고려하여 업데이트 작업을 수행해야 합니다.

- 뷰가 사용하는 기본 테이블의 크기가 크거나 인덱스가 적절히 구성되어 있는지 확인합니다. 큰 테이블에 대한 업데이트 작업은 성능 저하를 초래할 수 있습니다.
- 어떤 열을 업데이트할 것인지, 어떤 조건을 사용할 것인지 고려하여 업데이트 작업을 최적화해야 합니다.
- 뷰와 관련된 쿼리의 성능을 확인하여 뷰의 업데이트 작업이 쿼리 성능에 영향을 주는지 확인해야 합니다.

## 4. 뷰 업데이트 시 데이터 일관성 유지

마지막으로, 뷰의 업데이트 작업은 데이터 일관성을 유지해야 합니다. 하나의 업데이트 작업이 다른 업데이트 작업에 영향을 주는 경우, 이를 고려하여 트랜잭션을 관리해야 합니다. 이를 위해 트랜잭션의 격리 수준을 설정하고, 락(잠금)을 사용하여 충돌을 방지해야 합니다.

위의 사항을 고려하여 DML 작업 시 뷰의 업데이트 가능 여부를 결정하고, 작업을 수행하면 원활한 데이터 처리와 성능 개선을 기대할 수 있습니다.

> 참고 문서:
> - [SQL 뷰(View)](https://www.w3schools.com/sql/sql_view.asp)
> - [SQL DML](https://www.w3schools.com/sql/sql_insert.asp)