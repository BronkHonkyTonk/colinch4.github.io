---
layout: post
title: "[kotlin] 코틀린 웹 서버를 도커 컨테이너로 배포하는 방법"
description: " "
date: 2023-12-07
tags: [kotlin]
comments: true
share: true
---

이 글에서는 Kotlin 언어로 작성된 웹 서버를 도커 컨테이너로 배포하는 방법을 알아보겠습니다.

## 도커 컨테이너 설정

먼저, 도커 컨테이너를 사용하기 위해 Docker를 설치해야 합니다. Docker를 설치하는 방법은 [Docker 공식 문서](https://docs.docker.com/get-docker/)를 참고하세요.

도커가 설치되었다면, 프로젝트의 루트 디렉토리에 Dockerfile을 생성합니다. Dockerfile은 도커 이미지를 빌드하기 위한 설정 파일입니다.

```docker
FROM openjdk:11-jre-slim

WORKDIR /app

COPY build/libs/*.jar app.jar

CMD ["java", "-jar", "app.jar"]
```

위의 Dockerfile은 OpenJDK 11을 기반으로 하는 도커 이미지를 생성하고, 프로젝트의 빌드 결과물을 복사한 뒤, 애플리케이션을 실행하는 명령어를 정의합니다. 빌드 결과물의 경로와 애플리케이션 실행 명령어는 프로젝트에 따라 다를 수 있으니, 필요에 따라 수정하세요.

## 도커 이미지 빌드 및 배포

도커가 설치되고 Dockerfile이 준비되었다면, 다음 명령어를 사용하여 도커 이미지를 빌드합니다.

```bash
docker build -t myapp .
```

위의 명령어는 현재 디렉토리를 기반으로 도커 이미지를 빌드하며, `myapp`이라는 이미지 이름을 사용합니다. 필요에 따라 이미지 이름을 변경할 수 있습니다.

이제 도커 이미지를 배포할 준비가 되었습니다. 배포하기 전에, 도커 레지스트리에 로그인해야 합니다. 로그인은 `docker login` 명령어를 사용하여 수행할 수 있습니다.

```bash
docker login
```

로그인이 완료되었다면, 다음 명령어를 사용하여 도커 이미지를 레지스트리에 푸시합니다.

```bash
docker push myapp
```

위의 명령어는 `myapp`이라는 이미지를 레지스트리에 푸시합니다. 필요에 따라 이미지 이름을 변경할 수 있습니다.

## 배포된 웹 서버 실행

이제 도커 이미지가 레지스트리에 올라갔으므로, 어떤 환경에서든 해당 이미지를 사용하여 웹 서버를 실행할 수 있습니다.

다음 명령어를 사용하여 도커 컨테이너를 실행합니다.

```bash
docker run -d -p 8080:8080 myapp
```

위의 명령어는 `myapp` 이미지를 기반으로 8080 포트로 웹 서버를 실행합니다. 필요에 따라 포트 번호를 변경할 수 있습니다.

웹 서버가 실행되었으면, 브라우저에서 `http://localhost:8080`을 방문하여 정상적으로 작동하는지 확인할 수 있습니다.

## 결론

Kotlin으로 작성된 웹 서버를 도커 컨테이너로 배포하는 방법을 알아보았습니다. 도커를 통해 모든 환경에서 일관된 배포 및 실행 환경을 유지할 수 있습니다.