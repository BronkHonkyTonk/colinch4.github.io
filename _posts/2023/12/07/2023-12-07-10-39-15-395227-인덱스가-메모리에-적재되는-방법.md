---
layout: post
title: "[sql] 인덱스가 메모리에 적재되는 방법"
description: " "
date: 2023-12-07
tags: [sql]
comments: true
share: true
---

SQL에서 인덱스는 테이블의 성능을 향상시키는 데 아주 중요한 역할을 합니다. 인덱스는 특정 열 또는 열들의 조합에 대한 검색을 빠르게 수행할 수 있도록 도와줍니다.

인덱스는 일반적으로 디스크에 저장되지만 일부 데이터베이스 시스템은 메모리에 인덱스를 적재하여 성능을 향상시킵니다. 메모리에 인덱스를 적재하는 방법은 데이터베이스 시스템마다 다를 수 있지만, 주로 사용되는 방법은 다음과 같습니다.

### 1. 인덱스 캐싱

일부 데이터베이스 시스템은 메모리에 인덱스를 캐싱하는 기능을 제공합니다. 이는 인덱스를 빠르게 접근할 수 있도록 메모리에 유지하는 것을 의미합니다. 인덱스의 크기에 따라 모두 메모리에 적재되지는 않을 수 있으며, 가장 많이 사용되는 인덱스일수록 메모리에 더 자주 캐싱됩니다.

인덱스 캐싱은 데이터베이스 시스템의 설정을 통해 제어할 수 있으며, 메모리 용량에 따라 적절한 크기로 설정해야 합니다. 너무 작은 메모리로 인덱스를 캐싱하면 성능 향상 효과를 기대하기 어렵고, 너무 큰 메모리를 할당하면 다른 중요한 작업을 위해 메모리를 사용할 수 없게 될 수 있습니다.

### 2. 인메모리 테이블

일부 데이터베이스 시스템은 인덱스를 포함한 테이블 자체를 메모리에 저장하는 인메모리 테이블을 제공합니다. 이는 디스크 I/O를 피하고 메모리에서 모든 작업을 처리하여 매우 빠른 성능을 제공합니다. 인메모리 테이블을 사용하면 따로 인덱스를 메모리에 적재하는 작업이 필요하지 않습니다.

인메모리 테이블은 일반적으로 작은 크기의 데이터 또는 자주 업데이트되는 작업에 적합하며, 작업이 종료되면 데이터가 사라지는 휘발성 성격을 가집니다. 그러므로 영구적으로 데이터를 저장할 필요가 있는 경우에는 디스크에 데이터를 백업해야 합니다.

### 3. 클러스터형 인덱스

클러스터형 인덱스는 데이터베이스 시스템에 따라 다를 수 있지만, 인덱싱된 열의 데이터를 특정 순서로 저장하는 방식을 사용합니다. 이는 메모리에 인덱스를 적재하는 것은 아니지만, 데이터를 쿼리할 때 메모리에서 연속적으로 읽어오기 때문에 성능 향상을 가져올 수 있습니다.

클러스터형 인덱스는 테이블의 물리적인 저장 방식을 변경하는 작업이므로 주의가 필요합니다. 특히 대규모 데이터베이스의 경우 데이터를 재정렬하는 시간이 상당히 오래 걸릴 수 있으며, 업데이트 및 삽입 작업에 영향을 줄 수 있습니다.

---

인덱스가 메모리에 적재되는 방법에 대해 알아보았습니다. 각 데이터베이스 시스템은 다양한 방식을 제공할 수 있으므로, 사용하는 데이터베이스 시스템의 공식 문서를 참조하여 상세한 정보를 확인해야 합니다.

참고 자료:
- MySQL: [InnoDB Buffer Pool](https://dev.mysql.com/doc/refman/8.0/en/innodb-buffer-pool.html)
- PostgreSQL: [The Shared Buffer](https://www.postgresql.org/docs/current/runtime-config-resource.html#RUNTIME-CONFIG-RESOURCE-INTRO)
- Oracle: [Database Buffer Cache](https://docs.oracle.com/en/database/oracle/oracle-database/19/refrn/Database-Buffer-Cache.html)