---
layout: post
title: "[javascript] 프로미스를 사용한 데이터베이스 작업"
description: " "
date: 2023-12-07
tags: [javascript]
comments: true
share: true
---

JavaScript에서 비동기 작업을 처리할 때 가장 많이 사용되는 방법 중 하나는 **프로미스(Promise)** 입니다. 프로미스는 비동기 작업을 좀 더 효과적으로 다룰 수 있도록 도와주는 객체입니다. 이번 블로그 포스트에서는 프로미스를 사용하여 데이터베이스 작업을 수행하는 방법에 대해 알아보겠습니다.

## 프로미스란?

프로미스는 비동기 작업의 **결과**를 나타내는 객체입니다. 프로미스는 세 가지 상태를 갖습니다.

- 대기(pending): 비동기 작업이 진행 중인 상태입니다.
- 이행(fulfilled): 비동기 작업이 성공적으로 완료된 상태입니다.
- 거부(rejected): 비동기 작업이 실패한 상태입니다.

프로미스 객체는 `then` 메소드를 통해 성공적인 완료 결과를 처리하고, `catch` 메소드를 통해 작업 실패를 처리할 수 있습니다.

## 프로미스를 사용한 데이터베이스 작업

프로미스를 사용하여 데이터베이스 작업을 수행하려면, 먼저 Promise 객체를 생성해야 합니다. 데이터베이스 작업은 주로 비동기적으로 처리되므로, `resolve`와 `reject`를 매개변수로 갖는 `new Promise` 생성자를 사용하여 프로미스 객체를 생성합니다.

```javascript
new Promise((resolve, reject) => {
  // 비동기 작업 수행
  // 작업이 완료되면 resolve를 호출하여 성공 결과를 반환
  // 작업이 실패하면 reject를 호출하여 실패 결과를 반환
});
```

이제 데이터베이스 작업을 수행할 때, 작업이 성공적으로 완료되면 `resolve`를 호출하여 결과를 반환하고, 작업이 실패하면 `reject`를 호출하여 실패 결과를 반환하면 됩니다.

```javascript
const getUserById = (id) => {
  return new Promise((resolve, reject) => {
    // 데이터베이스에서 id를 이용하여 사용자 정보 조회
    // 사용자 정보를 성공적으로 조회한 경우 resolve 호출
    // 사용자 정보 조회 실패한 경우 reject 호출
  });
};
```

위의 예제에서는 `getUserById` 함수를 정의하여 데이터베이스에서 사용자 정보를 조회하는 작업을 프로미스로 래핑했습니다. 데이터베이스 작업의 성공 결과는 `resolve`를 호출하여 반환하고, 작업 실패 결과는 `reject`를 호출하여 반환합니다.

프로미스를 사용하여 비동기 데이터베이스 작업을 처리하면, 작업의 성공 여부를 간편하게 처리할 수 있습니다. `then` 메소드를 사용하여 작업 성공 결과를 처리하고, `catch` 메소드를 사용하여 작업 실패 결과를 처리할 수 있습니다.

```javascript
getUserById(1)
  .then((user) => {
    console.log("사용자 정보:", user);
  })
  .catch((error) => {
    console.error("사용자 정보를 가져오는데 실패했습니다:", error);
  });
```

위의 예제에서는 `getUserById` 함수를 호출하여 사용자 정보를 비동기적으로 조회한 후, 작업이 성공하면 `then` 메소드로 결과를 처리하고, 작업이 실패하면 `catch` 메소드로 실패 결과를 처리합니다.

## 마무리

프로미스를 사용하면 비동기 작업을 보다 효과적으로 다룰 수 있습니다. 이번 블로그 포스트에서는 프로미스를 사용하여 데이터베이스 작업을 수행하는 방법에 대해 알아보았습니다. JavaScript에서 데이터베이스 작업을 수행할 때는 프로미스를 활용하여 비동기 작업을 간편하게 처리할 수 있습니다.