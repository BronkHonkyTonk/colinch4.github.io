---
layout: post
title: "[sql] 뷰 업데이트 가능성 설정에 따른 데이터 압축 전략"
description: " "
date: 2023-12-07
tags: [sql]
comments: true
share: true
---

데이터 압축은 데이터베이스 시스템에서 저장 공간을 절약하고 성능을 향상시키는 중요한 기술입니다. SQL에서는 뷰(View)를 통해 데이터를 가상으로 조작하거나 변환할 수 있습니다. 그러나 뷰의 업데이트 가능성 설정에 따라 데이터 압축 전략이 달라질 수 있습니다. 

## 1. 업데이트 가능한 뷰

업데이트 가능한 뷰는 원본 테이블의 데이터를 수정할 수 있습니다. 이러한 뷰의 경우 데이터 압축을 적용할 때 주의해야 합니다. 업데이트 가능한 뷰에 적용된 데이터 압축은 실제 테이블에 저장된 데이터를 직접 수정하는 것이 아니라 뷰에 적용된 압축 알고리즘을 통해 데이터를 압축하고 반환하기 때문에 원본 데이터가 올바르게 수정되지 않을 수 있습니다. 따라서 업데이트 가능한 뷰의 경우 데이터 압축을 사용하지 않는 것이 좋습니다.

## 2. 읽기 전용 뷰

읽기 전용 뷰는 원본 테이블의 데이터를 조회할 수는 있지만 수정할 수는 없습니다. 이러한 뷰의 경우 데이터 압축을 적용해도 문제가 없습니다. 데이터는 뷰에 의해 읽혀지기 때문에 압축된 데이터가 필요한 경우 해당 압축 알고리즘을 통해 데이터를 해제하고 반환할 수 있습니다.

## 3. 압축 가능 여부 확인

뷰의 업데이트 가능성 설정에 따라 데이터 압축을 적용할 수 있는지 여부를 확인하는 방법은 다음과 같습니다.

```sql
SELECT is_updatable
FROM information_schema.views
WHERE table_schema = 'your_schema'
  AND table_name = 'your_view';
```

위의 쿼리를 실행하면 해당 뷰의 업데이트 가능 여부를 확인할 수 있습니다. 반환 값이 'YES'이면 업데이트 가능한 뷰이고, 'NO'이면 읽기 전용 뷰입니다.

## 요약

- 업데이트 가능한 뷰의 경우 데이터 압축을 적용하면 원본 데이터가 수정되지 않을 수 있으므로 데이터 압축을 사용하지 않는 것이 좋습니다.
- 읽기 전용 뷰의 경우 데이터 압축을 적용해도 문제가 없으며, 필요한 경우 해당 압축 알고리즘을 통해 데이터를 해제하고 반환할 수 있습니다.
- 뷰의 업데이트 가능성 설정에 따라 데이터 압축을 적용할 수 있는지 확인할 수 있습니다.

참고 자료:
- [PostgreSQL Documentation - Views](https://www.postgresql.org/docs/14/sql-createview.html)
- [MySQL Documentation - Views](https://dev.mysql.com/doc/refman/8.0/en/create-view.html)