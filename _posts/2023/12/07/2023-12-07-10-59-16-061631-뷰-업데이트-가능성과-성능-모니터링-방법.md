---
layout: post
title: "[sql] 뷰 업데이트 가능성과 성능 모니터링 방법"
description: " "
date: 2023-12-07
tags: [sql]
comments: true
share: true
---

뷰(view)는 데이터베이스에서 테이블을 가상화한 객체로, 특정 조건에 따라 필요한 테이블의 컬럼만을 선택하여 조회할 수 있습니다. 이렇게 생성된 뷰는 사용자가 편리하게 데이터를 조회하거나 특정 작업을 수행할 수 있도록 도와줍니다. 그러나 뷰가 업데이트 가능한 경우와 그에 따른 성능 모니터링은 고려해야 할 중요한 사항입니다.

## 1. 뷰 업데이트 가능성

뷰의 업데이트 가능성은 뷰를 생성할 때 사용한 쿼리문의 복잡성에 따라 결정됩니다. 다음과 같은 경우에는 뷰를 업데이트할 수 있습니다.

- 뷰를 생성할 때 사용한 쿼리문이 테이블의 컬럼을 직접 수정하는 경우
- 뷰를 생성할 때 사용한 쿼리문에 조인, 그룹화, 집계 등의 연산이 포함되어 있는 경우
- 뷰를 생성할 때 사용한 쿼리문에 하위 쿼리가 포함되어 있는 경우

반대로 다음과 같은 경우에는 뷰를 업데이트할 수 없습니다.

- 뷰를 생성할 때 사용한 쿼리문에 DISTINCT, UNION, TOP 등의 연산이 포함되어 있는 경우
- 뷰를 생성할 때 사용한 쿼리문에 GROUP BY 절이 없지만 SELECT 절에서 집계 연산을 하는 경우
- 뷰를 생성할 때 사용한 쿼리문에 ORDER BY 절이 포함되어 있는 경우

이러한 업데이트 가능성의 유무는 뷰를 사용할 때 업데이트 작업에 대한 제약을 알 수 있으며, 쿼리의 복잡성을 고려하여 뷰를 사용하는 것이 중요합니다.

## 2. 뷰 성능 모니터링

뷰의 성능 모니터링은 뷰를 사용하는 쿼리의 실행 계획을 확인하고, 튜닝 작업을 수행하여 성능을 개선하는 것을 의미합니다. 뷰의 성능은 아래의 방법들로 모니터링할 수 있습니다.

- **실행 계획 확인하기**: 뷰를 사용하는 쿼리의 실행 계획을 확인하여 어떤 인덱스가 사용되고 있는지, 어떤 연산이 수행되고 있는지 확인할 수 있습니다. 쿼리 실행 계획을 통해 성능에 영향을 주는 부분을 파악하고 최적화 작업을 수행할 수 있습니다.

- **성능 튜닝 작업**: 뷰를 사용하는 쿼리의 성능을 개선하기 위해 다양한 튜닝 작업을 수행할 수 있습니다. 예를 들어, 인덱스를 추가하거나 수정하여 조회 성능을 개선하거나, 조인 연산을 최적화하여 실행 시간을 줄일 수 있습니다.

- **쿼리 실행 시간 모니터링**: 뷰를 사용하는 쿼리의 실행 시간을 모니터링하여 성능 문제를 식별할 수 있습니다. 쿼리 실행 시간이 오래 걸리는 경우, 쿼리의 복잡성을 감소시키는 등의 작업을 통해 성능을 개선할 수 있습니다.

- **통계 정보 업데이트**: 뷰를 사용하는 쿼리의 통계 정보를 업데이트하여 최신의 정보를 유지할 수 있습니다. 통계 정보는 쿼리의 실행 계획을 결정하는데 중요한 역할을 하므로, 정기적으로 업데이트 작업을 수행하는 것이 좋습니다.

뷰의 업데이트 가능성과 성능 모니터링은 데이터베이스 시스템을 효율적으로 활용하기 위해 반드시 고려해야 하는 사항입니다. 제약사항을 파악하고 성능을 최적화하는 작업을 통해 데이터베이스 시스템의 안정성과 성능을 유지할 수 있습니다.

---

**참고 자료**
- [MySQL :: MySQL 8.0 Reference Manual :: 21.3 The View Update Algorithm](https://dev.mysql.com/doc/refman/8.0/en/view-updatability.html)
- [Microsoft Docs - Updating Data Through a View](https://docs.microsoft.com/en-us/sql/relational-databases/views/update-data-through-a-view?view=sql-server-ver15)