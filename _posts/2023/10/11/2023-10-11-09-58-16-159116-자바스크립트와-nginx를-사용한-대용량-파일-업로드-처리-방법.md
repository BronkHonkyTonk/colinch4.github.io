---
layout: post
title: "자바스크립트와 Nginx를 사용한 대용량 파일 업로드 처리 방법"
description: " "
date: 2023-10-11
tags: [Nginx]
comments: true
share: true
---

## 목차
1. [들어가기](#들어가기)
2. [서버 측 업로드 처리](#서버-측-업로드-처리)
3. [클라이언트 측 업로드 처리](#클라이언트-측-업로드-처리)
4. [결론](#결론)

## 들어가기
파일 업로드는 웹 애플리케이션에서 매우 중요한 기능 중 하나입니다. 그러나 대용량 파일의 업로드는 서버 및 클라이언트 측에서 추가적인 처리가 필요합니다. 이번 글에서는 자바스크립트와 Nginx를 사용하여 대용량 파일 업로드를 처리하는 방법을 알아보겠습니다.

## 서버 측 업로드 처리
서버 측에서 대용량 파일 업로드를 처리하기 위해서는 Nginx의 설정을 조정해야 합니다. Nginx는 `client_max_body_size`라는 설정을 가지고 있는데, 디폴트로는 1MB로 설정되어 있습니다. 이 설정을 적절한 용량으로 변경하여 대용량 파일의 업로드를 허용할 수 있습니다.

Nginx 설정 파일에서 다음과 같이 `client_max_body_size`를 수정할 수 있습니다:

```nginx
http {
    ...
    server {
        ...
        client_max_body_size 100M;
        ...
    }
    ...
}
```
위의 예시에서는 업로드 최대 용량을 100MB로 설정한 것입니다. 원하는 용량으로 설정하십시오.

## 클라이언트 측 업로드 처리
클라이언트 측에서 대용량 파일을 업로드하기 위해서는 자바스크립트를 사용하여 파일을 청크(chunk) 단위로 나눠서 전송하는 방법을 사용할 수 있습니다.

다음은 자바스크립트를 사용해 대용량 파일을 청크 단위로 업로드하는 예시 코드입니다:

```javascript
function uploadFile(file) {
    const chunkSize = 1024 * 1024; // 1MB 청크 사이즈
    let offset = 0;
  
    while (offset < file.size) {
        const chunk = file.slice(offset, offset + chunkSize);

        // 청크를 서버로 업로드
        // ...
      
        offset += chunkSize;
    }
}
```

위의 코드에서는 파일을 `slice` 메서드를 사용하여 청크 단위로 나눈 후, 각 청크를 서버로 업로드하는 과정을 반복합니다. 업로드할 때는 AJAX 또는 Fetch API를 사용하여 서버에 청크를 전송할 수 있습니다.

## 결론
자바스크립트와 Nginx를 사용하여 대용량 파일 업로드를 처리하는 방법을 알아보았습니다. 서버 측에서는 Nginx 설정을 조정하여 업로드 용량 제한을 풀고, 클라이언트 측에서는 파일을 청크 단위로 나눠서 전송하는 방식을 사용할 수 있습니다. 이를 통해 대용량 파일 업로드를 안정적으로 처리할 수 있습니다.

#javascript #Nginx