---
layout: post
title: "자바스크립트 TDD와 테스트 주도 예외 처리"
description: " "
date: 2023-10-17
tags: [TDD]
comments: true
share: true
---

테스트 주도 개발(Test-driven development, TDD)은 소프트웨어 개발 방법론 중 하나로, 테스트 케이스를 먼저 작성하고 그에 맞춰 코드를 작성하는 방식입니다. 이를 통해 소프트웨어의 품질을 향상시킬 수 있습니다. 이번 글에서는 자바스크립트에서 TDD를 적용할 때 예외 처리를 다루는 방법에 대해 알아보겠습니다.

## TDD와 예외 처리

TDD에서는 테스트 케이스를 먼저 작성합니다. 이때 예외 상황을 모의(Mock)하거나 예외를 발생시켜야 하는 경우에도 테스트 케이스를 작성해야 합니다. 예외 처리를 효과적으로 하기 위해서는 다음과 같은 절차를 따를 수 있습니다.

1. **예외를 발생시켜야 하는 상황을 정의하는 테스트 케이스 작성** - 예외를 발생시켜야 하는 조건을 가진 테스트 케이스를 작성합니다. 이때, 해당 예외가 발생한 경우를 확인할 수 있는 단언문(Assertion)을 작성해야 합니다.
2. **테스트 케이스 실행 및 실패 확인** - 작성한 테스트 케이스를 실행하고, 예외가 발생하지 않은 경우 실패로 간주됩니다.
3. **예외 처리 로직 작성** - 발생시키려는 예외에 맞게 예외 처리 로직을 작성합니다.
4. **테스트 케이스 재실행 및 통과 확인** - 예외 처리 로직을 작성한 뒤에는 테스트 케이스를 재실행하여 예외가 발생하지 않고 통과되는지 확인합니다.
5. **테스트 케이스 확장 및 반복** - 필요한 다른 예외 상황에 대해서도 동일한 절차를 반복합니다.

## 예외 처리 예시

다음은 간단한 자바스크립트 함수에 대한 테스트 주도 개발을 예시로 살펴보겠습니다.

```javascript
function divide(a, b) {
  if (b === 0) {
    throw new Error("Divide by zero");
  }

  return a / b;
}
```

위 코드는 `divide` 함수를 정의하고, `b`가 0인 경우에는 예외를 발생시키도록 처리한 예제입니다. 이 함수에 대한 테스트 케이스를 작성해보겠습니다.

```javascript
// 테스트 케이스
test("divide function should throw an error when divided by zero", () => {
  expect(() => divide(10, 0)).toThrow(Error);
});
```

테스트 케이스에서는 `divide` 함수를 호출할 때 `b`를 0으로 전달하여 예외가 발생하는지 확인합니다.

이제 테스트 케이스를 실행하면 예외가 발생하지 않고 실패할 것입니다. 따라서 `divide` 함수 내부에 예외 처리 로직을 추가해야 합니다.

```javascript
function divide(a, b) {
  if (b === 0) {
    throw new Error("Divide by zero");
  }

  return a / b;
}
```

다시 테스트 케이스를 실행하면 이번에는 예외가 발생하지 않고 테스트가 통과할 것입니다.

## 결론

TDD를 적용할 때 예외 처리는 필수적인 요소입니다. 올바른 예외 처리를 위해서는 예외 상황에 대한 테스트 케이스를 작성하고, 그에 맞는 예외 처리 로직을 작성하는 것이 중요합니다. 이를 통해 품질 좋은 소프트웨어를 구현할 수 있습니다.

---

참고자료:
- [Jest - Testing Framework for JavaScript](https://jestjs.io/)
- [JavaScript TDD: 우월한 소프트웨어 개발 방법론](https://backend-intro.vlpt.us/6/05.html)