---
layout: post
title: "[swift] Swift Sourcery를 활용한 커스텀 코드 자동완성"
description: " "
date: 2023-11-16
tags: [swift]
comments: true
share: true
---

코드 작성 중 자주 반복되는 작업들을 자동화하고, 효율적으로 프로그래밍을 하기 위해서는 코드 생성 도구를 사용하는 것이 유용합니다. Swift에서는 Sourcery라는 코드 생성 도구를 활용하여 커스텀 코드 자동완성을 할 수 있습니다.

Sourcery는 Swift의 메타프로그래밍 기능을 이용하여 소스 코드를 분석하고, 템플릿을 활용하여 원하는 형태의 코드를 생성해 줍니다. 이를 이용하면 반복적인 작업을 자동화하여 코드 작성 시간을 줄이고 오류를 방지할 수 있습니다.

## Sourcery의 설치

Sourcery를 사용하기 위해서는 먼저 설치해야 합니다. 최신 버전의 Sourcery는 [GitHub](https://github.com/krzysztofzablocki/Sourcery)에서 다운로드할 수 있습니다. 설치를 위해서는 Swift Package Manager를 사용하거나, Homebrew를 통해 설치할 수 있습니다.

## Sourcery를 사용하여 코드 자동완성하기

Sourcery를 설치한 후에는 커스텀 코드 자동완성을 시작할 수 있습니다. 아래는 간단한 예시입니다.

```swift
// Person.swift

struct Person {
    let name: String
    let age: Int
}
```

위와 같이 Person이라는 구조체를 정의한 후, 다음과 같이 Sourcery를 이용하여 코드 자동완성을 할 수 있습니다.

```swift
// Person+AutoGenerated.swift

// sourcery: AutoGenerateEquatable
extension Person { }
```

Sourcery의 주석 명령어 `// sourcery: AutoGenerateEquatable`를 사용하여 자동으로 Equatable 프로토콜을 채용한 코드를 생성해 줍니다. 이렇게 생성된 코드는 Person 구조체에 Equatable 프로토콜을 적용하고, == 연산자를 사용하여 두 인스턴스를 비교할 수 있습니다.

## 주요 기능

Sourcery는 다양한 주석 명령어를 제공하여 다양한 기능을 정의할 수 있습니다. 몇 가지 주요 기능을 살펴보면 다음과 같습니다.

- `AutoGenerateEquatable`: Equatable 프로토콜을 자동으로 채용한 코드를 생성합니다.
- `AutoGenerateCodable`: Codable 프로토콜을 자동으로 채용한 코드를 생성합니다.
- `AutoGenerateMock`: 테스트 목적으로 사용할 Mock 객체를 자동으로 생성합니다.

이외에도 다양한 기능을 활용하여 커스텀 코드 자동완성을 할 수 있습니다. Sourcery의 자세한 사용법과 주석 명령어에 대한 설명은 공식 문서를 참고하시기 바랍니다.

## 마무리

Sourcery를 활용하여 코드를 자동으로 생성하면, 반복적인 작업을 줄이고 코드 작성 시간을 줄일 수 있습니다. 또한, 잠재적인 오류를 방지하고 코드의 일관성을 유지할 수 있습니다. 소스 코드를 분석하고 원하는 형태의 코드를 생성하는 메타프로그래밍 기능은 Swift 개발자에게 유용한 도구입니다.