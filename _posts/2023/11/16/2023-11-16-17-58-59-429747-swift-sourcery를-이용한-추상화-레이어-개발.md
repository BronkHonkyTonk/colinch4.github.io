---
layout: post
title: "[swift] Swift Sourcery를 이용한 추상화 레이어 개발"
description: " "
date: 2023-11-16
tags: [swift]
comments: true
share: true
---

## 소개
Sourcery는 Swift 코드 생성기로, 코드를 기반으로 자동으로 코드를 생성하거나 수정할 수 있는 강력한 도구입니다. 이러한 도구를 사용하면 번거로운 작업을 자동화하고 코드 중복을 줄일 수 있습니다. 이번 블로그에서는 Swift Sourcery를 사용하여 추상화 레이어를 개발하는 방법에 대해 알아보겠습니다.

## 추상화 레이어란?
추상화 레이어는 소프트웨어 구성 요소 간의 상호 작용을 캡슐화하는 인터페이스를 의미합니다. 일반적으로 네트워크 통신, 데이터베이스 접근, 파일 입출력 등의 기술적인 세부 사항을 추상화하여 클라이언트 코드에 노출하지 않도록 합니다. 이렇게 하면 개발자는 추상화된 인터페이스를 통해 구체적인 구현에 대해 고려하지 않고도 작업을 수행할 수 있습니다.

## Sourcery를 이용한 추상화 레이어 개발
1. Sourcery 설치하기: 우선 Swift 프로젝트에 Sourcery를 설치해야 합니다. 이를 위해 CocoaPods를 사용할 수 있습니다. Podfile에 다음과 같은 내용을 추가하고 `pod install` 명령어를 실행합니다.

   ```
   target 'MyProject' do
     # ...
     pod 'Sourcery'
     # ...
   end
   ```
   
2. Templates 작성하기: 코드 생성에 사용할 템플릿을 작성해야 합니다. 템플릿은 .sourcery 폴더에 저장되어야 합니다. 주로 Swift 코드를 작성하여 사용되며, 메타데이터와 필요한 코드 조각을 포함할 수 있습니다. 여기에는 실제 생성될 코드의 구조 및 형식이 포함됩니다.

3. 소스 파일 주석 작성하기: Sourcery는 주석을 기반으로 코드를 생성하므로, 추상화 레이어의 인터페이스를 주석으로 작성해야 합니다. 주석에는 해당 메서드 또는 프로퍼티의 기능, 매개변수, 반환 형식 등의 정보가 포함되어야 합니다.

4. Sourcery 실행하기: 터미널에서 프로젝트 루트 디렉토리로 이동한 다음 다음 명령어를 실행하여 Sourcery를 실행합니다.

   ```
   sourcery --sources <source_path> --templates <template_path> --output <output_path>
   ```
   여기서 `<source_path>`는 대상 소스 코드의 경로, `<template_path>`는 템플릿 파일이 있는 경로, `<output_path>`는 생성된 코드의 저장 위치를 나타냅니다.

5. 생성된 코드 사용하기: Sourcery를 실행하면 템플릿과 주석에 기반하여 코드가 생성됩니다. 이 코드를 기존 프로젝트에 추가하고 추상화된 인터페이스를 사용합니다.

## 결론
이번 글에서는 Swift Sourcery를 사용하여 추상화 레이어를 개발하는 방법에 대해 알아보았습니다. Sourcery를 사용하면 기계적인 작업을 자동화하고 코드 중복을 줄일 수 있으므로, 개발자들은 보다 효율적이고 유지보수 가능한 코드를 작성할 수 있습니다. Sourcery의 다양한 기능을 탐구하여 자신의 프로젝트에 적용해보는 것을 추천합니다.