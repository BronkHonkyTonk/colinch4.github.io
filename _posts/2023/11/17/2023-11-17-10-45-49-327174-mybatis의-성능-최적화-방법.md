---
layout: post
title: "[java] MyBatis의 성능 최적화 방법"
description: " "
date: 2023-11-17
tags: [java]
comments: true
share: true
---

MyBatis는 많은 개발자들에게 선호되는 오픈 소스 ORM(Object-Relational Mapping) 프레임워크입니다. 그러나 많은 데이터를 처리하거나 복잡한 쿼리를 실행할 때 성능 이슈가 발생할 수 있습니다. 이번 블로그에서는 MyBatis의 성능을 최적화하기 위한 몇 가지 방법을 알아보겠습니다.

## 1. 쿼리 튜닝

성능 최적화의 첫 번째 단계는 쿼리 튜닝입니다. MyBatis에서 실행하는 쿼리가 빠를수록 전체적인 성능이 향상됩니다. 다음은 쿼리 튜닝을 위한 몇 가지 팁입니다.

- 인덱스 추가: 데이터베이스 테이블에서 쿼리에 사용되는 컬럼에 인덱스를 추가하여 조회 성능을 향상시킬 수 있습니다.
- 조인 최적화: 복잡한 조인 작업을 수행할 때 성능 향상을 위해 조인 순서나 조인 방식을 변경해보세요.
- 서브쿼리 최적화: 성능 저하를 일으킬 수 있는 서브쿼리를 최적화하여 쿼리 실행 속도를 향상시킬 수 있습니다.

## 2. 캐싱 활용

MyBatis는 캐시를 활용하여 반복적으로 실행되는 쿼리의 결과를 저장하여 성능을 향상시킬 수 있습니다. MyBatis의 캐시 설정을 통해 적합한 레벨의 캐시를 활용하고, 필요에 따라 캐시를 비워줌으로써 성능을 최적화할 수 있습니다.

## 3. 배치 처리

MyBatis는 여러 개의 쿼리를 한 번에 실행하는 배치 처리 기능을 제공합니다. 여러 개의 INSERT, UPDATE, DELETE 작업을 일괄 처리하는 것으로 성능을 향상시킬 수 있습니다. 따라서 대량의 데이터를 한 번에 처리해야 할 때는 배치 처리를 고려해보세요.

## 4. Fetch Size 조절

MyBatis의 `statement`에 `fetchSize` 속성을 설정하여 한 번에 데이터를 가져오는 양을 조절할 수 있습니다. 기본값은 100입니다. `fetchSize` 값을 최적화하여 데이터 가져오는 횟수를 줄임으로써 성능을 향상시킬 수 있습니다.

## 5. 결과 매핑 최적화

MyBatis의 결과 매핑은 객체와 데이터베이스 결과를 매핑하는 작업을 의미합니다. 결과 매핑 과정에서 불필요한 매핑 작업이 발생할 수 있으므로, 필요한 필드만 매핑하고, 복잡한 매핑 작업은 최소화하는 것이 성능에 도움이 됩니다.

## 6. 로깅 레벨 조절

MyBatis의 로깅 레벨을 조절하여 로그의 양을 줄일 수 있습니다. 불필요한 로그는 성능에 부정적인 영향을 줄 수 있으므로, 필요한 로그만 출력하도록 로깅 레벨을 설정해보세요.

## 7. Connection 관리

MyBatis는 기본적으로 Connection 객체를 관리합니다. Connection 풀을 사용하여 Connection의 생성 및 해제를 최소화하고, 성능에 영향을 주지 않도록 관리해야 합니다.

## 8. 해제되지 않은 자원 처리

MyBatis를 사용할 때 주의해야 할 점은 쿼리 실행 후 자원을 명시적으로 해제해야 한다는 점입니다. ResultSet, Statement, Connection 등의 자원은 명시적으로 해제하지 않을 경우 성능 이슈가 발생할 수 있으므로 해제하는 것을 잊지 않도록 주의해야 합니다.

일반적으로 MyBatis의 성능은 위의 몇 가지 방법을 활용하여 향상시킬 수 있습니다. 성능 테스트를 통해 실제 데이터베이스 서버에서의 성능을 확인하고, 문제가 발생하는 쿼리나 부분을 식별하여 개선하는 것이 중요합니다.

이 글은 [MyBatis 공식 문서](https://mybatis.org/mybatis-3/)와 [마이구미](https://mygumi.tistory.com/145)의 자료를 참고하여 작성되었습니다.