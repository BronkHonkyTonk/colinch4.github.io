---
layout: post
title: "[java] 아파치 플링크의 상태 관리(State management in Apache Flink)"
description: " "
date: 2023-11-30
tags: [java]
comments: true
share: true
---

아파치 플링크(Apache Flink)는 분산 처리를 위한 오픈 소스 스트리밍 프레임워크입니다. 플링크는 대용량의 데이터를 처리하면서 안정적인 상태 관리를 제공하는데, 이는 다양한 애플리케이션에서 중요한 역할을 합니다.

## 상태(State)란?

상태는 스트림 처리 애플리케이션에 필요한 데이터 값을 의미합니다. 예를 들어, 통계를 계산하는 애플리케이션에서는 각 연산자(operator)의 중간 결과 값을 상태로 유지하고 이를 활용하여 최종 통계를 도출할 수 있습니다.

## 플링크의 상태 관리 방식

플링크는 내결함성을 위해 상태를 복제하여 중복 저장하는 방식을 사용합니다. 이를 통해 애플리케이션이 장애가 발생하더라도 데이터의 유실 없이 처리를 계속할 수 있습니다. 상태 관리 기능은 두 가지 모드, 즉 갱신 가능한 상태(Updateable State)와 읽기 전용 상태(Read-only State)로 제공됩니다.

### 갱신 가능한 상태(Updateable State)

갱신 가능한 상태는 애플리케이션이 변경 가능한 상태를 관리하는 데 사용됩니다. 이 모드에서는 여러 연산자 간에 상태를 공유할 수 있으며, 사용자 정의 상태 타입 또는 내장된 상태 타입을 사용할 수 있습니다. 갱신 가능한 상태는 상태 데이터에 대한 실시간 갱신 및 쿼리를 지원하여, 동적인 애플리케이션 요구에 대응할 수 있습니다.

### 읽기 전용 상태(Read-only State)

읽기 전용 상태는 메모리 기반 상태 관리 방식으로, 한 번만 초기화되고 읽기 전용으로 유지됩니다. 이 모드에서는 연산자 간에 상태를 공유할 수 없으며, 여러 애플리케이션 간 상태 공유가 불가능합니다. 읽기 전용 상태는 효율적인 쿼리 성능과 메모리 사용량을 보장하면서, 내결함성을 제공합니다.

## 상태 백업과 복원

플링크는 내결함성을 위해 주기적으로 상태를 백업하고, 장애 발생 시 이를 복원하여 처리 상태를 유지합니다. 상태의 백업은 외부 저장소와의 연동되며, 대개 분산 파일 시스템이나 분산 데이터베이스를 사용합니다. 상태의 복원은 플링크 장애 조치(Failure recovery) 메커니즘을 이용하여 수행됩니다.

## 결론

아파치 플링크는 상태 관리를 통해 안정적인 분산 처리를 지원하는 강력한 스트리밍 프레임워크입니다. 상태 관리 기능을 활용하여 중요한 데이터 값을 유지하고, 장애에 대비하여 내결함성을 보장할 수 있습니다.

---

참조:
- [Apache Flink 공식 문서 - 상태 관리](https://ci.apache.org/projects/flink/flink-docs-release-1.13/zh/docs/concepts/state-management/)