---
layout: post
title: "[javascript] Jest에서의 테스트 실행에 필요한 리소스 관리 방법은 어떻게 되는가?"
description: " "
date: 2023-11-24
tags: [javascript]
comments: true
share: true
---

## 병렬 실행
Jest는 테스트를 병렬로 실행하여 실행 시간을 단축할 수 있습니다. 이렇게 함으로써 CPU 자원을 효율적으로 사용하고 여러 테스트를 동시에 실행할 수 있습니다. 병렬 실행을 가능하게 하려면 `--maxWorkers` 플래그를 사용하여 동시에 실행할 최대 워커 수를 설정할 수 있습니다. 예를 들어, `--maxWorkers=4`로 설정하면 최대 4개의 테스트 워커를 동시에 실행할 수 있습니다.

## 환경 설정
Jest는 `jest.config.js` 파일을 통해 다양한 환경 설정을 제공합니다. 이 파일을 사용하여 테스트 실행에 필요한 리소스를 관리할 수 있습니다.

Jest 환경 설정 파일에서 다음과 같은 옵션을 사용할 수 있습니다:
- `testEnvironment`: 테스트가 실행될 환경을 설정합니다. 기본값은 `jsdom`이며, 이는 가상 DOM 환경에서 테스트하는 데 사용됩니다. 브라우저에 종속된 테스트의 경우 `jsdom` 대신 `puppeteer`를 사용할 수 있습니다.
- `testEnvironmentOptions`: 선택적으로 추가 환경 설정 옵션을 지정할 수 있습니다. 예를 들어, `puppeteer`를 사용하는 경우 브라우저 크기 또는 실행 시간 제한과 같은 옵션을 설정할 수 있습니다.
- `maxConcurrency`: 병렬 실행할 테스트 워커 수를 설정합니다. 위에서 언급한 `--maxWorkers` 명령행 플래그와 같은 역할을 합니다.

## 리소스 정리
Jest는 테스트 실행 후 생성된 리소스를 정리하는 기능을 제공합니다. 이를 위해 `globalTeardown` 옵션을 사용할 수 있습니다. `jest.config.js` 파일에서 `globalTeardown` 옵션을 설정하여 테스트 실행 후 정리하고자 하는 작업을 정의할 수 있습니다. 예를 들어, 테스트 실행 후 생성된 임시 파일이나 데이터베이스 연결을 닫는 작업을 수행할 수 있습니다.

```javascript
module.exports = {
  globalTeardown: './teardown.js',
};
```

위의 예제에서는 `teardown.js` 파일을 사용하여 테스트 실행 후 수행할 작업을 정의합니다. 이 파일에서 필요한 작업을 수행하여 리소스를 정리할 수 있습니다.

Jest에서의 테스트 실행에 필요한 리소스 관리는 병렬 실행, 환경 설정 및 리소스 정리와 같은 방법을 통해 효율적으로 수행할 수 있습니다. 이를 통해 Jest를 사용하여 JavaScript 애플리케이션의 테스트를 보다 쉽고 효율적으로 관리할 수 있습니다.