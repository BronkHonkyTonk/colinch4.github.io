---
layout: post
title: "도커를 활용한 자바스크립트 앱의 환경변수 관리 방법"
description: " "
date: 2023-11-10
tags: []
comments: true
share: true
---

도커는 현대적인 애플리케이션 개발과 배포를 위한 매우 인기있는 도구입니다. 도커를 사용하면 애플리케이션을 컨테이너화하여 쉽게 배포할 수 있으며, 여러 개발자나 팀 간의 협업을 간소화할 수 있습니다.

애플리케이션 배포 시에 중요한 부분 중 하나는 환경변수의 관리입니다. 환경변수는 애플리케이션의 동작을 제어하기 위해 사용되는 설정값들을 저장하는데 사용됩니다. 예를 들어, 데이터베이스 연결 정보, API 토큰, 시크릿 키 등을 환경변수로 관리할 수 있습니다. 

## 도커 컨테이너에서의 환경변수 관리

도커 컨테이너에서 환경변수를 관리하는 방법 중 가장 일반적인 방법은 컨테이너 실행 시에 환경변수를 지정하는 것입니다. 도커는 `-e` 옵션을 통해 환경변수를 지정할 수 있습니다. 

```docker
docker run -e DB_HOST=localhost -e DB_PORT=5432 my-app
```

위의 예시에서는 `DB_HOST`와 `DB_PORT`라는 환경변수를 지정하여 애플리케이션 컨테이너가 실행될 때 해당 환경변수들이 사용됩니다.

## 도커 볼륨을 이용한 환경변수 관리

때로는 도커 컨테이너 외부에 저장된 파일 또는 데이터베이스에 저장된 환경변수를 사용해야 할 때가 있습니다. 이런 경우에는 도커 볼륨을 이용하여 환경변수를 관리할 수 있습니다.

1. 먼저, 환경변수 파일을 호스트 머신에 저장합니다.

```bash
echo "DB_HOST=localhost" > my-env.txt
echo "DB_PORT=5432" >> my-env.txt
```

2. 도커 실행 시에 `-v` 옵션을 사용하여 호스트 머신의 환경변수 파일을 컨테이너에 마운트합니다.

```docker
docker run -v $(pwd)/my-env.txt:/app/my-env.txt my-app
```

위의 예시에서는 호스트 머신에 저장된 `my-env.txt` 파일을 컨테이너의 `/app/my-env.txt` 경로에 마운트하여 애플리케이션에서 환경변수를 로드할 수 있게 됩니다.

## 도커 컴포즈를 이용한 환경변수 관리

도커 컴포즈는 도커 애플리케이션을 관리하고 여러 컨테이너를 함께 실행하는 데 사용되는 도구입니다. 도커 컴포즈를 사용하면 환경변수를 손쉽게 관리할 수 있습니다.

1. 도커 컴포즈 파일(`docker-compose.yml`)을 작성합니다.

```yaml
version: '3'
services:
  my-app:
    image: my-app
    environment:
      - DB_HOST=localhost
      - DB_PORT=5432
```
  
2. 컴포즈 파일에 정의된 환경변수를 사용하여 애플리케이션을 실행합니다.

```bash
docker-compose up
```

위의 예시에서는 `DB_HOST`와 `DB_PORT`라는 환경변수를 컴포즈 파일에 정의하고, `docker-compose up` 명령을 통해 애플리케이션을 실행합니다.

## 결론

도커를 사용하여 자바스크립트 애플리케이션의 환경변수를 관리하는 방법에 대해 알아보았습니다. 환경변수는 애플리케이션의 동작을 커스터마이징하기 위해 매우 중요한 역할을 합니다. 도커의 다양한 기능들을 활용하여 효율적으로 환경변수를 관리할 수 있습니다. 

[#도커](https://www.docker.com/) [#환경변수](https://en.wikipedia.org/wiki/Environment_variable)