---
layout: post
title: "파이썬 로깅 모듈과 데이터베이스의 통합"
description: " "
date: 2023-11-10
tags: [python]
comments: true
share: true
---

로그는 소프트웨어 개발과 운영에서 매우 중요한 역할을 합니다. 로그는 애플리케이션의 동작 상황과 발생한 이벤트를 기록하는데 사용되며, 이를 통해 애플리케이션의 문제를 파악하고 디버깅하는 데 도움을 줍니다. 파이썬에서는 `logging` 모듈을 사용하여 로그 기능을 구현할 수 있습니다.

이번 블로그에서는 파이썬의 `logging` 모듈과 데이터베이스를 통합하는 방법에 대해 살펴보겠습니다.

## 1. 로깅 모듈 기본 설정

먼저, `logging` 모듈을 사용하기 위해 기본 설정을 해야합니다. 다음 코드는 로그를 파일에 기록하는 기본 설정을 보여줍니다.

```python
import logging

logging.basicConfig(filename='app.log', level=logging.DEBUG)
```

위 코드에서 `filename`은 로그를 기록할 파일의 이름을 나타내며, `level`은 기록할 로그의 레벨을 설정합니다. 로그 레벨에는 `DEBUG`, `INFO`, `WARNING`, `ERROR`, `CRITICAL` 등이 있습니다.

## 2. 데이터베이스와 로깅 모듈의 통합

로그는 주로 애플리케이션의 동작 상황을 확인하는 용도로 사용됩니다. 따라서, 데이터베이스와 로깅 모듈을 통합한다면 데이터베이스에 발생한 이벤트를 로그로 남길 수 있습니다.

예를 들어, MySQL 데이터베이스를 사용하는 경우 `mysql-connector-python` 패키지를 설치하고 다음 코드를 사용하여 데이터베이스에 연결하여 쿼리를 실행하고 로그로 남길 수 있습니다.

```python
import logging
import mysql.connector

logging.basicConfig(filename='app.log', level=logging.DEBUG)

def execute_query(query):
    try:
        connection = mysql.connector.connect(
            host='localhost',
            user='username',
            password='password',
            database='database_name'
        )
        
        cursor = connection.cursor()
        cursor.execute(query)
        
        # 데이터베이스에 로그 남기기
        logging.info(f"Executed query: {query}")
        
        connection.commit()
        cursor.close()
        
    except mysql.connector.Error as error:
        logging.error(f"Failed to execute query: {query}. Error: {error}")
        
    finally:
        if connection.is_connected():
            connection.close()
```

위 코드에서 `execute_query` 함수는 주어진 쿼리를 실행하고 로그를 남깁니다. 성공적으로 쿼리가 실행되면 `info` 레벨의 로그가 생성되고, 실패한 경우 `error` 레벨의 로그가 생성됩니다.

이제 데이터베이스와 로깅 모듈이 통합되었으므로, 로그를 통해 데이터베이스 이벤트를 추적하고 디버깅할 수 있습니다.

## 마무리

파이썬의 `logging` 모듈과 데이터베이스를 통합함으로써 애플리케이션의 동작 상황을 로그로 남기는 기능을 구현할 수 있습니다. 이를 통해 데이터베이스 이벤트를 신속하게 파악하고 문제를 해결할 수 있습니다.

더 자세한 내용은 파이썬 공식 문서를 참고하시기 바랍니다.

[logging - 파이썬 공식 문서](https://docs.python.org/3/library/logging.html)

#python #logging #database