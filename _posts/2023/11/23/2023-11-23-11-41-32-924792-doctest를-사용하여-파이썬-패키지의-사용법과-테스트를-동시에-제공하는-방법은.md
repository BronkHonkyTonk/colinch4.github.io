---
layout: post
title: "[python] doctest를 사용하여 파이썬 패키지의 사용법과 테스트를 동시에 제공하는 방법은?"
description: " "
date: 2023-11-23
tags: [python]
comments: true
share: true
---

파이썬 패키지를 개발하면 사용자들에게 제공하는 사용법과 함께 테스트도 제공하는 것이 중요합니다. 이렇게 하면 사용자들이 패키지를 쉽게 이해하고 사용할 수 있으며, 패키지의 안정성과 신뢰성을 높일 수 있습니다. 이를 위해 `doctest` 모듈을 사용하여 패키지의 사용법과 함께 테스트를 작성할 수 있습니다.

`doctest`는 파이썬의 표준 라이브러리로 제공되는 모듈로, 소스 코드에 있는 문서화 문자열(docstring)에서 동작하는 테스트를 자동으로 추출하고 실행하는 역할을 합니다. 이를 통해 사용자의 예상과 실제 결과를 비교하고, 문서와 코드의 일관성을 유지할 수 있습니다. 또한 `doctest`를 사용하면 간단한 테스트를 작성하고, 테스트를 주석처리하는 번거로움을 줄일 수 있습니다.

다음은 `doctest`를 사용하여 클래스의 사용법과 테스트를 동시에 제공하는 간단한 예시입니다.

```python
class Calculator:
    def add(self, a, b):
        """
        두 수를 더하는 메서드

        >>> calc = Calculator()
        >>> calc.add(2, 3)
        5
        >>> calc.add(-1, 1)
        0
        """
        return a + b
```

위 예시에서는 `Calculator` 클래스의 `add` 메서드에 대한 사용법과 테스트를 함께 작성하였습니다. `doctest`는 이러한 문서화 문자열에 있는 예제를 추출하여 실행하고 예상 결과와 비교합니다. 결과가 일치하지 않는 경우에는 오류를 발생시키고, 일치하는 경우에는 통과합니다.

`doctest`를 실행하기 위해서는 다음과 같이 `doctest` 모듈을 임포트한 후에 `doctest.testmod()` 메서드를 호출하면 됩니다.

```python
import doctest

if __name__ == "__main__":
    doctest.testmod()
```

위 코드를 실행하면 `doctest` 모듈에 작성된 모든 테스트를 실행하여 결과를 출력합니다. 이때, 테스트가 성공하면 아무런 출력이 없지만, 실패하는 경우에는 오류 메시지를 출력합니다.

`doctest`를 사용하여 테스트를 작성하면, 소스 코드와 함께 문서화되어 있는 예제가 테스트로서의 역할을 수행하게 되므로, 사용자들에게 명확하고 포괄적인 사용법과 동시에 테스트를 제공할 수 있습니다.

더 자세한 내용은 파이썬 공식 문서(https://docs.python.org/3/library/doctest.html)를 참고하시면 됩니다.