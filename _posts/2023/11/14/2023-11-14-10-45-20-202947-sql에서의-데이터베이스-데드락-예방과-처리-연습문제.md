---
layout: post
title: "SQL에서의 데이터베이스 데드락 예방과 처리 연습문제"
description: " "
date: 2023-11-14
tags: [SQL]
comments: true
share: true
---

데이터베이스에서 데드락은 여러 트랜잭션들이 서로 필요한 자원을 점유하고 있으면서 상호적으로 대기하고 있는 상태를 말합니다. 이러한 데드락 상태는 트랜잭션의 실행을 중단시키고 데이터 일관성을 해치는 원인이 될 수 있으므로, 데드락을 예방하고 처리하는 기술은 중요합니다.

## 데드락 예방 방법

### 1. 상호 배제 조건 제거
데드락을 예방하기 위해서는 상호 배제 조건을 제거하면 됩니다. 상호 배제 조건은 동시에 하나의 트랜잭션만이 어떤 자원을 사용할 수 있다는 조건을 의미하는데, 이를 제거하면 동시에 여러 트랜잭션이 같은 자원을 사용할 수 있게 됩니다.

### 2. 점유와 대기 조건 제거
데드락을 예방하기 위해서는 점유와 대기 조건을 제거해야 합니다. 이는 트랜잭션들이 일단 자원을 점유하지 않은 상태에서 필요한 자원을 얻도록 하는 것을 의미합니다.

### 3. 비선점 조건 제거
데드락을 예방하기 위해서는 비선점 조건을 제거해야 합니다. 비선점 조건은 한 트랜잭션이 어떤 자원을 점유하고 있는 상태에서 다른 트랜잭션이 그 자원을 강제로 빼앗을 수 없다는 조건을 의미하는데, 이를 제거하면 트랜잭션이 필요한 자원을 강제로 빼앗아 사용할 수 있게 됩니다.

## 데드락 처리 방법

### 1. 데드락 탐지 및 회복
데드락이 발생했을 때, 시스템은 데드락을 탐지하고 회복하는 알고리즘을 실행해야 합니다. 대표적인 알고리즘으로는 자원 할당 그래프 알고리즘이 있으며, 이 알고리즘은 데드락을 탐지하고 발생한 데드락을 해결하기 위한 방법을 제공합니다.

### 2. 트랜잭션 롤백
데드락이 발생했을 때, 일부 트랜잭션을 롤백하는 방법을 통해 데드락을 처리할 수 있습니다. 롤백은 트랜잭션이 실행한 작업을 취소하고, 이전의 일관된 상태로 되돌리는 것을 의미합니다. 롤백을 통해 데드락이 발생한 트랜잭션을 중단시킬 수 있으며, 이후 다른 트랜잭션이 실행될 수 있게 됩니다.

데드락은 데이터베이스 운영에서 심각한 문제가 될 수 있으며, 이를 예방하고 처리하기 위해 알맞은 방법을 적용해야 합니다. 데이터베이스 관리자와 개발자는 데드락에 대한 이해와 대응책을 습득하여 데드락이 발생할 때 적절히 처리할 수 있어야 합니다.

## 참고 자료
- [데드락 예방 - 위키백과](https://ko.wikipedia.org/wiki/%EB%8D%B0%EB%93%9C%EB%9D%BD_%EC%98%88%EB%B0%A9)
- [SQL Server의 데드락 탐지와 회복 - Microsoft 문서](https://docs.microsoft.com/ko-kr/sql/relational-databases/deadlocks/deadlock-detection-and-recovery?view=sql-server-ver15)
- [데드락 처리 - CUBRID 개발자 문서](https://www.cubrid.org/manual/ko/10.0/core-concepts-of-databases/14.1.5)  

#데드락 #데이터베이스