---
layout: post
title: "[파이썬][Numpy] 배열의 내부 구조와 메모리 배치"
description: " "
date: 2023-08-24
tags: [python,Numpy]
comments: true
share: true
---


Numpy 배열의 내부 구조와 메모리 배치에 대해 자세히 알아보겠습니다.

### Numpy 배열의 내부 구조

Numpy 배열은 데이터를 다차원 그리드 형태로 저장합니다. 이 그리드는 원소(element)라고 불리는 개별 데이터 항목으로 구성되며, 배열의 차원(dimension)은 이 그리드를 탐색하는 데 사용됩니다.

다음은 Numpy 배열의 주요 내부 구성 요소입니다:

1.  **Shape (형태):** 배열의 형태(shape)는 각 차원에 몇 개의 원소가 있는지를 정의합니다. 예를 들어, 2차원 배열의 형태는 (행의 수, 열의 수)로 표현됩니다.
    
2.  **Data Type (데이터 타입):** 배열의 데이터 타입은 배열 내의 각 원소의 자료형을 정의합니다. 예를 들어, 정수, 부동 소수점, 문자열 등의 다양한 데이터 타입을 지원합니다.
    
3.  **Strides (스트라이드):** 스트라이드는 배열의 각 차원을 따라 데이터가 메모리에 저장되는 간격을 나타냅니다. 스트라이드 값은 배열의 형태와 데이터 타입에 따라 결정됩니다.
    
4.  **Data Buffer (데이터 버퍼):** Numpy 배열은 데이터를 메모리 버퍼에 저장합니다. 이 버퍼는 실제 데이터가 저장되는 곳이며, 배열의 원소는 이 버퍼 내에 순차적으로 저장됩니다.
    

### 메모리 배치

Numpy 배열의 메모리 배치는 데이터가 메모리에 저장되는 방식을 의미합니다. 메모리 배치에는 C-Style 메모리 배치와 Fortran-Style 메모리 배치 두 가지 주요 형태가 있습니다.

1.  **C-Style 메모리 배치 (Row-Major Order):** C-Style 메모리 배치에서는 다차원 배열의 첫 번째 차원의 원소가 메모리에 연속적으로 저장되며, 다음 차원으로 이동하기 위해 더 큰 스트라이드가 사용됩니다. 이는 행을 따라 데이터가 연속적으로 저장되는 방식으로, 일반적으로 C 언어와 호환됩니다.
    
2.  **Fortran-Style 메모리 배치 (Column-Major Order):** Fortran-Style 메모리 배치에서는 다차원 배열의 마지막 차원의 원소가 메모리에 연속적으로 저장되며, 이전 차원으로 이동하기 위해 더 큰 스트라이드가 사용됩니다. 이는 열을 따라 데이터가 연속적으로 저장되는 방식으로, 일반적으로 Fortran 언어와 호환됩니다.
    

Numpy 배열의 메모리 배치는 기본적으로 C-Style 메모리 배치를 따르며, 이는 대부분의 경우에서 올바르게 작동합니다. 그러나 때로는 데이터를 Fortran-Style로 저장해야 하는 경우가 있을 수 있으며, 이를 위해 `order` 매개변수를 사용하여 메모리 배치 방식을 지정할 수 있습니다.

```python
import numpy as np

# C-Style 메모리 배치로 배열 생성
arr_c = np.array([[1, 2, 3], [4, 5, 6]])

# Fortran-Style 메모리 배치로 배열 생성
arr_f = np.array([[1, 4], [2, 5], [3, 6]], order='F')
```
메모리 배치를 이해하면 데이터 접근 및 처리의 효율성을 높이는 데 도움이 됩니다. Numpy는 메모리 배치를 조절하는 다양한 도구와 함수를 제공하므로, 특정한 요구사항에 따라 메모리 배치를 설정할 수 있습니다.