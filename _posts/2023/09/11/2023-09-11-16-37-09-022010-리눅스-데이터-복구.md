---
layout: post
title: "리눅스 데이터 복구"
description: " "
date: 2023-09-11
tags: [linux]
comments: true
share: true
---

리눅스는 안정성과 신뢰성으로 유명한 운영 체제입니다. 그러나 가끔씩 데이터 손실이 발생할 수 있습니다. 사용자의 부주의, 하드웨어 장애, 또는 시스템 오류 등 다양한 이유로 인해 데이터가 손상되거나 삭제될 수 있습니다. 이러한 상황에서는 리눅스에서도 데이터를 복구할 수 있는 방법이 있습니다. 이번 블로그 포스트에서는 리눅스 데이터 복구에 대해 Bash 스크립트를 사용하는 방법을 알아보겠습니다.

## 데이터 소실 원인 분석

데이터 소실은 여러 가지 이유로 인해 발생할 수 있습니다. 가장 일반적인 원인은 다음과 같습니다:

- 사용자의 부주의로 인한 파일 삭제
- 파일 시스템의 오류
- 하드웨어 고장
- 악성 소프트웨어

리눅스는 파일 시스템 내에서 데이터를 저장하고 관리합니다. 따라서 파일 삭제 시, 해당 파일의 내용은 실제로 지워지지 않고 파일 시스템에서 사용하지 않는 공간으로 표시됩니다. 이때 파일 시스템에 새로운 파일이 작성되면, 이전 파일의 데이터는 덮어씌워질 수 있습니다. 그러나 데이터 복구를 위해서는 삭제된 파일의 내용이 덮어써지기 전에 복구해야 합니다.

## Bash 스크립트를 사용한 데이터 복구

Bash는 리눅스에서 가장 많이 사용되는 셸 스크립팅 언어입니다. 이를 활용하여 데이터 복구를 위한 스크립트를 작성할 수 있습니다. 아래는 Bash를 사용한 기본적인 데이터 복구 스크립트의 예입니다.

```bash
#!/bin/bash

# 복구할 경로
recovery_path="/path/to/recovery/folder"

# 삭제된 파일 복구
recover_deleted_files() {
    # extundelete를 사용하여 삭제된 파일 복구
    extundelete /dev/sdb1 --restore-all --output-dir $recovery_path

    # 복구된 파일을 원래 위치로 복사
    cp $recovery_path/* /home/user/
}

# 손상된 파일 시스템 복구
recover_corrupted_filesystem() {
    # 데이터 손상을 확인하고 파일 시스템 복구
    fsck /dev/sdb1
}

# 데이터 복구 실행
recover_deleted_files
recover_corrupted_filesystem
```

위 스크립트는 데이터 복구를 위해 두 가지 함수를 정의합니다. 첫 번째 함수 `recover_deleted_files`는 `extundelete` 도구를 사용하여 삭제된 파일을 복구하고, 복구된 파일을 원래 위치로 복사합니다. 이때 `recovery_path` 변수를 사용하여 복구된 파일을 저장할 경로를 지정합니다.

두 번째 함수 `recover_corrupted_filesystem`는 `fsck` 도구를 사용하여 손상된 파일 시스템을 복구하는 역할을 합니다.

마지막 부분에서는 `recover_deleted_files` 함수와 `recover_corrupted_filesystem` 함수를 차례로 호출하여 데이터를 복구합니다.

## 마무리

리눅스에서 데이터 복구는 손실된 파일을 복구하고 파일 시스템 문제를 해결하기 위한 중요한 작업입니다. Bash 스크립트를 사용하면 이러한 작업을 자동화할 수 있습니다. 위의 예시 코드를 기반으로 스크립트를 수정하여 데이터 복구를 진행해 보세요. 그러나 데이터 복구 작업은 신중히 수행되어야 하며, 먼저 백업을 수행하는 것이 좋습니다.