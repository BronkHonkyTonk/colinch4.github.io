---
layout: post
title: "리눅스 서버 백업 정책"
description: " "
date: 2023-09-11
tags: [linux]
comments: true
share: true
---

안녕하세요! 이번에는 리눅스 서버 백업 정책에 대해 알아보겠습니다. 백업은 중요한 데이터를 보호하고 장애 발생 시에 대비하기 위해 필수적인 작업입니다. 이 글에서는 리눅스 서버에서의 백업 정책 설계와 실행을 다루겠습니다.

## 1. 백업 정책 설계

### 1.1 백업 주기 결정

리눅스 서버에서의 백업 주기는 중요한 결정 사항입니다. 여러 요소를 고려하여 적절한 주기를 결정해야 합니다. 일일 백업, 주간 백업, 월간 백업 등 주기를 세분화하여 데이터의 중요도와 비용 등을 고려해야 합니다.

### 1.2 백업 유형 선택

백업 유형은 대개 전체 백업과 증분 백업으로 나눌 수 있습니다. 전체 백업은 모든 데이터를 백업하는 방식으로, 백업 시간이 오래 걸릴 수 있습니다. 증분 백업은 처음 한 번의 전체 백업 이후에 변경된 데이터만 백업하는 방식으로, 시간과 저장 공간을 절약할 수 있습니다. 백업 유형을 결정할 때 장기적인 데이터 보존 요구사항을 고려해야 합니다.

### 1.3 백업 저장 위치 결정

백업된 데이터를 저장하는 위치 또한 중요합니다. 보안을 위해 외부 백업 서비스나 별도의 서버에 저장하는 것이 좋습니다. 또한, 저장 위치가 직접적인 장애의 영향을 받지 않도록 고려해야 합니다.

## 2. 백업 실행

### 2.1 스크립트 작성

리눅스 서버에서는 주로 **bash 스크립트**를 사용하여 백업을 실행합니다. 스크립트를 작성하기 전에 백업 목표와 요구사항을 분석하고, 사용할 백업 도구나 명령어를 결정해야 합니다.

```bash
#!/bin/bash

# 필요한 변수들을 설정합니다.
backup_dir="/var/backup"
source_dir="/var/www/html"
date=$(date '+%Y-%m-%d')
filename="backup_${date}.tar.gz"

# 백업 명령어를 실행합니다.
tar -zcf ${backup_dir}/${filename} ${source_dir}
```

위 스크립트는 리눅스 서버의 `/var/www/html` 디렉토리를 `tar` 명령어를 사용하여 압축한 뒤, `/var/backup` 디렉토리에 날짜별로 백업 파일을 저장합니다.

### 2.2 cron 작업 등록

백업 스크립트를 정기적으로 실행하기 위해 **cron 작업**을 등록해야 합니다. cron 작업은 지정된 시간에 스크립트를 자동으로 실행합니다.

```bash
# cron 작업 등록
crontab -e
```

에디터가 열리면 아래와 같이 백업 주기에 맞게 cron 작업을 등록합니다.

```
0 0 * * * /path/to/backup_script.sh
```

위 예시에서는 매일 00시 00분에 스크립트가 실행되도록 설정되어 있습니다.

## 3. 백업 관리

### 3.1 백업 로그 확인

백업 스크립트의 실행 결과를 기록하는 로그를 확인하여 백업이 정상적으로 수행되고 있는지 확인해야 합니다. 로그 파일은 알맞은 권한으로 설정되어야 하며, 정기적으로 로그를 체크하여 문제를 조기에 발견해야 합니다.

### 3.2 백업 회전

백업 파일을 오래 보존하는 것은 디스크 공간을 낭비할 수 있습니다. 이를 방지하기 위해 **백업 회전**을 수행해야 합니다. 일정 기간 이후에는 오래된 백업 파일을 삭제하거나 이동하는 등의 정책을 수립해야 합니다.

---

이상으로 리눅스 서버 백업 정책에 대해 알아보았습니다. 백업은 중요한 데이터를 보호하고 장애에 대비하기 위해 필수적인 작업입니다. 적절한 백업 정책을 설계하고 실행하는 것은 서버 운영자에게 꼭 필요한 기술입니다.