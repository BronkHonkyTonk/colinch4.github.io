---
layout: post
title: "리눅스 프록시 서버 설정"
description: " "
date: 2023-09-11
tags: [linux]
comments: true
share: true
---

프록시 서버는 네트워크 트래픽을 중간에 거쳐 다른 서버로 전달하는 중계 역할을 하는 서버입니다. 리눅스 시스템에서 프록시 서버를 설정하는 방법을 알아봅시다.

## 프록시 서버 소프트웨어 설치

리눅스에서 가장 일반적으로 사용되는 프록시 서버 소프트웨어는 **Squid**입니다. Squid를 설치하기 위해 다음 명령을 실행해주세요.

```bash
sudo apt update
sudo apt install squid
```

## Squid 구성 파일 수정

Squid를 설치한 후, 설정 파일인 **squid.conf**를 수정해 프록시 서버를 원하는 형태로 구성할 수 있습니다. 해당 파일은 `/etc/squid/squid.conf` 경로에 있습니다. 

1. 프록시 서버가 수신할 포트를 지정해주세요. 기본적으로 3128 포트를 사용합니다.

```bash
http_port 3128
```

2. ACL(Access Control List)을 통해 프록시 서버에 접근할 수 있는 IP 주소를 제한할 수 있습니다. 다음 예제는 192.168.0.0/24 대역의 IP 주소만 허용하는 설정입니다.

```bash
acl localnet src 192.168.0.0/24
http_access allow localnet
```

3. 프록시 캐시의 크기를 설정할 수 있습니다. 캐시는 반복적인 요청을 저장해 서버에 한 번만 요청하고 그 이후에는 캐시에서 응답을 제공합니다. 예를 들어, 100MB의 캐시 크기를 설정하는 방법은 다음과 같습니다.

```bash
cache_dir ufs /var/spool/squid 100 16 256
```

4. Squid 서비스를 재시작하여 적용합니다.

```bash
sudo systemctl restart squid
```

## 클라이언트에서 프록시 서버 사용

프록시 서버 설정이 완료되었으므로, 클라이언트에서 프록시 서버를 사용할 수 있습니다. 이를 위해 클라이언트의 네트워크 설정에서 프록시 서버를 지정해야 합니다.

1. 윈도우 사용자의 경우, "인터넷 옵션"에서 "연결" 탭으로 이동합니다. "로컬 영역 네트워크(LAN) 설정"을 찾아 "프록시 서버 사용" 옵션을 선택하고, 프록시 서버의 IP 주소와 포트를 입력합니다.

2. 리눅스 사용자의 경우, 네트워크 관리자 도구인 **NetworkManager**에서 프록시 설정을 변경할 수 있습니다. 아래의 명령어를 실행해 프록시 설정 대화 상자를 열 수 있습니다.

```bash
nm-connection-editor
```

3. Mac 사용자의 경우, 시스템 환경설정의 "네트워크"에서 프록시 설정을 변경할 수 있습니다.

프록시 서버 설정을 통해 네트워크 트래픽을 효과적으로 관리하고 보안을 강화할 수 있습니다. Squid 외에도 다양한 프록시 서버 소프트웨어가 있으니 필요에 맞는 소프트웨어를 선택하여 사용하시기 바랍니다.