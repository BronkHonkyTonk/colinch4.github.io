---
layout: post
title: "CentOS 망 분리 환경 설정"
description: " "
date: 2023-09-11
tags: [linux]
comments: true
share: true
---

CentOS는 기업에서 사용되는 망 분리 환경을 구축할 수 있는 강력한 운영 체제입니다. 이 블로그 게시물에서는 CentOS에서 망 분리 환경 설정을 위한 방법을 소개하고자 합니다. 

## 1. 네트워크 인터페이스 설정

### 1.1. 네트워크 인터페이스 확인

망 분리 환경을 설정하기 전에 현재 시스템에 연결된 네트워크 인터페이스를 확인해야 합니다. 다음 명령어를 사용하여 네트워크 인터페이스를 확인할 수 있습니다.

```bash
$ ip addr show
```
### 1.2. 네트워크 인터페이스 비활성화

망 분리 환경을 설정하기 위해 현재 사용되고 있는 네트워크 인터페이스를 비활성화해야 합니다. 다음 명령어를 사용하여 네트워크 인터페이스를 비활성화할 수 있습니다.

```bash
$ ifdown eth0
```

### 1.3. 네트워크 인터페이스 구성 파일 수정

망 분리 환경을 설정하기 위해 네트워크 인터페이스 구성 파일을 수정해야 합니다. 다음 명령어를 사용하여 네트워크 인터페이스 구성 파일을 엽니다.

```bash
$ vi /etc/sysconfig/network-scripts/ifcfg-eth0
```

`ifcfg-eth0` 파일을 열었다면 `ONBOOT` 값을 `no`로 변경합니다.

```
ONBOOT=no
```

### 1.4. 네트워크 인터페이스 설정 확인

네트워크 인터페이스 설정이 정상적으로 변경되었는지 확인하기 위해 다음 명령어를 사용합니다.

```bash
$ ip addr show
```

이제 시스템은 네트워크에 연결되지 않았고 망 분리 환경으로 설정되었습니다.

## 2. 방화벽 설정

망 분리 환경을 보호하기 위해 방화벽을 설정해야 합니다.

### 2.1. 방화벽 서비스 활성화

망 분리 환경에서 방화벽 서비스를 활성화하려면 다음 명령어를 사용합니다.

```bash
$ systemctl enable firewalld
$ systemctl start firewalld
```

### 2.2. 방화벽 규칙 설정

방화벽 규칙을 설정하여 허용되지 않은 트래픽이 내부 네트워크로 들어올 수 없도록 해야 합니다. 다음 명령어를 사용하여 방화벽 규칙을 추가합니다.

```bash
$ firewall-cmd --zone=internal --add-service=http --permanent
$ firewall-cmd --reload
```

이렇게하면 망 분리 환경에서 웹 서비스에 대한 트래픽만 허용됩니다.

## 3. DNS 설정

망 분리 환경에서 사용자가 도메인 이름을 통해 내부 리소스에 접근할 수 있도록 DNS를 설정해야 합니다.

### 3.1. DNS 서버 구성

망 분리 환경에서 DNS 서버를 구성해야 합니다. DNS 서버 구성에는 여러 옵션이 있으며 여기서는 `dnsmasq`를 사용합니다.

```bash
$ yum install dnsmasq
```

### 3.2. DNS 서버 설정

DNS 서버 설정을 위해 `dnsmasq` 구성 파일을 엽니다.

```bash
$ vi /etc/dnsmasq.conf
```

`dnsmasq.conf` 파일을 열었다면 다음과 같이 설정합니다.

```
interface=eth0
listen-address=192.168.0.1
dhcp-range=192.168.0.10,192.168.0.100,12h
```

위 설정은 `eth0` 인터페이스를 통해 DNS 서버를 실행하고 `192.168.0.1` IP 주소를 사용합니다. 또한 `192.168.0.10`에서 `192.168.0.100`까지의 IP 주소를 동적으로 할당하며 이 주소들은 12시간 동안 유효합니다.

### 3.3. DNS 서버 서비스 활성화

DNS 서버 서비스를 활성화하려면 다음 명령어를 사용합니다.

```bash
$ systemctl enable dnsmasq
$ systemctl start dnsmasq
```

## 결론

CentOS에서 망 분리 환경을 설정하는 방법을 살펴보았습니다. 네트워크 인터페이스 설정, 방화벽 설정 및 DNS 설정을 통해 보안 강화된 망 분리 환경을 구축할 수 있습니다. 이러한 설정은 기업 내부에서 중요한 데이터 및 시스템 보호에 필수적입니다.

*이 블로그 게시물은 CentOS 7을 기반으로 작성되었습니다.*