---
layout: post
title: "[파이썬] 다중 상속과 다이아몬드 문제"
description: " "
date: 2023-09-01
tags: [python]
comments: true
share: true
---

파이썬은 많은 기능을 제공하는 강력한 객체 지향 프로그래밍 언어입니다. 이러한 객체 지향 프로그래밍의 한 가지 특징은 다중 상속이 가능하다는 것입니다. 

다중 상속은 하나의 클래스가 두 개 이상의 부모 클래스로부터 상속 받는 것을 의미합니다. 이로 인해 하나의 클래스는 여러 개의 부모 클래스에서 상속받은 속성과 메서드를 가질 수 있게 됩니다. 

하지만 다중 상속은 가독성과 유지보수의 어려움을 야기할 수 있는 "다이아몬드 문제"라고 하는 문제를 유발할 수 있습니다.

## 다이아몬드 문제란?

다이아몬드 문제는 다중 상속에서 일어나는 충돌 상황을 말합니다. 다이아몬드 문제가 발생하는 상황은 아래와 같습니다.

```
   A
  / \
 B   C
  \ /
   D
```

위와 같이 클래스 A가 클래스 B와 C를 상속받고, 클래스 D가 클래스 B와 C를 상속받는 경우를 생각해보겠습니다. 클래스 A에 있는 메서드를 호출할 때, 클래스 D에서는 어떤 메서드를 호출해야 할까요?

## 다이아몬드 문제 해결 방법

파이썬은 다이아몬드 문제를 해결하기 위해 메서드 탐색 순서(Method Resolution Order, MRO)라는 알고리즘을 사용합니다. MRO는 상속 관계에서 메서드를 찾을 때 참조하는 순서를 결정하는 알고리즘입니다.

파이썬은 `super()` 함수를 사용하여 MRO를 따라 부모 클래스의 메서드를 호출할 수 있도록 해줍니다. `super()` 함수는 현재 클래스의 부모 클래스에서 동일한 이름의 메서드를 찾아 호출하는 기능을 제공합니다.

아래는 다이아몬드 문제를 해결하기 위해 `super()` 함수를 사용하는 예시 코드입니다.

```python
class A:
    def method(self):
        print("A's method")

class B(A):
    def method(self):
        print("B's method")
        super().method()

class C(A):
    def method(self):
        print("C's method")
        super().method()

class D(B, C):
    def method(self):
        print("D's method")
        super().method()

d = D()
d.method() # 출력 결과: D's method -> B's method -> C's method -> A's method
```

위 코드에서 `D` 클래스의 `method()`를 호출하면 순서대로 `D` -> `B` -> `C` -> `A` 클래스의 메서드가 호출됩니다.

## 결론

다중 상속은 파이썬에서 강력한 기능 중 하나입니다. 하지만 다중 상속을 사용할 때는 다이아몬드 문제에 주의해야 합니다. 파이썬은 `super()` 함수를 통해 다이아몬드 문제를 해결할 수 있도록 해주지만, 상속 구조를 설계할 때 주의가 필요합니다.

다중 상속을 사용하여 코드를 작성할 때는 잘 정의된 클래스 구조와 상속 순서를 유지하며, `super()` 함수를 올바르게 사용하여 다이아몬드 문제를 해결하는 것이 좋습니다.