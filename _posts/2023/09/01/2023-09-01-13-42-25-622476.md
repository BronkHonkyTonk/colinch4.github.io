---
layout: post
title: "[파이썬] 데이터베이스 연동에서 보안과 암호화"
description: " "
date: 2023-09-01
tags: [python]
comments: true
share: true
---

데이터베이스 연동은 많은 애플리케이션에서 필수적인 요소입니다. 그러나 데이터베이스에 접근하는 동안 보안과 암호화 문제에 유의해야합니다. 이러한 문제를 잘 다루지 않으면, 악의적인 공격에 취약해질 수 있기 때문입니다. 

## 1. 데이터베이스 연결 보안

데이터베이스 연결 보안은 외부에서 데이터베이스에 접근할 때의 보안을 강화하는 것을 의미합니다. 가장 일반적인 방법은 SSL(Secure Socket Layer) 또는 TLS(Transport Layer Security)를 사용하여 암호화된 연결을 설정하는 것입니다. 이는 데이터베이스와 애플리케이션 간의 통신을 안전하게 보호합니다.

파이썬에서 데이터베이스 연결을 설정하는 경우, 연결 URL에 SSL 옵션을 추가하여 보안 연결을 설정할 수 있습니다. 예를 들어 MySQL 데이터베이스에 연결하는 경우, 다음과 같은 코드를 사용할 수 있습니다:

```python
import mysql.connector

config = {
    'user': 'username',
    'password': 'password',
    'host': 'localhost',
    'database': 'dbname',
    'ssl_ca': '/path/to/ca.pem',
    'ssl_cert': '/path/to/client-cert.pem',
    'ssl_key': '/path/to/client-key.pem'
}

cnx = mysql.connector.connect(**config)
```

위의 코드에서 `ssl_ca`, `ssl_cert`, `ssl_key` 옵션은 각각 CA 파일, 클라이언트 인증서 파일, 클라이언트 개인 키 파일의 경로를 지정하는 것입니다.

## 2. 데이터베이스 암호화

데이터베이스 연결을 보호하는 것은 중요하지만, 암호화된 데이터를 저장하는 것도 매우 중요합니다. 데이터베이스에 저장되는 민감한 정보는 해시 또는 암호화하여 저장해야합니다. 이렇게 하면 데이터 유출 시 중요한 정보가 노출되는 것을 방지할 수 있습니다.

파이썬에서 데이터베이스에 암호화된 데이터를 저장하는 방법은 다양합니다. 예를 들어, 암호를 저장해야하는 경우에는 `bcrypt` 모듈을 사용할 수 있습니다. 다음은 `bcrypt`를 사용하여 암호를 해싱하는 예제입니다:

```python
import bcrypt

password = "my_password".encode('utf-8')

# 암호화
hashed = bcrypt.hashpw(password, bcrypt.gensalt())

# 검증
if bcrypt.checkpw(password, hashed):
    print("암호 일치")
else:
    print("암호 불일치")
```

위의 코드에서 `hashpw` 함수는 주어진 암호를 해싱하고, `gensalt` 함수는 무작위의 솔트를 생성합니다. `checkpw` 함수는 주어진 암호와 해시된 패스워드를 비교하여 일치 여부를 확인합니다.

## 3. 적절한 권한 설정

데이터베이스 연결 및 암호화를 보안하기 위해 적절한 권한 설정도 중요합니다. 데이터베이스에 접근하는 사용자에게 최소한의 권한만 부여하는 것이 보안 측면에서 좋은 실천 방법입니다. 

데이터베이스 사용자에게 필요한 권한만 부여하고, 읽기 전용 권한이 필요한 경우 읽기 전용 권한만 부여하여 데이터를 보호할 수 있습니다. 이를 통해 애플리케이션에서 실수로 데이터를 삭제하거나 변경하는 일을 방지할 수 있습니다.

## 결론

데이터베이스 연동에서 보안과 암호화는 중요한 고려사항입니다. 데이터베이스 연결 보안을 강화하고, 저장되는 데이터를 암호화하며, 적절한 권한 설정을 통해 데이터베이스를 안전하게 유지하는 것이 중요합니다. 이러한 보안 관행을 준수하여 애플리케이션과 데이터를 보호하세요.