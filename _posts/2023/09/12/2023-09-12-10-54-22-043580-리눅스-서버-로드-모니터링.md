---
layout: post
title: "리눅스 서버 로드 모니터링"
description: " "
date: 2023-09-12
tags: [linux]
comments: true
share: true
---

리눅스 서버 환경에서 서버의 로드(Load)를 모니터링하는 것은 중요한 작업입니다. 로드는 시스템에 얼마나 많은 작업이 실행 중인지를 나타내는 지표입니다. 로드가 너무 높으면 서버의 성능이 저하되고, 응답 시간이 길어지며, 사용자의 만족도가 떨어질 수 있습니다.

이번 글에서는 리눅스 서버의 로드를 모니터링하는 방법을 알아보겠습니다.

## 1. top 명령어 사용하기

가장 간단한 방법은 터미널에서 `top` 명령어를 실행하는 것입니다. `top` 명령어는 서버의 현재 상태를 실시간으로 모니터링할 수 있는 유용한 도구입니다. 아래는 `top` 명령어를 사용하여 로드를 확인하는 예제입니다.

```bash
$ top

top - 11:03:47 up 10 days, 19:58,  2 users,  load average: 1.03, 1.30, 1.48
Tasks: 105 total,   2 running, 103 sleeping,   0 stopped,   0 zombie
Cpu(s):  2.3%us,  0.2%sy,  0.0%ni, 97.5%id,  0.0%wa,  0.0%hi,  0.0%si,  0.0%st
Mem:   4096M total,   3463M used,    633M free,    1188M buffers
Swap:  2048M total,    729M used,   1319M free,   2043M cached

PID   USER      PR  NI    VIRT    RES    SHR S %CPU %MEM     TIME+ COMMAND
16219 user1     20   0   19596   1640   1064 R  0.7  0.0   0:00.01 top
...
```

로드는 `load average` 부분에 표시되며, 세 개의 숫자로 표시됩니다. 각 숫자는 1분, 5분, 15분 동안의 평균 로드를 나타냅니다. 로드가 1.0 이하라면 시스템이 거의 비어있다는 의미이고, 1.0 이상이라면 시스템에 작업들이 쌓여 있다는 의미입니다.

## 2. sar 명령어 사용하기

서버의 로드를 더 상세하게 분석하고 싶다면 `sar` 명령어를 사용할 수 있습니다. `sar` 명령어는 시스템 자원 사용률을 감시하는 도구입니다. 아래는 `sar` 명령어를 사용하여 로드를 확인하는 예제입니다.

```bash
$ sar -q

12:00:01 AM   runq-sz  plist-sz   ldavg-1   ldavg-5  ldavg-15
12:10:01 AM         0       221      0.00      0.01      0.05
12:20:01 AM         0       221      0.00      0.00      0.03
12:30:01 AM         0       221      0.01      0.01      0.03
...
```

`ldavg-1`, `ldavg-5`, `ldavg-15` 열을 통해 1분, 5분, 15분 동안의 평균 로드를 확인할 수 있습니다.

## 3. Nagios 사용하기

만약 자동화된 로드 모니터링 시스템이 필요하다면 Nagios와 같은 도구를 사용할 수 있습니다. Nagios는 서버 및 네트워크 인프라를 모니터링하기 위한 오픈소스 도구로, 다양한 플러그인을 통해 서버의 로드를 실시간으로 모니터링할 수 있습니다. Nagios를 설치하고 구성하는 방법은 별도의 글에서 다루도록 하겠습니다.

---

서버의 로드를 모니터링하는 것은 서버 운영과 성능 향상을 위해 반드시 수행되어야 하는 작업입니다. 위에서 소개한 방법들을 활용하여 로드를 효과적으로 모니터링하고, 로드가 높아지는 시점을 미리 파악하여 대응하기 위한 작업을 진행해보세요. 리눅스 서버의 안정성과 성능을 유지하기 위해 로드 모니터링은 필수적입니다.