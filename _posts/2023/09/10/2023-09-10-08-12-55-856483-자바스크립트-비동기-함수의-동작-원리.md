---
layout: post
title: "자바스크립트 비동기 함수의 동작 원리"
description: " "
date: 2023-09-10
tags: [javascript]
comments: true
share: true
---

자바스크립트에서 비동기 함수는 프로그램의 실행 흐름을 블로킹하지 않고 백그라운드에서 작업을 수행할 수 있게 해줍니다. 이러한 비동기 함수의 동작 원리에 대해 알아보겠습니다.

## 콜백 함수를 이용한 비동기 처리

비동기 함수를 사용할 때 가장 흔히 사용되는 방식은 **콜백 함수**를 이용하는 것입니다. 콜백 함수란 비동기 함수의 작업이 완료되면 호출되는 함수로, 비동기 함수 호출 시 인자로 전달됩니다.

예를 들어, `setTimeout` 함수는 지정된 시간이 지난 후에 콜백 함수를 실행하는 비동기 함수입니다. 아래는 `setTimeout`을 사용한 예시 코드입니다.

```javascript
setTimeout(() => {
  console.log("Hello, world!");
}, 1000); // 1초 후에 콜백 함수가 실행됨
```

위 코드에서 `setTimeout` 함수는 1초 후에 콜백 함수를 실행하기 위해 백그라운드에서 작업을 수행합니다. 이때 프로그램의 실행 흐름은 즉시 다음 코드로 넘어갑니다.

## 이벤트 루프와 비동기 처리

자바스크립트는 **이벤트 루프**라는 메커니즘을 통해 비동기 함수의 실행을 관리합니다. 이벤트 루프는 자바스크립트 각 프레임을 처리하고, 작업을 순서대로 실행해 주는 역할을 합니다.

이벤트 루프는 여러 개의 **큐(Queue)**를 가지고 있으며, 각 큐에는 특정 유형의 작업이 대기합니다. 주요한 큐는 **태스크 큐**와 **마이크로태스크 큐**입니다.

- **태스크 큐(Task Queue)**: 비동기 함수의 콜백 함수나 이벤트 핸들러와 같은 작업들이 대기하는 큐입니다. 작업은 FIFO(First In, First Out) 방식으로 처리됩니다.
- **마이크로태스크 큐(Microtask Queue)**: 프로미스와 같은 비동기 작업의 완료 후 실행되는 마이크로태스크들이 대기하는 큐입니다. 마이크로태스크 큐의 작업은 태스크 큐보다 우선순위가 높습니다.

이벤트 루프는 이러한 큐들을 차례로 처리하며, 현재 실행 중인 작업이 없을 때 큐에서 작업을 가져와 실행합니다. 이 과정을 반복하여 비동기 함수의 작업을 처리합니다.

## 비동기 함수의 동작 순서

자바스크립트에서 비동기 함수의 동작 순서는 다음과 같습니다.

1. 비동기 함수는 백그라운드에서 작업을 수행하고, 작업이 완료되면 콜백 함수를 큐에 추가합니다.
2. 이벤트 루프는 현재 실행 중인 작업이 없을 때 태스크 큐에서 작업을 가져와 실행합니다.
3. 가져온 작업이 마이크로태스크인 경우, 먼저 마이크로태스크 큐의 작업을 처리합니다.
4. 콜백 함수가 실행되며, 비동기 함수의 결과를 처리하거나 다음 작업을 수행합니다.

## 결론

자바스크립트 비동기 함수는 콜백 함수를 이용하여 프로그램의 실행을 블로킹하지 않고 작업을 수행할 수 있습니다. 비동기 함수의 동작은 이벤트 루프와 큐를 통해 관리되며, 작업은 순서대로 실행됩니다.

비동기 함수를 잘 이용하면 웹 애플리케이션의 응답성을 높일 수 있으며, 더 나은 사용자 경험을 제공할 수 있습니다. 그러므로 자바스크립트 비동기 함수의 동작 원리에 대한 이해는 개발자에게 꼭 필요한 지식입니다.