---
layout: post
title: "[파이썬] 파이썬 2와 파이썬 3의 메모리 관리 차이"
description: " "
date: 2023-09-04
tags: [python]
comments: true
share: true
---

파이썬 2와 파이썬 3은 모두 인기 있는 프로그래밍 언어인데, 그들 간에는 몇 가지 중요한 차이점이 있습니다. 이 중 하나는 메모리 관리입니다. 파이썬 2와 파이썬 3 모두 가비지 컬렉션(Garbage Collection)을 사용하지만, 그들의 메모리 관리 방식이 약간 다릅니다.

## 1. 파이썬 2의 메모리 관리

파이썬 2에서는 기본적으로 **Reference Counting** 방식을 사용하여 메모리를 관리합니다. 이 방식은 각 객체마다 참조되는 횟수를 계산하고, 참조 횟수가 0이 되면 해당 객체를 메모리에서 해제하는 방식입니다.

예를 들어, 다음과 같은 코드를 실행해보겠습니다.

```python
a = [1, 2, 3]
b = a
c = b
```

위의 코드에서 `a`, `b`, `c`는 모두 동일한 리스트 객체를 참조하고 있습니다. 따라서 참조 횟수는 3이 됩니다. 만약 `a = None`과 같이 변수 `a`를 해제한다면, 참조 횟수는 2가 되지만 메모리에서는 아직 해제되지 않습니다.

파이썬 2에서는 가끔 **순환 참조**가 발생하여 가비지 컬렉션이 되지 않는 문제가 있습니다. 순환 참조는 두 개 이상의 객체가 서로를 참조할 때 발생하며, 이 경우에는 명시적으로 `gc.collect()`를 호출하여 강제로 가비지 컬렉션을 실행해야 합니다.

## 2. 파이썬 3의 메모리 관리

파이썬 3부터는 **Reference Counting** 방식 외에도 **Cycle Detection** 기능을 추가하여 메모리 관리 방식을 개선했습니다. 이 기능은 순환 참조 문제를 해결하기 위해 강력한 가비지 컬렉션 알고리즘을 사용합니다.

파이썬 3에서는 순환 참조된 객체들을 탐지하여 가비지 컬렉션을 수행함으로써 메모리 누수를 방지할 수 있습니다. 이러한 기능으로 인해 파이썬 3의 메모리 관리가 더 효과적이고 안정적이라고 할 수 있습니다.

## 3. 예제 코드 비교

다음은 파이썬 2와 파이썬 3에서의 예제 코드입니다.

### 파이썬 2

```python
# 파이썬 2에서의 예제 코드

def foo():
    return [1, 2, 3]

a = foo()
b = a
c = b
a = None

import gc
gc.collect()
```

### 파이썬 3

```python
# 파이썬 3에서의 예제 코드

def foo():
    return [1, 2, 3]

a = foo()
b = a
c = b
a = None
```

위의 예제 코드에서 파이썬 2 버전에서는 `gc.collect()`를 호출하여 명시적으로 가비지 컬렉션을 실행해야하지만, 파이썬 3 버전에서는 그럴 필요가 없습니다.

## 결론

파이썬 2와 파이썬 3은 메모리 관리 방식에서 약간의 차이가 있습니다. 파이썬 2는 **Reference Counting** 방식을 기본적으로 사용하며, 순환 참조에 대한 처리를 위해 `gc.collect()`를 호출해야 합니다. 반면에 파이썬 3는 **Reference Counting** 외에도 **Cycle Detection**을 지원하여 메모리 누수 문제를 더 효과적으로 해결할 수 있습니다.