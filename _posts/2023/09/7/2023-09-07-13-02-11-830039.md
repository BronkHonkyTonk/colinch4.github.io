---
layout: post
title: "[파이썬] `sys.unraisablehook()`: 처리되지 않은 예외에 대한 훅"
description: " "
date: 2023-09-07
tags: [python]
comments: true
share: true
---

Python은 강력한 예외 처리 메커니즘을 제공하여 코드에서 예외 상황을 처리할 수 있게 합니다. 하지만 때로는 예외가 처리되지 않고 던져지는 경우가 있을 수 있습니다. 이러한 경우에 대비하여 파이썬은 `sys.unraisablehook()` 함수를 제공합니다. 이 함수는 처리되지 않은 예외에 대한 후크(hook) 함수로 호출됩니다.

## 처리되지 않은 예외의 개념

처리되지 않은 예외는 예외가 발생하고 처리되지 않았을 때 발생합니다. 일반적으로 예외는 `try-except` 블록을 사용하여 잡히고 처리됩니다. 그러나 `except` 블록에서 예외를 잡아도 처리되지 않는다면, 해당 예외는 처리되지 않은 예외로 간주됩니다. 이러한 예외는 프로그램을 중단시킬 수 있으며, 오류 메시지를 표시하거나 오류 로깅을 수행하는 등의 추가 작업을 해야 할 수 있습니다.

## `sys.unraisablehook()` 함수

`sys.unraisablehook()` 함수는 처리되지 않은 예외가 발생했을 때 호출되는 후크 함수입니다. 이 함수는 일반적으로 예외 처리 로직을 추가로 구현하는 데 사용됩니다. `sys.unraisablehook()` 함수는 다음과 같은 형식을 갖습니다.

```python
def unraisablehook(exception, /):
    """
    처리되지 않은 예외에 대한 후크 함수
    """
    # 처리되지 않은 예외에 대한 작업 수행
    ...
```

`exception` 파라미터는 발생한 예외를 나타내는 객체입니다. 이 함수 내에서 `exception` 객체를 통해 예외에 대한 추가 작업을 수행할 수 있습니다. 예를 들어, 오류 메시지를 출력하거나 로깅하는 등의 작업을 할 수 있습니다.

## `sys.unraisablehook()` 사용 예제

다음은 `sys.unraisablehook()` 함수를 사용하는 간단한 예제입니다.

```python
import sys

def unraisablehook(exception, /):
    """
    처리되지 않은 예외에 대한 후크 함수
    """
    print(f"처리되지 않은 예외 발생: {exception}")

# sys.unraisablehook() 함수 등록
sys.unraisablehook = unraisablehook

# 처리되지 않은 예외 발생
try:
    # 처리되지 않은 예외를 발생시키는 코드
    ...
except:
    # 예외를 처리하는 코드
    ...
```

위의 코드에서는 `unraisablehook()` 함수를 정의하고, `sys.unraisablehook` 변수에 할당하여 후크 함수로 등록합니다. 이후 예외가 발생하고 처리되지 않으면 `unraisablehook()` 함수가 호출되어 처리되지 않은 예외에 대한 작업을 수행합니다. 이 예제에서는 간단하게 처리되지 않은 예외를 단순히 출력하는 형태로 작성되었습니다. 실제 활용시에는 로깅 라이브러리를 사용하여 로깅하는 등의 작업을 수행할 수 있습니다.

`sys.unraisablehook()` 함수를 사용하면 처리되지 않은 예외에 대한 후속 조치를 취할 수 있으므로, 프로그램이 예외로 인해 중단되지 않고 계속 실행될 수 있도록 도와줍니다.

## 결론

`sys.unraisablehook()` 함수는 파이썬에서 처리되지 않은 예외에 대한 후크 함수로 사용됩니다. 이 함수를 사용하여 처리되지 않은 예외에 대한 작업을 수행하면 프로그램이 예외로 인해 중단되지 않고 계속 실행될 수 있습니다. 이를 통해 프로그램의 안정성을 높이고, 예외에 대한 추가 작업을 수행할 수 있습니다.