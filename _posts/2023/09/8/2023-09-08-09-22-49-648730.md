---
layout: post
title: "[파이썬] FastAPI와 데이터 캐싱"
description: " "
date: 2023-09-08
tags: [python,FastAPI]
comments: true
share: true
---

## 소개
FastAPI는 Python으로 구성된 고성능 웹 프레임워크로, **빠른 속도**와 **간편한 사용성**을 제공합니다. 데이터 캐싱은 동일한 계산을 반복하여 수행하지 않고 결과를 임시로 저장하여 성능을 향상시키는 기술입니다.

이 블로그 포스트에서는 FastAPI와 데이터 캐싱을 함께 사용하여 Python 애플리케이션의 성능을 극대화하는 방법에 대해 알아보겠습니다.

## FastAPI 소개
FastAPI는 Python 3.7+에서 작동하며, Starlette라고도 하는 고속 웹 프레임워크를 기반으로 합니다. **타입 힌팅(Type Hints)**을 사용하여 빠르게 개발하고 효율적인 코드를 작성할 수 있으므로, 대규모 애플리케이션에 이상적입니다.

FastAPI의 주요 특징은 다음과 같습니다:
- 빠른 속도: ASGI 서버 및 asyncio를 사용하여 뛰어난 성능을 제공합니다.
- 타입 힌팅(Type Hints): 파이썬 3.7+의 타입 힌팅을 활용하여 개발자와 협업 및 디버깅을 용이하게 합니다.
- 자동 문서화: Swagger 및 ReDoc과 같은 도구를 사용하여 자동으로 API 문서를 생성합니다.
- 사용자 인증 및 권한 부여: OAuth2 및 JWT와 같은 인증 및 권한 부여 방법을 지원합니다.
- 비동기 지원: async 및 await를 사용하여 비동기 코드를 작성할 수 있습니다.

## 데이터 캐싱
데이터 캐싱은 반복적인 계산 또는 데이터베이스 쿼리 등의 작업을 수행할 때, 이전에 계산한 또는 검색한 결과를 임시 저장소에 저장하여 성능을 향상시키는 기술입니다. 데이터 캐싱을 사용하면 반복적인 작업을 줄이고 응답 시간을 단축할 수 있습니다.

Python에서 데이터 캐싱을 구현하기 위해 `cachetools`와 같은 라이브러리를 사용할 수 있습니다. 이 라이브러리는 메모리 캐시를 관리하는 데 도움이 되는 클래스와 함수를 제공합니다.

## FastAPI와 데이터 캐싱
FastAPI와 데이터 캐싱을 함께 사용하여 애플리케이션의 성능을 향상시킬 수 있습니다. 예를 들어, 로그인한 사용자의 데이터를 검색하는 API 엔드포인트를 고려해 봅시다. 이 엔드포인트는 사용자의 ID로 데이터베이스를 검색하여 사용자 정보를 반환합니다. 그러나 매번 같은 사용자 정보를 얻기 위해 데이터베이스에 직접 쿼리를 실행하는 것은 비효율적입니다.

FastAPI와 데이터 캐싱을 사용하면 이러한 문제를 해결할 수 있습니다. 처음에는 사용자 정보를 데이터베이스에서 가져와서 메모리 캐시에 저장하고, 이후에는 캐시에서 데이터를 검색하여 응답 시간을 단축할 수 있습니다. 이를 위해 `cachetools` 라이브러리를 사용하여 캐시를 구현할 수 있습니다.

다음은 FastAPI와 데이터 캐싱을 함께 사용하는 예제 코드입니다:

```python
from fastapi import FastAPI
from cachetools import cached, TTLCache

app = FastAPI()
cache = TTLCache(maxsize=100, ttl=3600)  # 최대 100개의 아이템을 저장하고 1시간 동안 유지하는 캐시

@cached(cache)
def get_user_info(user_id):
    # 여기에서 실제 데이터베이스에 쿼리를 실행하고 사용자 정보를 반환하는 로직을 구현합니다.
    return {"user_id": user_id, "name": "John Doe", "email": "johndoe@example.com"}

@app.get("/user/{user_id}")
def read_user(user_id: int):
    user_info = get_user_info(user_id)
    return {"user": user_info}
```

위의 예제 코드에서 `get_user_info` 함수는 `cached` 데코레이터를 사용하여 캐시 함수로 변환되었습니다. 이 함수는 동일한 인수(여기서는 `user_id`)로 여러 번 호출될 수 있지만, 첫 번째 호출에서 반환된 결과는 캐시에 저장되며 이후 호출에서는 캐시에서 데이터를 가져옵니다.

캐시는 `TTLCache` 클래스를 사용하여 구현되었으며, 최대 크기와 항목의 지속 시간(TTL)을 설정할 수 있습니다.

FastAPI와 데이터 캐싱을 함께 사용하여 애플리케이션의 성능을 극대화할 수 있습니다. 이를 통해 데이터 쿼리 및 계산을 중복 수행하지 않고도 빠른 응답 시간을 유지할 수 있습니다.

## 결론
FastAPI는 Python 개발자들에게 고성능 및 효율성을 제공하는 강력한 웹 프레임워크입니다. 데이터 캐싱을 함께 사용하면 반복적인 작업을 효율적으로 관리하고 응답 시간을 최소화할 수 있습니다.

FastAPI와 데이터 캐싱은 Python 애플리케이션 개발의 핵심 요소입니다. 이 블로그 포스트를 통해 FastAPI와 데이터 캐싱을 활용하여 성능을 극대화하는 방법을 배웠습니다. FastAPI와 데이터 캐싱을 사용하여 애플리케이션의 성능을 향상시키세요!