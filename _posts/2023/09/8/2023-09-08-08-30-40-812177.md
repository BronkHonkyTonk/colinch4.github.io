---
layout: post
title: "[파이썬] pdb와 대화형 셸 활용"
description: " "
date: 2023-09-08
tags: [python,pdb]
comments: true
share: true
---

이번 포스트에서는 Python의 내장 디버깅 도구인 PDB(Python Debugger)와 대화형 셸을 활용하여 코드 디버깅의 효율성을 높여보려고 합니다. PDB는 프로그램 실행 중에 중단점(breakpoint)을 설정하고, 코드를 한 줄씩 실행하며 변수의 값과 상태를 확인할 수 있게 해주는 강력한 도구입니다. 즉, 코드를 실행하는 동안 원하는 지점에서 프로그램을 일시적으로 정지시키고, 해당 지점에서의 변수의 값을 검사하거나 조작할 수 있게 합니다.

## PDB를 사용한 디버깅

PDB를 사용하여 디버깅을 시작하려면, 코드에서 중단점을 설정해야 합니다. 중단점은 코드의 특정 지점에서 프로그램을 일시 중지시키는 역할을 합니다. 중단점은 `pdb.set_trace()` 함수를 호출하여 설정할 수 있습니다. 다음은 PDB를 사용하여 디버깅을 수행하는 간단한 예제입니다.

```python
import pdb

def divide(x, y):
    try:
        result = x / y
    except ZeroDivisionError:
        pdb.set_trace()
        result = float('inf')
    return result

print(divide(10, 0))
```

위의 예제에서 `pdb.set_trace()`가 호출된 부분에서 코드 실행이 중지됩니다. 그리고 나서, PDB의 명령행 인터페이스를 사용하여 현재 변수의 값을 확인하고 문제를 진단할 수 있습니다.

## PDB 명령어

PDB에서는 다양한 명령어를 사용할 수 있습니다. 이 명령어들을 통해 코드 실행을 제어하거나 변수를 검사하고 조작할 수 있습니다. 여기에 몇 가지 자주 사용되는 PDB 명령어를 소개합니다.

- `n(ext)`: 다음 코드 라인으로 이동. 함수 호출은 한 번에 실행됩니다.
- `s(tep)`: 다음 코드 라인으로 이동. 함수 호출 내부로 들어갑니다.
- `b(reak) <line_number>`: 해당 줄에 중단점을 설정합니다.
- `r(eturn)`: 현재 함수의 나머지를 실행하고 함수가 반환될 때까지 실행을 계속합니다.
- `c(ontinue)`: 중단점까지 코드 실행을 계속합니다.
- `l(ist)`: 현재 코드 주위의 몇 줄을 보여줍니다.
- `p(rint) <expression>`: 표현식의 값을 출력합니다.
- `q(uit)`: 디버거를 종료합니다.

이 명령어들은 코드 실행 중에 사용할 수 있으며, 적절히 활용하여 디버깅을 수행할 수 있습니다.

## 대화형 셸 활용

PDB의 대화형 셸을 사용하면, 코드의 중단점에서 직접 변수를 조작하고 실험할 수 있습니다. 이를 통해 실시간으로 코드의 동작을 확인하고 수정할 수 있습니다. 대화형 셸은 디버깅 프로세스가 공식적으로 지원하는 파이썬 셸(IPython 등)을 사용하는 것이 좋습니다.

PDB에서 대화형 셸로 진입하려면, 중단점에서 `pdb.set_trace()`를 호출하고 코드를 실행합니다. 그런 다음, 대화형 셸로 들어가는 즉시 변수를 검사하고 원하는 명령어를 실행할 수 있습니다. 대화형 셸에서의 일반적인 명령어 예시는 다음과 같습니다.

```python
(Pdb) p variable_name
(Pdb) variable_name = new_value
(Pdb) n
```

위의 예시는 변수 값을 출력하고, 변수에 새 값을 할당하며, 다음 코드 라인으로 이동하는 방법을 보여줍니다.

## 마무리

이제 PDB와 대화형 셸을 사용하여 Python 코드를 디버깅하는 방법에 대해 알아보았습니다. PDB를 사용하면 코드의 실행 흐름을 중간에 중지시키고 변수의 값을 검사하고 조작할 수 있습니다. 이를 통해 더 신속하고 쉽게 버그를 찾아 수정할 수 있습니다. 디버깅은 프로그래밍에서 중요한 스킬이므로, PDB를 배우고 익혀두는 것은 좋은 아이디어입니다.