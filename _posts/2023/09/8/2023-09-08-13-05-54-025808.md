---
layout: post
title: "[파이썬] pickle과 스트림 데이터 처리"
description: " "
date: 2023-09-08
tags: [python,pickle]
comments: true
share: true
---

Python은 데이터의 직렬화와 역직렬화를 지원하는 `pickle` 모듈을 제공합니다. 이 모듈을 사용하면 객체를 이진 형식으로 변환하거나, 이진 형식의 데이터를 다시 객체로 변환할 수 있습니다. 이를 통해 데이터를 파일에 저장하거나 네트워크를 통해 전송하는 등의 작업을 쉽게 할 수 있습니다.

스트림 데이터는 특히 네트워크 통신이나 파일 입출력과 관련이 있습니다. 스트림 데이터를 처리할 때 `pickle` 모듈을 사용하여 데이터를 직렬화하고 역직렬화하는 것은 매우 편리합니다. 아래에서는 `pickle` 모듈을 사용하여 스트림 데이터를 처리하는 방법을 알아보겠습니다.

## 데이터를 스트림으로 저장하기

`pickle` 모듈은 `dump()` 함수를 통해 데이터를 스트림에 저장할 수 있습니다. 예를 들어, 다음과 같이 리스트 객체를 파일에 저장해보겠습니다.

```python
import pickle

data = [1, 2, 3, 4, 5]

with open("data.pkl", "wb") as f:
    pickle.dump(data, f)
```

위 코드에서 `pickle.dump()` 함수를 사용하여 `data` 리스트를 `data.pkl` 파일에 저장하였습니다. `open()` 함수의 두 번째 인자로 `"wb"`를 주어 이진 모드로 파일을 열었습니다.

## 스트림에서 데이터 불러오기

스트림 데이터를 읽어오기 위해서는 `pickle` 모듈의 `load()` 함수를 사용합니다. 예를 들어, 위에서 저장한 `data.pkl` 파일을 다시 읽어와 리스트 객체로 변환해보겠습니다.

```python
import pickle

with open("data.pkl", "rb") as f:
    loaded_data = pickle.load(f)

print(loaded_data)
```

위 코드에서 `pickle.load()` 함수를 사용하여 `data.pkl` 파일에서 데이터를 읽어와 `loaded_data` 변수에 저장하였습니다. `open()` 함수의 두 번째 인자로 `"rb"`를 주어 이진 모드로 파일을 열었습니다.

## 주의사항

`pickle` 모듈을 사용하여 스트림 데이터를 처리할 때 몇 가지 주의사항이 있습니다.

1. `pickle`은 기본적으로 **안전하지 않은** 모듈이므로 신뢰할 수 있는 데이터에만 사용해야 합니다. 그래서 네트워크를 통해 전송하거나 외부로부터 받은 데이터를 처리할 때는 주의해야 합니다.

2. `pickle`은 Python에서만 사용할 수 있는 형식이므로, Python과 다른 언어 간의 데이터 교환에는 다른 방법을 사용해야 합니다.

3. 파일이나 네트워크 등의 외부 리소스와 관련된 작업을 할 때는 반드시 파일 핸들이나 소켓과 같은 리소스를 `close()` 해주어야 합니다. 이를 위해 위 예제에서는 `with` 문을 사용하여 자동으로 파일을 닫아주었습니다.

## 결론

Python의 `pickle` 모듈은 스트림 데이터 처리에 매우 유용한 도구입니다. 이 모듈을 사용하면 데이터를 이진 형식으로 저장하고 읽어오는 작업이 간편해집니다. 하지만 데이터의 안전성과 다른 언어와의 호환성 등 몇 가지 주의사항을 염두에 두어야 합니다.