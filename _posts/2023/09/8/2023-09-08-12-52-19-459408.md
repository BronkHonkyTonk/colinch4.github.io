---
layout: post
title: "[파이썬] pickle을 사용한 대용량 데이터 처리"
description: " "
date: 2023-09-08
tags: [python,pickle]
comments: true
share: true
---

Python은 대용량 데이터를 처리하는데 효율적인 기능을 제공합니다. 그 중에 하나가 pickle 모듈입니다. pickle은 데이터 직렬화와 역직렬화를 가능하게 해주는 모듈로, 파이썬 객체를 파일에 저장하고 재사용할 수 있게 합니다. 

## pickle의 장점

- 간단한 인터페이스: pickle은 파이썬 객체를 직렬화하고 역직렬화하기 위한 간단한 인터페이스를 제공합니다. 단 몇 줄의 코드만으로 파일에 데이터를 저장하거나 불러올 수 있습니다.
- 모든 파이썬 객체 지원: pickle은 거의 모든 파이썬 객체를 지원합니다. 리스트, 딕셔너리, 클래스 인스턴스 등 다양한 객체를 저장하고 복원할 수 있습니다.
- 대용량 데이터 처리: pickle은 대용량 데이터도 처리할 수 있습니다. 메모리에 올리지 않고 직렬화하여 저장하고 필요할 때 역직렬화하여 사용할 수 있으므로 메모리 부족 문제를 경감시킬 수 있습니다.
- 프로토콜 지원: pickle은 다양한 프로토콜을 지원합니다. 프로토콜 버전을 선택하여 적합한 성능과 크기의 데이터를 처리할 수 있습니다.

## pickle 사용법

pickle을 사용하기 위해 우선 pickle 모듈을 import 해야 합니다.

```python
import pickle
```

### 객체 직렬화하기

객체를 직렬화하기 위해서는 `pickle.dump()` 함수를 사용합니다. 예를 들어, 리스트 객체를 파일에 저장하고 싶다면 다음과 같이 코드를 작성할 수 있습니다.

```python
data = [1, 2, 3, 4, 5]

with open('data.pickle', 'wb') as f:
    pickle.dump(data, f)
```

위 코드에서 `pickle.dump()` 함수는 첫 번째 인자로 직렬화할 객체를, 두 번째 인자로 파일 객체를 받습니다. 파일은 바이너리 모드로 열어야 합니다. 

### 객체 역직렬화하기

저장한 객체를 다시 복원하기 위해서는 `pickle.load()` 함수를 사용합니다. 예를 들어, 파일에 저장된 리스트 객체를 다시 불러오고 싶다면 다음과 같이 코드를 작성할 수 있습니다.

```python
with open('data.pickle', 'rb') as f:
    data = pickle.load(f)

print(data)  # [1, 2, 3, 4, 5]
```

위 코드에서 `pickle.load()` 함수는 파일 객체를 인자로 받아 역직렬화된 객체를 반환합니다.

## 주의사항

- pickle은 보안 관련 이슈가 있을 수 있으므로, 신뢰할 수 없는 데이터에는 사용하지 않는 것이 좋습니다. pickle을 사용할 경우, 직렬화된 데이터를 역직렬화하는 과정에서 악의적인 코드 실행 등의 보안 취약점이 존재할 수 있습니다.
- pickle은 파이썬 사양에 종속적이기 때문에, 다른 언어에서 pickle 된 데이터를 읽어들이는 것은 어려울 수 있습니다. 따라서, 다른 언어로 데이터를 전달해야 하는 경우에는 다른 직렬화 방식을 고려해야 합니다.

pickle은 대용량 데이터 처리를 간단하게 할 수 있는 파이썬의 강력한 기능 중 하나입니다. 올바르게 사용한다면 효율적이고 편리한 데이터 처리를 할 수 있습니다. 그러나 보안과 호환성에 유의하여 사용하도록 합니다.