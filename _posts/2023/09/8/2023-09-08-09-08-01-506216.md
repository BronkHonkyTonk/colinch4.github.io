---
layout: post
title: "[파이썬] DRF 라우터와 URL 패턴"
description: " "
date: 2023-09-08
tags: [python,DRF]
comments: true
share: true
---

In Django REST Framework (DRF), the router and URL patterns play a crucial role in defining the endpoints of your API. The router provides an easy way to automatically generate URLs for your views, reducing the amount of code you need to write. In this blog post, we will explore how to use the DRF router and URL patterns effectively in Python.

## Installing Django REST Framework

To get started, you'll need to have Django REST Framework installed. You can install it using pip:

```python
pip install djangorestframework
```

Once installed, you can add it to your Django project by adding `"rest_framework"` to the `INSTALLED_APPS` list in your project's settings file.

## Creating Views

Before we dive into the router and URL patterns, let's create a simple view that will serve as an example for this blog post. We'll create a view that handles a basic API endpoint for retrieving a list of users.

Create a new file called `views.py` and add the following code:

```python
from rest_framework.views import APIView
from rest_framework.response import Response

class UserListView(APIView):
    def get(self, request):
        # Logic to retrieve a list of users goes here
        users = ['user1', 'user2', 'user3']
        return Response(users)
```

## Using the DRF Router

The DRF router simplifies the process of creating URLs for your API views. It automatically generates the appropriate URLs for CRUD operations (create, retrieve, update, delete) based on the view class you provide.

To use the router, open your project's `urls.py` file and add the following code:

```python
from django.urls import path, include
from rest_framework import routers
from .views import UserListView

router = routers.DefaultRouter()
router.register('users', UserListView, basename='user')

urlpatterns = [
    path('', include(router.urls)),
]
```

In the code above, we import the `routers` module from DRF and create a `DefaultRouter` instance. We then register our `UserListView` view with the router using the `register` method, specifying the endpoint name as `'users'` and setting the `basename` to `'user'`. Finally, we include the router URLs by adding `path('', include(router.urls))` to the `urlpatterns`.

With this setup, the DRF router will generate the following URLs for our `UserListView` view:

- `/users/` - GET request to retrieve a list of users
- `/users/{pk}/` - GET request to retrieve a single user with the specified primary key (`pk`)
- `/users/{pk}/update/` - POST request to update a user with the specified primary key
- `/users/{pk}/delete/` - POST request to delete a user with the specified primary key

## Custom URL Patterns

If you need to define custom URL patterns alongside the ones generated by the DRF router, you can do that as well. Simply add the desired URLs to the `urlpatterns` list in your `urls.py` file.

For example, let's say we want to add a custom URL pattern to retrieve user statistics. We can modify our `urls.py` file to include the following code:

```python
from django.urls import path
from .views import UserStatisticsView

urlpatterns = [
    path('users/statistics/', UserStatisticsView.as_view()),
]
```

In this case, we create a new URL pattern that maps to a `UserStatisticsView` which will handle the request to retrieve user statistics. The URL pattern is defined as `/users/statistics/`.

## Conclusion

Using the DRF router and URL patterns effectively can greatly simplify the process of defining API endpoints in Django REST Framework. By taking advantage of the router's automatic URL generation, you can reduce the amount of code you need to write and make your API more concise and maintainable.

In this blog post, we covered the basics of using the DRF router and incorporating custom URL patterns into your Django project. Now you can create powerful and efficient APIs with ease using Django REST Framework.