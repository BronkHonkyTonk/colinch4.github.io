---
layout: post
title: "[파이썬] pdb 디버깅 중 코드 인스펙션 및 리플렉션"
description: " "
date: 2023-09-08
tags: [python,pdb]
comments: true
share: true
---

디버깅은 소프트웨어 개발 과정에서 핵심적인 역할을 담당합니다. 디버깅 도구를 사용하면 코드를 실행하고 문제를 식별, 분석하여 해결할 수 있습니다. Python에서는 `pdb`라는 내장 디버깅 도구를 제공합니다. 이를 사용하여 코드의 인스펙션(inspection)과 리플렉션(reflection)을 수행할 수 있습니다.

## 코드 인스펙션

코드 인스펙션은 실행 중인 프로그램의 현재 상태와 관련된 정보를 살펴보는 것을 의미합니다. `pdb` 디버거를 사용하여 다음과 같은 인스펙션을 수행할 수 있습니다:

- **브레이크포인트 설정** : 코드의 특정 위치에 중단점을 설정하여 코드의 실행을 일시 중지하고 디버거로 제어를 전환할 수 있습니다. `pdb.set_trace()` 함수를 사용하여 브레이크포인트를 설정할 수 있습니다.
- **현재 스택 확인** : 현재 실행 중인 함수의 스택 정보를 확인할 수 있습니다. `pdb` 디버거에서 `where` 명령어를 사용하여 스택 추적 정보를 확인할 수 있습니다.
- **변수 값 확인** : 현재 스코프에 존재하는 변수의 값을 확인할 수 있습니다. `pdb` 디버거에서 `print` 명령어를 사용하여 변수의 값을 출력할 수 있습니다.

아래 예제 코드는 `pdb` 디버거를 사용하여 코드 인스펙션을 수행하는 방법을 보여줍니다.

```python
import pdb

def calculate_sum(a, b):
    pdb.set_trace()  # 브레이크포인트 설정
    result = a + b
    print(result)

calculate_sum(5, 10)
```

위의 예제 코드에서 `pdb.set_trace()` 함수를 사용하여 브레이크포인트를 설정하고 코드를 실행하면, `pdb` 디버거로 제어가 전환됩니다. 이후에는 `pdb` 디버거의 명령어를 사용하여 현재 스택을 확인하거나 변수의 값을 출력할 수 있습니다.

## 코드 리플렉션

코드 리플렉션은 실행 중인 코드의 구조와 관련된 정보를 동적으로 살펴보는 것을 의미합니다. Python은 리플렉션을 위한 강력한 내장 기능을 제공합니다. `pdb` 디버거를 사용하여 다음과 같은 리플렉션을 수행할 수 있습니다:

- **클래스 및 메서드 정의 확인** : `pdb` 디버거에서 `l` 명령어를 사용하여 현재 위치에서 코드의 클래스 및 메서드 정의를 확인할 수 있습니다.
- **객체의 속성 및 메서드 확인** : 객체를 변수로 저장한 후에 `dir()` 함수를 사용하여 해당 객체의 속성과 메서드를 확인할 수 있습니다.
- **클래스 상속 계층 확인** : `pdb` 디버거에서 `info class` 명령어를 사용하여 클래스의 상속 계층을 확인할 수 있습니다.

아래 예제 코드는 `pdb` 디버거를 사용하여 코드 리플렉션을 수행하는 방법을 보여줍니다.

```python
import pdb

class Person:
    def __init__(self, name, age):
        self.name = name
        self.age = age

    def greet(self):
        print(f"안녕하세요, 저는 {self.name}입니다.")

pdb.set_trace()  # 브레이크포인트 설정
person = Person("Alice", 25)
person.greet()
```

위의 예제 코드에서 `pdb` 디버거를 사용하여 코드를 실행하고 브레이크포인트에서 멈춘 후, `l` 명령어를 사용하여 클래스와 메서드 정의를 살펴볼 수 있습니다. 또한, `dir(person)` 명령어를 사용하여 `person` 객체의 속성과 메서드를 확인할 수 있습니다.

## 마무리

`pdb` 디버거를 사용하여 코드 인스펙션 및 리플렉션을 수행할 수 있습니다. 인스펙션은 코드 실행 중에 현재 상태를 확인하고 디버깅하는 데 유용하며, 리플렉션은 코드의 구조와 관련된 정보를 동적으로 살펴보는 데 유용합니다. 이러한 기능을 활용하여 Python 코드를 효율적으로 디버깅할 수 있습니다.