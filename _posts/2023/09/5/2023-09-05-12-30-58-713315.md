---
layout: post
title: "[파이썬] 도커 이미지 빌드와 관리"
description: " "
date: 2023-09-05
tags: [python]
comments: true
share: true
---

도커는 애플리케이션을 **컨테이너화**하여 개발과 배포를 간편하게 해주는 도구입니다. 도커를 사용하면 애플리케이션과 그에 필요한 종속성을 포함한 **이미지**를 생성할 수 있습니다. 이 이미지는 애플리케이션을 실행할 수 있는 단일한 패키지로, 서버 환경에 구애받지 않고 어디서나 실행할 수 있습니다.

## 도커 이미지 빌드하기

도커 이미지를 빌드하는 과정은 매우 간단합니다. 먼저, 프로젝트 루트 디렉토리에 **Dockerfile**이라는 이름의 파일을 생성합니다. 이 Dockerfile은 도커 이미지를 생성할 때 어떤 명령어와 설정을 사용할지 정의하는 파일입니다.

프로젝트 코드나 종속성 등을 이미지에 넣기 위해선, Dockerfile에서 **베이스 이미지**를 정의해야 합니다. 베이스 이미지는 도커가 이미 생성해둔 이미지를 사용하거나, 필요한 설정을 가진 커스텀 이미지로 설정할 수 있습니다. 베이스 이미지 뒤에는 필요한 추가 설정이 오게 됩니다.

**예시 Dockerfile**:

```docker
FROM python:3.9

WORKDIR /app

COPY requirements.txt .

RUN pip install -r requirements.txt

COPY . .

CMD [ "python", "app.py" ]
```

위 Dockerfile 예시는 파이썬 3.9 버전을 베이스 이미지로 사용하고, **requirements.txt** 파일에 명시된 종속성을 설치한 뒤, 현재 디렉토리의 프로젝트 파일들을 이미지 안으로 복사합니다. 마지막으로, 애플리케이션을 실행하기 위해 **CMD** 명령어를 사용합니다.

Dockerfile 설정을 마친 뒤, 터미널에서 다음 명령어를 입력하여 도커 이미지를 빌드할 수 있습니다.

```
docker build -t myapp .
```

**-t** 옵션은 이미지의 태그를 지정하는 것입니다. 마침표(.)는 현재 디렉토리에서 Dockerfile을 찾도록 합니다.

## 도커 이미지 관리하기

빌드한 도커 이미지를 관리하는 것은 개발 및 배포 과정에서 중요한 부분입니다. 이미지는 여러 버전으로 관리될 수 있으며, 최신 버전을 유지하고 이전 버전을 보관하는 것이 일반적입니다.

다음은 이미지 관리를 위해 사용되는 몇 가지 중요한 도커 명령어입니다:

- **docker image ls**: 현재 시스템에 있는 모든 도커 이미지를 보여줍니다.
- **docker image pull**: 도커 레지스트리로부터 이미지를 다운로드합니다.
- **docker image push**: 빌드한 이미지를 도커 레지스트리에 업로드합니다.
- **docker image rm**: 이미지를 삭제합니다.
- **docker image tag**: 이미지에 태그를 추가하거나 변경합니다.

이미지를 관리하는 것은 애플리케이션의 버전 관리와도 밀접한 관련이 있습니다. 애플리케이션의 코드나 설정이 변경되면 새로운  Dockerfile을 작성하고 이미지를 다시 빌드해야 합니다. 이후, 이전 버전과 새 버전의 이미지를 구분하여 관리하는 것이 좋습니다.

도커를 사용하여 개발 및 배포를 간편하게 할 수 있으며, 이미지를 효과적으로 관리하는 것이 중요합니다. 도커를 활용하여 애플리케이션을 컨테이너화하는 이점을 최대한 활용하고, 개발 및 운영 효율성을 높이기 위해 이미지 관리에 신경쓰는 것을 추천합니다.