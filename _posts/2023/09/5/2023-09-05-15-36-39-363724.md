---
layout: post
title: "[파이썬] AWS Lambda와 AppSync를 통한 서버리스 GraphQL API 개발"
description: " "
date: 2023-09-05
tags: [python]
comments: true
share: true
---

서버리스 아키텍처는 최근에 많은 관심을 받고 있는 개발 패러다임입니다. 이는 서버 관리와 인프라 구축에 대한 부담을 줄여주고, 개발자가 애플리케이션 구축에 집중할 수 있도록 도와줍니다. 이러한 장점을 통해 많은 개발자들이 서버리스 아키텍처를 채택하고 있으며, AWS는 이를 위해 AWS Lambda와 AppSync를 제공하고 있습니다.

## AWS Lambda란?

AWS Lambda는 서버리스 컴퓨팅 서비스로써, 코드를 실행하기 위한 서버를 별도로 관리하지 않고도 코드를 실행할 수 있게 해줍니다. 이를 통해 사용자는 인프라를 구성하거나 관리할 필요 없이 코드를 실행할 수 있습니다. 또한 사용자는 자체적으로 스케일링과 로드 밸런싱을 신경 쓸 필요 없이 코드를 실행할 수 있으며, 사용한 컴퓨팅 자원만큼 비용을 지불할 수 있습니다.

## AppSync란?

AppSync는 AWS의 매니지드 GraphQL 서비스로써, GraphQL을 사용하여 애플리케이션의 데이터 쿼리 및 동기화를 관리할 수 있습니다. AppSync를 통해 사용자는 필요한 데이터만을 효율적이고 세밀하게 요청하여 받을 수 있으며, 여러 데이터 소스로부터 데이터를 가져와서 클라이언트에게 제공할 수 있습니다. 또한 실시간 데이터 동기화를 위한 서비스도 제공되므로, 실시간 애플리케이션 개발에도 유용하게 사용할 수 있습니다.

## 서버리스 GraphQL API 개발하기

AWS Lambda와 AppSync를 함께 사용하여 서버리스 환경에서 GraphQL API를 개발하는 방법을 알아보겠습니다. 

1. AWS Console에 로그인하고 AppSync 서비스 페이지로 이동합니다.
2. "새 API 만들기" 버튼을 클릭하고, API 이름과 설명을 입력한 후, 'API 만들기' 버튼을 클릭합니다.
3. "Schema" 탭에 들어가서 GraphQL 스키마를 작성합니다. 여기에는 데이터 타입, 쿼리, 뮤테이션 등의 정의를 할 수 있습니다.
4. "데이터 소스" 탭에서 데이터 소스를 설정합니다. 이는 실제 데이터를 가져올 데이터베이스나 API를 연결하는 과정입니다.
5. "리졸버" 탭에서 각각의 쿼리와 뮤테이션에 대한 리졸버 함수를 작성합니다. 이 함수는 Lambda에서 코드를 실행하여 결과를 반환합니다.
6. "API 키"와 "인증" 탭에서 필요한 인증 방식과 권한 설정을 할 수 있습니다.
7. "실행" 탭에서 API를 실행하고 테스트할 수 있습니다.

이렇게 만들어진 서버리스 GraphQL API는 AWS Lambda와 AppSync를 통해 자동으로 스케일링되고 관리될 수 있습니다. 개발자는 필요한 로직을 Lambda 함수로 작성하고, AppSync를 통해 손쉽게 API를 제공할 수 있습니다.

## Python으로 AWS Lambda 함수 작성하기

AWS Lambda에서는 다양한 프로그래밍 언어를 지원합니다. 여기서는 Python을 사용하여 AWS Lambda 함수를 작성하는 방법을 살펴보겠습니다.

1. AWS Lambda 페이지로 이동하여 "함수 생성"을 클릭합니다.
2. "함수 이름"을 입력하고, "런타임"으로 Python 3.8을 선택합니다.
3. "실행 역할"을 선택하거나 새 역할을 생성합니다.
4. "함수 생성" 버튼을 클릭하고, 코드 편집기에서 함수 코드를 작성합니다. 예를 들어 다음과 같습니다.

```python
import json

def lambda_handler(event, context):
    # 이곳에 Lambda 함수의 로직을 작성합니다.
    message = "Hello, AWS Lambda!"
    
    response = {
        "statusCode": 200,
        "body": json.dumps(message)
    }
    
    return response
```

5. 함수 코드 작성이 완료되면 "배포" 버튼을 클릭하여 Lambda 함수를 배포합니다.
6. Lambda 함수를 실행하여 테스트할 수 있습니다.

이렇게 작성된 Python 코드는 AWS Lambda에서 실행되어 원하는 로직을 수행하고, 결과를 반환합니다. AppSync와 함께 사용하면 GraphQL API의 리졸버 함수로서 Lambda 함수를 간단하게 연결할 수 있습니다.

## 결론

AWS Lambda와 AppSync를 통해 서버리스 아키텍처에서 GraphQL API를 개발하는 방법을 알아보았습니다. 이를 통해 개발자는 서버 관리에 대한 부담을 줄이고, 애플리케이션 개발에 집중할 수 있습니다. 또한 Python과 같은 다양한 프로그래밍 언어를 사용하여 AWS Lambda 함수를 작성하고, AppSync를 통해 GraphQL API에 연결할 수 있습니다. 이러한 기술을 응용하여 더욱 빠르고 유연한 서비스를 개발할 수 있습니다.