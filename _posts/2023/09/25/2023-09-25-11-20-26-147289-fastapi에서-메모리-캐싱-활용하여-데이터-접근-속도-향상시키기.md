---
layout: post
title: "FastAPI에서 메모리 캐싱 활용하여 데이터 접근 속도 향상시키기"
description: " "
date: 2023-09-25
tags: [FastAPI]
comments: true
share: true
---

FastAPI는 빠른 웹 애플리케이션 개발을 위한 고성능 웹 프레임워크입니다. 하지만 때로는 데이터베이스 등 외부 리소스에 대한 데이터를 접근해야 하는 상황에서 속도가 느려지는 경우가 있을 수 있습니다. 이러한 상황에서 메모리 캐싱을 활용하면 데이터 접근 속도를 향상시킬 수 있습니다.

## 메모리 캐싱이란?

메모리 캐싱은 데이터를 메모리에 저장하여 반복적인 데이터 접근 시 데이터를 다시 계산하거나 외부 리소스에 접근하는 비용을 줄이는 기술입니다. 즉, 한 번 접근한 데이터를 메모리에 저장하고 다음에 접근할 때는 메모리에서 데이터를 읽어오는 방식입니다. 이를 통해 데이터 접근 속도를 향상시킬 수 있습니다.

## FastAPI에서의 메모리 캐싱 활용 방법

FastAPI에서 메모리 캐싱을 활용하는 방법은 다양한 방법이 있지만, 가장 간단한 방법은 캐싱 라이브러리의 사용입니다. 여기서는 `cachetools` 라이브러리를 사용하여 FastAPI에서 메모리 캐싱을 활용하는 방법을 알아보겠습니다.

먼저, `cachetools` 라이브러리를 설치해야 합니다. 아래 명령을 사용하여 설치할 수 있습니다.

```shell
pip install cachetools
```

다음은 실제 코드에서 메모리 캐싱을 활용하는 예시입니다. 

```python
from fastapi import FastAPI
from cachetools import cached, TTLCache

app = FastAPI()
cache = TTLCache(maxsize=100, ttl=600)  # 최대 100개의 항목을 저장하고, 600초 동안 유효하게 설정

@cached(cache)
def get_data_from_external_resource() -> str:
    # 외부 리소스에서 데이터를 가져오는 로직
    # 복잡한 데이터 조회 등의 작업을 수행

    return "Data from external resource"

@app.get("/data")
async def get_data():
    data = get_data_from_external_resource()
    return {"data": data}
```

위 코드에서 `cached` 데코레이터를 사용하여 `get_data_from_external_resource` 함수의 결과를 메모리에 캐싱합니다. 이렇게 함으로써 처음에는 외부 리소스에 데이터를 접근하지만, 이후 동일한 요청이 들어오면 메모리에서 데이터를 반환합니다. 이를 통해 외부 리소스에 반복적인 접근을 줄이고 데이터 접근 속도를 향상시킬 수 있습니다.

## 메모리 캐싱의 장단점

메모리 캐싱은 데이터 접근 속도를 향상시킬 수 있다는 큰 장점이 있습니다. 또한, 메모리에 저장된 데이터를 사용하므로 외부 리소스에 대한 요청 횟수를 줄일 수 있습니다.

하지만 메모리 캐싱은 메모리에 데이터를 저장해야 하므로 일정한 메모리 공간을 차지하게 됩니다. 따라서 메모리 캐시의 크기와 유효 시간을 적절하게 설정하는 것이 중요합니다. 또한, 데이터가 자주 업데이트되는 상황에서는 캐시가 최신 데이터를 반영하지 못할 수 있으므로 이 점에 유의해야 합니다.

## 결론

FastAPI에서 메모리 캐싱을 활용하여 데이터 접근 속도를 향상시킬 수 있습니다. 캐싱 라이브러리를 사용하여 데이터를 메모리에 저장하고 필요할 때 메모리에서 데이터를 읽어오는 방식으로 데이터의 반복적인 접근을 줄일 수 있습니다. 메모리 캐싱을 활용하여 웹 애플리케이션의 성능을 향상시킬 수 있습니다.

#FastAPI #메모리캐싱