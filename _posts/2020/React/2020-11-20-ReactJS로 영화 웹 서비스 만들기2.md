---
layout: post
title: "ReactJS로 영화 웹 서비스 만들기 2"
description: " "
date: 2020-11-20
tags: [ReactJS]
comments: true
share: true
---



#### 6 - 2. Building the Navigation

```javascript
// component/Navigation.js
import React from 'react'
import { Link } from 'react-router-dom'

function Navigation(){
    return (
      <div>
        {/* <a href="/">HOME</a>
        <a href="/about">ABOUT</a> */}
        {/* a  href 를 사용하면 페이지를 아예 새로고침해버린다. */}
        <Link to="/">HOME</Link>
        <Link to="/about">ABOUT</Link>
      </div>
    );
}

export default Navigation;

// src/App.js
function App(){
  return (
    <HashRouter>
      <Navigation />
      {/*  Navigation 안에서 사용되는 Link 는 Router 밖에서는 사용될 수 없다.*/}
      <Route path="/" exact={true} component={Home} />
      <Route path="/about" component={About} />
    </HashRouter>
  );
} 
```

#### 6 - 3. Sharing Props Between Routes
- router 에 있는 모든 router들은 props를 가진다.

```javascript
// component/Navigation.js
function Navigation(){
    return (
      <div>
        <Link to="/">HOME</Link>
        <Link to={{ 
            pathname: '/about',
            state: {
                fromNavigation: true
            }
        }}>ABOUT</Link>
        {/*  to 에는 string 을 넣을 수 있고, object를 사용할 수도 있다. */}
      </div>
    );
}

// route/About.js
function About(props){
    console.log(props);
    // location > state 에서 보낸 props 를 확인할 수 있다.
    return <span>About this page</span>
}
```

- 영화를 누르면 상세화면으로 넘어가기때문에 , Movie.js 의 div를 Link로 바꿔주고, state 의 props 값을 전달해 주었다.

```javascript
function Movie({ year, title, summary, poster, genres }) {
  return (
    <Link to={{
      pathname: '/movie-detail',
      state: {
        title, year, summary, poster, genres 
      }
    }}>
      <div className="movie">
        // ....
      </div>
    </Link>
  );
}
```

#### 6 - 4. Redirecting 
- 카드를 눌렀을때만 detail page 에 들어가야하는데 새로고침하면 받아온 값이 없어서 undefined가 뜬다 
- 이때 리다이렉트 방법!

```javascript
import React from 'react';

class Detail extends React.Component{
    componentDidMount(){
        const { location, history } = this.props;
        if(location.state === undefined){
            history.push("/")
            // 카드를 클릭해서 들어온게 아니라면 리다이렉트 시킴( 홈 화면으로 )
        }
        console.log(location.state); 
    }

    render(){
        const {location} = this.props
        if(location.state){
            return <span>{location.state.title}</span>;
        } else return null 
    }
}

export default Detail;
```
- 또한 pathname 을 /movie-detail 로 하기보다는 각 영화의 아이디 값을 부여해 줄 수 있다.

```javascript
// Movies.js
<Link to={{
      pathname: `/movie/${id}`,
      state: {
        id, title, year, summary, poster, genres 
      }
 }}>

// App.js
<Route path="/movie/:id" component={Detail} />
      {/* :id 를 통해 변수가 있음을 알려준다. */}
```

